webpackJsonp([0],[function(t,e,r){"use strict";var n=r(1),i=r(3),o=r(23);i.enableProdMode(),n.platformBrowserDynamic().bootstrapModule(o.AppModule)},,,,,,,,,,,,,,,,,,,,,,,function(t,e,r){"use strict";var n=this&&this.__decorate||function(t,e,r,n){var i,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,r,s):i(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},o=r(3),s=r(21),a=r(24),u=r(31),c=r(25),l=function(){function AppModule(){c.db.connect("blog",!0)}return AppModule=n([o.NgModule({imports:[s.BrowserModule],providers:[u.PostService],declarations:[a.AppComponent],bootstrap:[a.AppComponent]}),i("design:paramtypes",[])],AppModule)}();e.AppModule=l},function(t,e,r){"use strict";var n=this&&this.__decorate||function(t,e,r,n){var i,o=arguments.length,s=o<3?e:null===n?n=Object.getOwnPropertyDescriptor(e,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,r,n);else for(var a=t.length-1;a>=0;a--)(i=t[a])&&(s=(o<3?i(s):o>3?i(e,r,s):i(e,r))||s);return o>3&&s&&Object.defineProperty(e,r,s),s},i=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},o=r(3),s=r(25),a=r(31);r(33);var u=function(){function AppComponent(t){this.postService=t}return AppComponent.prototype.ngOnInit=function(){var t=this;s.db.ready().then(function(){return t.postService.getAll()}).then(function(e){t.posts=e})},AppComponent=n([o.Component({selector:"my-app",template:r(37),styles:[r(39)]}),i("design:paramtypes",["function"==typeof(t="undefined"!=typeof a.PostService&&a.PostService)&&t||Object])],AppComponent);var t}();e.AppComponent=u},function(t,e,r){var n,n;(function(e,r,i){/*!
	* Baqend JavaScript SDK 2.5.0
	* http://baqend.com
	*
	* Copyright (c) 2015 Baqend GmbH
	*
	* Includes:
	* babel-helpers - https://babeljs.io/docs/plugins/external-helpers/
	* Copyright (c) 2014-2016 Sebastian McKenzie <sebmck@gmail.com>
	*
	* core.js - https://github.com/zloirock/core-js
	* Copyright (c) 2014-2016 Denis Pushkarev
	*
	* uuid - http://github.com/broofa/node-uuid
	* Copyright (c) 2010-2016 Robert Kieffer and other contributors
	*
	* validator - http://github.com/chriso/validator.js
	* Copyright (c) 2015 Chris O'Hara <cohara87@gmail.com>
	*
	* Released under the MIT license
	*
	* Date: Fri, 06 Jan 2017 17:24:36 GMT
	*/
!function(e){t.exports=e()}(function(){var t,o={};return o.typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o.classCallCheck=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},o.createClass=function(){function defineProperties(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(t,e,r){return e&&defineProperties(t.prototype,e),r&&defineProperties(t,r),t}}(),o.defaults=function(t,e){for(var r=Object.getOwnPropertyNames(e),n=0;n<r.length;n++){var i=r[n],o=Object.getOwnPropertyDescriptor(e,i);o&&o.configurable&&void 0===t[i]&&Object.defineProperty(t,i,o)}return t},o.inherits=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):o.defaults(t,e))},o.possibleConstructorReturn=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e},function e(t,r,i){function s(a,u){if(!r[a]){if(!t[a]){var c="function"==typeof n&&n;if(!u&&c)return n(a,!0);if(o)return o(a,!0);var l=new Error("Cannot find module '"+a+"'");throw l.code="MODULE_NOT_FOUND",l}var f=r[a]={exports:{}};t[a][0].call(f.exports,function(e){var r=t[a][1][e];return s(r?r:e)},f,f.exports,e,t,r,i)}return r[a].exports}for(var o="function"==typeof n&&n,a=0;a<i.length;a++)s(i[a]);return s}({1:[function(t,e,r){"use strict";var n=t(65),i=function(){function Acl(t){o.classCallCheck(this,Acl),this.read=new n(t),this.write=new n(t)}return Acl.prototype.clear=function(){this.read.clear(),this.write.clear()},Acl.prototype.copy=function(t){return this.read.copy(t.read),this.write.copy(t.write),this},Acl.prototype.isPublicReadAllowed=function(){return this.read.isPublicAllowed()},Acl.prototype.setPublicReadAllowed=function(){return this.read.setPublicAllowed()},Acl.prototype.isReadAllowed=function(t){return this.read.isAllowed(t)},Acl.prototype.isReadDenied=function(t){return this.read.isDenied(t)},Acl.prototype.allowReadAccess=function(t){return n.prototype.allowAccess.apply(this.read,arguments),this},Acl.prototype.denyReadAccess=function(t){return n.prototype.denyAccess.apply(this.read,arguments),this},Acl.prototype.deleteReadAccess=function(t){return n.prototype.deleteAccess.apply(this.read,arguments),this},Acl.prototype.isPublicWriteAllowed=function(){return this.write.isPublicAllowed()},Acl.prototype.setPublicWriteAllowed=function(){return this.write.setPublicAllowed()},Acl.prototype.isWriteAllowed=function(t){return this.write.isAllowed(t)},Acl.prototype.isWriteDenied=function(t){return this.write.isDenied(t)},Acl.prototype.allowWriteAccess=function(t){return n.prototype.allowAccess.apply(this.write,arguments),this},Acl.prototype.denyWriteAccess=function(t){return n.prototype.denyAccess.apply(this.write,arguments),this},Acl.prototype.deleteWriteAccess=function(t){return n.prototype.deleteAccess.apply(this.write,arguments),this},Acl.prototype.toJSON=function(){return{read:this.read,write:this.write}},Acl.prototype.fromJSON=function(t){this.read.fromJSON(t.read||{}),this.write.fromJSON(t.write||{})},Acl}();e.exports=i},{65:65}],2:[function(t,e,r){"use strict";var n=t(36),i=t(34),s=t(20),a=t(70),u=t(59),c=t(19),l=t(4),f=t(63),h=t(25),p=t(21),d=h.StatusCode,y=function(t){function EntityManager(e){o.classCallCheck(this,EntityManager);var r=o.possibleConstructorReturn(this,t.call(this));return r.log=a.Logger.create(r),r._connector=null,r._entities=null,r.entityManagerFactory=e,r.metamodel=e.metamodel,r.code=e.code,r.modules=null,r.me=null,r.isDeviceRegistered=!1,r.tokenStorage=null,r.bloomFilter=null,r.cacheWhiteList=null,r.cacheBlackList=null,r.bloomFilterRefresh=60,r._bloomFilterLock=new a.Lockable,r}return o.inherits(EntityManager,t),o.createClass(EntityManager,[{key:"isOpen",get:function(){return!!this._connector}},{key:"token",get:function(){return this.tokenStorage.token},set:function(t){this.tokenStorage.update(t)}},{key:"isCachingDisabled",get:function(){return!this.bloomFilter}}]),EntityManager.prototype.connected=function(t,e,r){this._connector=t,this.tokenStorage=r,this.bloomFilterRefresh=this.entityManagerFactory.staleness,this._entities={},this.File=s.FileFactory.create(this),this._createObjectFactory(this.metamodel.embeddables),this._createObjectFactory(this.metamodel.entities),this.transaction=new l(this),this.modules=new a.Modules(this,t),e&&(this.isDeviceRegistered=!!e.device,e.user&&e.token==r.token&&this._updateUser(e.user,!0),this.bloomFilterRefresh>0&&e.bloomFilter&&a.atob&&!a.isNode&&this.updateBloomFilter(e.bloomFilter))},EntityManager.prototype._createObjectFactory=function(t){Object.keys(t).forEach(function(t){var e=this.metamodel.managedType(t),r=e.name;this[r]?(e.typeConstructor=this[r],Object.defineProperty(this,r,{value:e.createObjectFactory(this)})):Object.defineProperty(this,r,{get:function(){return Object.defineProperty(this,r,{value:e.createObjectFactory(this)}),this[r]},set:function(t){e.typeConstructor=t},configurable:!0})},this)},EntityManager.prototype.send=function(t){var e=this;return t.tokenStorage=this.tokenStorage,this._connector.send(t).catch(function(t){throw t.status==d.BAD_CREDENTIALS&&e._logout(),t})},EntityManager.prototype.getReference=function(t,e){var r,n;e?(n=this.metamodel.entity(t),r=0==e.indexOf("/db/")?e:n.ref+"/"+encodeURIComponent(e)):(r=t,n=this.metamodel.entity(r.substring(0,r.indexOf("/",4))));var i=this._entities[r];if(!i){i=n.create();var o=f.get(i);o.id=r,o.setUnavailable(),this._attach(i)}return i},EntityManager.prototype.createQueryBuilder=function(t){return new u.Builder(this,t)},EntityManager.prototype.clear=function(){this._entities={}},EntityManager.prototype.close=function(){return this._connector=null,this.clear()},EntityManager.prototype.contains=function(t){return!!t&&this._entities[t.id]===t},EntityManager.prototype.containsById=function(t){return!(!t||!this._entities[t.id])},EntityManager.prototype.detach=function(t){var e=this,r=f.get(t);return r.withLock(function(){return e.removeReference(t),Promise.resolve(t)})},EntityManager.prototype.resolveDepth=function(t,e){var r=this;if(!e||!e.depth)return Promise.resolve(t);e.resolved=e.resolved||[];var n=[],i=Object.assign({},e,{depth:e.depth===!0||e.depth-1});return this.getSubEntities(t,1).forEach(function(t){null==t||~e.resolved.indexOf(t)||(e.resolved.push(t),n.push(r.load(t.id,null,i)))}),Promise.all(n).then(function(){return t})},EntityManager.prototype.load=function(t,e,r){var i=this;r=r||{};var o=this.getReference(t,e),s=f.get(o);if(!r.refresh&&r.local&&s.isAvailable)return this.resolveDepth(o,r);var a=new n.GetObject(s.bucket,s.key);return this.ensureCacheHeader(o.id,a,r.refresh),this.send(a).then(function(n){return o.version>n.entity.version?(r.refresh=!0,i.load(t,e,r)):(i.addToWhiteList(n.entity.id),n.status!=d.NOT_MODIFIED&&s.setJson(n.entity,!0),i.resolveDepth(o,r))},function(t){if(t.status==d.OBJECT_NOT_FOUND)return i.removeReference(o),s.setRemoved(),null;throw t})},EntityManager.prototype.insert=function(t,e){var r=this;e=e||{};var o;return this._save(t,e,function(t,e){if(t.version)throw new i.PersistentError("Existing objects can't be inserted.");return o=!t.id,new n.CreateObject(t.bucket,e)}).then(function(e){return o&&r._attach(t),e})},EntityManager.prototype.update=function(t,e){return e=e||{},this._save(t,e,function(t,r){if(!t.version)throw new i.PersistentError("New objects can't be inserted.");return e.force?(delete r.version,new n.ReplaceObject(t.bucket,t.key,r).ifMatch("*")):new n.ReplaceObject(t.bucket,t.key,r).ifMatch(t.version)})},EntityManager.prototype.save=function(t,e,r){e=e||{};var o=function(t,r){if(e.force){if(!t.id)throw new i.PersistentError("New special objects can't be forcedly saved.");return delete r.version,new n.ReplaceObject(t.bucket,t.key,r)}return t.version?new n.ReplaceObject(t.bucket,t.key,r).ifMatch(t.version):new n.CreateObject(t.bucket,r)};return r?this._locklessSave(t,e,o):this._save(t,e,o)},EntityManager.prototype.optimisticSave=function(t,e){var r=this;return f.get(t).withLock(function(){return r._optimisticSave(t,e)})},EntityManager.prototype._optimisticSave=function(t,e){var r=this,n=!1,i=function(){n=!0},o=Promise.resolve(e(t,i));return n?Promise.resolve(t):o.then(function(){return r.save(t,{},!0).catch(function(n){if(412==n.status)return r.refresh(t,{}).then(function(){return r._optimisticSave(t,e)});throw n})})},EntityManager.prototype._locklessSave=function(t,e,r){var n=this;this.attach(t);var i,o,s=f.get(t);if(s.isAvailable&&(o=s.getJson(!1,!0)),s.isDirty){e.refresh||s.setPersistent();var a=this.send(r(s,o)).then(function(r){return e.refresh?s.setJson(r.entity,!0):s.setJsonMetadata(r.entity),t},function(e){if(e.status==d.OBJECT_NOT_FOUND)return n.removeReference(t),s.setRemoved(),null;throw s.setDirty(),e});i=[a]}else i=[Promise.resolve(t)];var u=Object.assign({},e);return u.depth=0,this.getSubEntities(t,e.depth).forEach(function(t){i.push(n._save(t,u,r))}),Promise.all(i).then(function(){return t})},EntityManager.prototype._save=function(t,e,r){var n=this;this.ensureBloomFilterFreshness();var i=f.get(t);return i.version&&this.addToBlackList(t.id),i.withLock(function(){return n._locklessSave(t,e,r)})},EntityManager.prototype.getSubEntities=function(t,e,r,n){var i=this;if(r=r||[],!e)return r;n=n||t;for(var o=f.get(t),s=o.type.references(),a=Array.isArray(s),u=0,s=a?s:s[Symbol.iterator]();;){var c;if(a){if(u>=s.length)break;c=s[u++]}else{if(u=s.next(),u.done)break;c=u.value}var l=c;this.getSubEntitiesByPath(t,l.path).forEach(function(t){~r.indexOf(t)||t==n||(r.push(t),r=i.getSubEntities(t,e===!0?e:e-1,r,n))})}return r},EntityManager.prototype.getSubEntitiesByPath=function(t,e){var r=this,n=[t];return e.forEach(function(t){var e=[];n.forEach(function(n){var i=n[t];if(i){var o=r.metamodel.managedType(n.constructor).getAttribute(t);if(o.isCollection)for(var s=i.entries(),a=Array.isArray(s),u=0,s=a?s:s[Symbol.iterator]();;){var c;if(a){if(u>=s.length)break;c=s[u++]}else{if(u=s.next(),u.done)break;c=u.value}var l=c;e.push(l[1]),o.keyType&&o.keyType.isEntity&&e.push(l[0])}else e.push(i)}}),n=e}),n},EntityManager.prototype.delete=function(t,e){var r=this;e=e||{},this.attach(t);var o=f.get(t);return o.withLock(function(){if(!o.version&&!e.force)throw new i.IllegalEntityError(t);var s=new n.DeleteObject(o.bucket,o.key);r.addToBlackList(t.id),e.force||s.ifMatch(o.version);var a=[r.send(s).then(function(){return r.removeReference(t),o.setRemoved(),t})],u=Object.assign({},e);return u.depth=0,r.getSubEntities(t,e.depth).forEach(function(t){a.push(r.delete(t,u))}),Promise.all(a).then(function(){return t})})},EntityManager.prototype.flush=function(t,e){},EntityManager.prototype.persist=function(t){this.attach(t)},EntityManager.prototype.refresh=function(t,e){return e=e||{},e.refresh=!0,this.load(t.id,null,e)},EntityManager.prototype.attach=function(t){if(!this.contains(t)){var e=this.metamodel.entity(t.constructor);if(!e)throw new i.IllegalEntityError(t);if(this.containsById(t))throw new i.EntityExistsError(t);this._attach(t)}},EntityManager.prototype._attach=function(t){var e=f.get(t);if(e.isAttached){if(e.db!=this)throw new i.EntityExistsError(t)}else e.db=this;e.id||"User"!=e.type.name&&"Role"!=e.type.name&&"logs.AppLog"!=e.type.name&&(e.id="/db/"+e.type.name+"/"+a.uuid()),e.id&&(this._entities[e.id]=t)},EntityManager.prototype.removeReference=function(t){var e=f.get(t);if(!e)throw new i.IllegalEntityError(t);delete this._entities[e.id]},EntityManager.prototype.register=function(t,e,r){var o=this,s=r>c.LoginOption.NO_LOGIN;if(this.me&&s)throw new i.PersistentError("User is already logged in.");return this.withLock(function(){var i=new n.Register({user:t,password:e,login:s});return o._userRequest(i,r)})},EntityManager.prototype.login=function(t,e,r){var o=this;if(this.me)throw new i.PersistentError("User is already logged in.");return this.withLock(function(){var i=new n.Login({username:t,password:e});return o._userRequest(i,r)})},EntityManager.prototype.logout=function(){var t=this;return this.withLock(function(){return t.send(new n.Logout).then(t._logout.bind(t))})},EntityManager.prototype.loginWithOAuth=function(t,e,r){if(this.me)throw new i.PersistentError("User is already logged in.");r=Object.assign({title:"Login with "+t,timeout:3e5,state:{},loginOption:!0},r),r.redirect&&Object.assign(r.state,{redirect:r.redirect,loginOption:r.loginOption});var n;if(!h[t+"OAuth"])throw new Error("OAuth provider "+t+" not supported.");if(n=new h[t+"OAuth"](e,r.scope,JSON.stringify(r.state)),n.addRedirectOrigin(this._connector.origin+this._connector.basePath),r.redirect){var o=document.URL.indexOf("http://")!=-1||document.URL.indexOf("https://")!=-1;return o?open(n.request.path,"_self"):open(n.request.path,"_system"),new Promise(function(t){})}var s=this._userRequest(n,r.loginOption);open(n.request.path,r.title,"width="+r.width+",height="+r.height);return new Promise(function(t,e){var n=setTimeout(function(){e(new i.PersistentError("OAuth login timeout."))},r.timeout);s.then(t,e).then(function(){clearTimeout(n)})})},EntityManager.prototype.renew=function(t){var e=this;return this.withLock(function(){var r=new n.Me;return e._userRequest(r,void 0===t||t)})},EntityManager.prototype.newPassword=function(t,e,r){var i=this;return this.withLock(function(){var o=new n.NewPassword({username:t,password:e,newPassword:r});return i.send(o).then(function(t){return i._updateUser(t.entity)})})},EntityManager.prototype._updateUser=function(t,e){var r=this.getReference(t.id),n=f.get(r);return n.setJson(t,!0),e&&(this.me=r),r},EntityManager.prototype._logout=function(){this.me=null,this.token=null},EntityManager.prototype._userRequest=function(t,e){var r=this,n=e>c.LoginOption.NO_LOGIN;return n&&(this.tokenStorage.temporary=e<c.LoginOption.PERSIST_LOGIN),this.send(t).then(function(t){if(t.entity)return r._updateUser(t.entity,n)},function(t){if(t.status==d.OBJECT_NOT_FOUND)return n&&r._logout(),null;throw t})},EntityManager.prototype.registerDevice=function(t,e,r){var i=new n.DeviceRegister({token:e,devicetype:t,device:r});return i.withCredentials=!0,this.send(i)},EntityManager.prototype.checkDeviceRegistration=function(){var t=this;return this.send(new n.DeviceRegistered).then(function(){return t.isDeviceRegistered=!0},function(e){if(e.status==d.OBJECT_NOT_FOUND)return t.isDeviceRegistered=!1;throw e})},EntityManager.prototype.pushDevice=function(t){return this.send(new n.DevicePush(t))},EntityManager.prototype.validate=function validate(t){for(var e,r=f.get(t).type,n=new a.ValidationResult,i=r.attributes();!(e=i.next()).done;){var validate=new a.Validator(e.value.name,t);n.fields[validate.key]=validate}var o=r.validationCode;return o&&o(n.fields),n},EntityManager.prototype.addToWhiteList=function(t){this.isCachingDisabled||(this.bloomFilter.contains(t)&&this.cacheWhiteList.add(t),this.cacheBlackList.delete(t))},EntityManager.prototype.addToBlackList=function(t){this.isCachingDisabled||(this.bloomFilter.contains(t)||this.cacheBlackList.add(t),this.cacheWhiteList.delete(t))},EntityManager.prototype.refreshBloomFilter=function(){var t=this;if(this.isCachingDisabled)return Promise.resolve();var e=new n.GetBloomFilter;return this.send(e).then(function(e){return t.updateBloomFilter(e.entity),t.bloomFilter})},EntityManager.prototype.updateBloomFilter=function(t){this.bloomFilter=new p(t),this.cacheWhiteList=new Set,this.cacheBlackList=new Set},EntityManager.prototype.ensureBloomFilterFreshness=function(){var t=this;if(!this.isCachingDisabled){var e=(new Date).getTime(),r=1e3*this.bloomFilterRefresh;this._bloomFilterLock.isReady&&e-this.bloomFilter.creation>r&&this._bloomFilterLock.withLock(function(){return t.refreshBloomFilter()})}},EntityManager.prototype.mustRevalidate=function(t){if(a.isNode)return!1;this.ensureBloomFilterFreshness();var e=this.isCachingDisabled||!this._bloomFilterLock.isReady;return e=e||!this.cacheWhiteList.has(t)&&(this.cacheBlackList.has(t)||this.bloomFilter.contains(t))},EntityManager.prototype.ensureCacheHeader=function(t,e,r){r=r||this.mustRevalidate(t),r&&e.noCache()},EntityManager.prototype.createURL=function(t,e){var r=this._connector.basePath+t,n=!1;return e&&this.me?(r=this.tokenStorage.signPath(r),n=!0):r=r.split("/").map(encodeURIComponent).join("/"),this.mustRevalidate(t)&&(r=r+(n?"&":"?")+"BCB"),this._connector.origin+r},EntityManager}(a.Lockable);y.prototype.List=Array,y.prototype.Set=Set,y.prototype.Map=Map,y.prototype.GeoPoint=t(5),e.exports=y},{19:19,20:20,21:21,25:25,34:34,36:36,4:4,5:5,59:59,63:63,70:70}],3:[function(t,e,r){"use strict";var n=t(36),i=t(52),s=t(70),a=(t(22),t(23)),u=t(2),c=function(t){function EntityManagerFactory(e){o.classCallCheck(this,EntityManagerFactory);var r=o.possibleConstructorReturn(this,t.call(this));e=Object(e)instanceof String?{host:e}:e||{},r._connector=null,r.metamodel=r.createMetamodel(),r.code=new s.Code(r.metamodel,r),r.tokenStorageFactory=s.TokenStorage.WEB_STORAGE||s.TokenStorage.GLOBAL,r.configure(e);var i=!0,a=new Promise(function(t){r._connected=t});return e.host?r.connect(e.host,e.port,e.secure,e.basePath):i=!1,r.tokenStorage||(i=!1,a=a.then(function(){return r.tokenStorageFactory.create(r._connector.origin)}).then(function(t){r.tokenStorage=t})),e.schema?(r._connectData=e,r.metamodel.init(e.schema)):(i=!1,a=a.then(function(){var t=new n.Connect;return t.withCredentials=!0,0===r.staleness&&t.noCache(),r.send(t)}).then(function(t){r._connectData=t.entity,void 0===r.staleness&&(r.staleness=r._connectData.bloomFilterRefresh||60),r.metamodel.isInitialized||r.metamodel.init(r._connectData.schema),r.tokenStorage.update(r._connectData.token)})),i||r.withLock(function(){return a},!0),r}return o.inherits(EntityManagerFactory,t),EntityManagerFactory.prototype._connected=function(){},EntityManagerFactory.prototype.configure=function(t){if(this._connector)throw new Error("The EntityManagerFactory can only be configured before is is connected.");t.tokenStorage&&(this.tokenStorage=t.tokenStorage),t.tokenStorageFactory&&(this.tokenStorageFactory=t.tokenStorageFactory),void 0!==t.staleness&&(this.staleness=t.staleness)},EntityManagerFactory.prototype.connect=function(t,e,r,n){if(this._connector)throw new Error("The EntityManagerFactory is already connected.");return Object(e)instanceof Boolean&&(r=e,e=0),this._connector=a.create(t,e,r,n),this._connected(),this.ready()},EntityManagerFactory.prototype.createMetamodel=function(){return new i.Metamodel(this)},EntityManagerFactory.prototype.createEntityManager=function(t){var e=this,r=new u(this);return this.isReady?r.connected(this._connector,this._connectData,t?this.tokenStorage:new s.TokenStorage(this._connector.origin)):r.withLock(function(){return e.ready().then(function(){r.connected(e._connector,e._connectData,t?e.tokenStorage:new s.TokenStorage(e._connector.origin))})},!0),r},EntityManagerFactory.prototype.send=function(t){return t.tokenStorage||(t.tokenStorage=this.tokenStorage),this._connector.send(t)},EntityManagerFactory}(s.Lockable);e.exports=c},{2:2,22:22,23:23,36:36,52:52,70:70}],4:[function(t,e,r){"use strict";var n=t(36),i=t(34),s=function(){function EntityTransaction(t){o.classCallCheck(this,EntityTransaction),this._connector=t.connector,this.entityManager=t,this.tid=null,this.rollbackOnly=!1,this.readSet=null,this.changeSet=null}return o.createClass(EntityTransaction,[{key:"isActive",get:function(){return Boolean(this.tid)}}]),EntityTransaction.prototype.begin=function(t,e){return this.yield().then(function(){var t=this.send(new n.PostTransaction).done(function(t){this.tid=t.tid,this.rollbackOnly=!1,this.readSet={},this.changeSet={}});return this.wait(t)}).then(t,e)},EntityTransaction.prototype.commit=function(t,e){return this.yield().then(function(){return this.getRollbackOnly()?this.rollback().then(function(){throw new i.RollbackError}):this.wait(this.entityManager.flush()).then(function(){var t=[];for(var e in this.readSet)t.push({oid:e,version:this.readSet[e]});var r=this.send(new n.PutTransactionCommitted(this.tid,t));return this.wait(r).then(function(t){this.tid=null,this.readSet=null,this.changeSet=null;var e=t.oids;for(var r in e){var n=e[r],i=this.entityManager.entities[r];if(i){var o=util.Metadata.get(i);"DELETED"==n||o.isDeleted?this.entityManager.removeReference(i):o.setJsonValue(o.type.version,n)}}})})}).then(t,e)},EntityTransaction.prototype.getRollbackOnly=function(){return this.rollbackOnly},EntityTransaction.prototype.rollback=function(t,e){return this.yield().then(function(){var t=this.send(new n.PutTransactionAborted(this.tid));this.wait(t).then(function(){return this.tid=null,this.readSet=null,this.changeSet=null,this.entityManager.clear()},function(){return this.entityManager.clear()})}).then(t,e)},EntityTransaction.prototype.setRollbackOnly=function(t,e){return this.yield().done(function(){this.rollbackOnly=!0})},EntityTransaction.prototype.isRead=function(t){return this.isActive&&t in this.readSet},EntityTransaction.prototype.setRead=function(t,e){this.isActive&&!this.isChanged(t)&&(this.readSet[t]=e)},EntityTransaction.prototype.isChanged=function(t){return this.isActive&&t in this.changeSet},EntityTransaction.prototype.setChanged=function(t){this.isActive&&(delete this.readSet[t],this.changeSet[t]=!0)},EntityTransaction}();e.exports=s},{34:34,36:36}],5:[function(t,e,r){"use strict";var n=function(){function GeoPoint(t,e){o.classCallCheck(this,GeoPoint);var r=void 0,n=void 0;if(Object(t)instanceof String){var i=t.indexOf(";");r=t.substring(0,i),n=t.substring(i+1)}else Object(t)instanceof Number?(r=t,n=e):Object(t)instanceof Array?(r=t[0],n=t[1]):t instanceof Object?(r=t.latitude,n=t.longitude):(r=0,n=0);if(this.longitude=n,this.latitude=r,this.latitude<-90||this.latitude>90)throw new Error("Latitude "+this.latitude+" is not in bound of -90 <= latitude <= 90");if(this.longitude<-180||this.longitude>180)throw new Error("Longitude "+this.longitude+" is not in bound of -180 <= longitude <= 180")}return GeoPoint.current=function(){return new Promise(function(t,e){navigator.geolocation.getCurrentPosition(function(e){t(new GeoPoint(e.coords.latitude,e.coords.longitude))},function(t){e(t)})})},GeoPoint.prototype.kilometersTo=function(t){return Number((GeoPoint.EARTH_RADIUS_IN_KILOMETERS*this.radiansTo(t)).toFixed(3))},GeoPoint.prototype.milesTo=function(t){return Number((GeoPoint.EARTH_RADIUS_IN_MILES*this.radiansTo(t)).toFixed(3))},GeoPoint.prototype.radiansTo=function(t){var e=this,r=t,n=e.latitude*GeoPoint.DEG_TO_RAD,i=r.latitude*GeoPoint.DEG_TO_RAD,o=(r.longitude-e.longitude)*GeoPoint.DEG_TO_RAD;return Math.acos(Math.sin(n)*Math.sin(i)+Math.cos(n)*Math.cos(i)*Math.cos(o))},GeoPoint.prototype.toString=function(){return this.latitude+";"+this.longitude},GeoPoint.prototype.toJSON=function(){return{latitude:this.latitude,longitude:this.longitude}},GeoPoint}();n.DEG_TO_RAD=Math.PI/180,n.EARTH_RADIUS_IN_KILOMETERS=6371,n.EARTH_RADIUS_IN_MILES=3956,e.exports=n},{}],6:[function(t,e,r){"use strict";var n=t(3),i=t(2);i.prototype.binding=t(20),i.prototype.connector=t(28),i.prototype.error=t(34),i.prototype.message=t(36),i.prototype.metamodel=t(52),i.prototype.util=t(70),i.prototype.caching=t(22),i.prototype.query=t(59),i.prototype.EntityManager=t(2),i.prototype.EntityManagerFactory=t(3),i.prototype.EntityTransaction=t(4),i.prototype.Acl=t(1);var o=new n,s=o.createEntityManager(!0);s.configure=function(t){return o.configure(t),this},s.connect=function(t,e,r,n){return e instanceof Function&&(n=r,r=e,e=void 0),o.connect(t,e),this.ready(r,n)},r=e.exports=s,r.db=s,r.default=s},{1:1,2:2,20:20,22:22,28:28,3:3,34:34,36:36,4:4,52:52,59:59,70:70}],7:[function(t,e,r){"use strict";var n=function(){function Accessor(){o.classCallCheck(this,Accessor)}return Accessor.prototype.getValue=function(t,e){return t[e.name]},Accessor.prototype.setValue=function(t,e,r){t[e.name]=r},Accessor}();e.exports=n},{}],8:[function(t,e,r){"use strict";var n=t(11),i=n.extend({get isRegistered(){return this._db.isDeviceRegistered},register:function(t,e,r,n,i){return r instanceof Function&&(i=n,n=r,r=null),this._db.registerDevice(t,e,r).then(n,i)},push:function(t,e,r){return this._db.pushDevice(t).then(e,r)}});i.PushMessage=t(66),e.exports=i},{11:11,66:66}],9:[function(t,e,r){"use strict";var n=(t(63),t(61),function(){function Enhancer(){o.classCallCheck(this,Enhancer)}return Enhancer.prototype.createProxy=function(t){return function(t){function Proxy(){return o.classCallCheck(this,Proxy),o.possibleConstructorReturn(this,t.apply(this,arguments))}return o.inherits(Proxy,t),Proxy}(t)},Enhancer.prototype.getIdentifier=function(t){return t.__d__},Enhancer.prototype.setIdentifier=function(t,e){Object.defineProperty(t,"__d__",{value:e})},Enhancer.prototype.enhance=function(t,e){if(e.__ype__!=t){if(e.hasOwnProperty("__ype__"))throw new Error("Type is already used by a different manager");Object.defineProperty(e,"__ype__",{value:t}),this.setIdentifier(e,t.ref),this.enhancePrototype(e.prototype,t)}},Enhancer.prototype.enhancePrototype=function(t,e){if(t.toString===Object.prototype.toString&&Object.defineProperty(t,"toString",{value:function(){return this._metadata.id||this._metadata.bucket},enumerable:!1}),e.superType&&"Object"==e.superType.name)for(var r=e.superType.declaredAttributes,n=Array.isArray(r),i=0,r=n?r:r[Symbol.iterator]();;){var o;if(n){if(i>=r.length)break;o=r[i++]}else{if(i=r.next(),i.done)break;o=i.value}var s=o;s.isMetadata||this.enhanceProperty(t,s)}for(var a=e.declaredAttributes,u=Array.isArray(a),c=0,a=u?a:a[Symbol.iterator]();;){var l;if(u){if(c>=a.length)break;l=a[c++]}else{if(c=a.next(),c.done)break;l=c.value}var f=l;this.enhanceProperty(t,f)}},Enhancer.prototype.enhanceProperty=function(t,e){var r="$"+e.name;Object.defineProperty(t,e.name,{get:function(){var t=this._metadata;return t.readAccess(),t[r]},set:function(t){var e=this._metadata;e.writeAccess(),e[r]=t},configurable:!0,enumerable:!0})},Enhancer}());e.exports=n},{61:61,63:63}],10:[function(t,e,r){"use strict";var n=t(15),i=function(t){function Entity(e){return o.classCallCheck(this,Entity),o.possibleConstructorReturn(this,t.call(this,e))}return o.inherits(Entity,t),Entity}(n);Object.defineProperties(i.prototype,{id:{get:function(){return this._metadata.id},set:function(t){if(this._metadata.id)throw new Error("The id can't be set twice: "+t);t+="",0==t.indexOf("/db/"+this._metadata.bucket+"/")?this._metadata.id=t:this.key=t},enumerable:!0},key:{get:function(){return this._metadata.key},set:function(t){this._metadata.key=t}},version:{get:function(){return this._metadata.version},enumerable:!0},acl:{get:function(){return this._metadata.acl},enumerable:!0},ready:{value:function(t){return this._metadata.ready(t)}},attach:{value:function(t){t.attach(this)}},save:{value:function(t,e,r){return t instanceof Function&&(r=e,e=t,t={}),this._metadata.db.save(this,t).then(e,r)}},insert:{value:function(t,e,r){return t instanceof Function&&(r=e,e=t,t={}),this._metadata.db.insert(this,t).then(e,r)}},update:{value:function(t,e,r){return t instanceof Function&&(r=e,e=t,t={}),this._metadata.db.update(this,t).then(e,r)}},load:{value:function(t,e,r){return t instanceof Function&&(r=e,e=t,t={}),t=t||{},t.local=!0,this._metadata.db.load(this.id,null,t).then(e,r)}},delete:{value:function(t,e,r){return t instanceof Function&&(r=e,e=t,t={}),this._metadata.db.delete(this,t).then(e,r)}},optimisticSave:{value:function(t,e,r){return this._metadata.db.optimisticSave(this,t).then(e,r)}},attr:{value:function(){throw new Error("Attr is not yet implemented.")}},validate:{value:function(){return this._metadata.db.validate(this)}},toJSON:{value:function(t){return this._metadata.getJson(t)}}}),e.exports=i},{15:15}],11:[function(t,e,r){"use strict";var n=t(16),i=n.extend({load:function(t,e,r,n){return e instanceof Function&&(n=r,r=e,e={}),this._db.load(this._managedType.typeConstructor,t,e).then(r,n)},fromJSON:function(t){var e=t.id?this._db.getReference(this._managedType.typeConstructor,t.id):this.newInstance(),r=e._metadata;return r.setJson(t),e},find:function(){return this._db.createQueryBuilder(this._managedType.typeConstructor)},partialUpdate:function(){throw new Error("partialUpdate is not yet implemented.")}});e.exports=i},{16:16}],12:[function(t,e,r){"use strict";function _extend(t){for(var e,r=1;e=arguments[r];++r)for(var n=Object.getOwnPropertyNames(e),i=Array.isArray(n),o=0,n=i?n:n[Symbol.iterator]();;){var s;if(i){if(o>=n.length)break;s=n[o++]}else{if(o=n.next(),o.done)break;s=o.value}var a=s;Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(e,a))}return t}var n=_extend({extend:function(t){return _extend({},this,t)},create:function(t){var e=function(t){return e.newInstance(arguments)};return _extend(e,this),e.prototype=t.prototype,e._type=t,e},new:function(){return this.newInstance(arguments)},newInstance:function(t){var e;return e=t&&0!=t.length?new this._type(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9]):new this._type}});e.exports=n},{}],13:[function(t,e,r){"use strict";var n=t(34),i=t(1),s=t(71),a=t(36),u=t(25).StatusCode,c="/file",l=c.length,f=function(){function File(t){if(o.classCallCheck(this,File),t=t||{},this._available=!1,Object(t)instanceof String){var e=t,r=e.indexOf("/","/file/".length);if(r==-1||0!=e.indexOf("/file/"))throw new Error("Invalid file reference "+e);this._id=e}else if(t.id)this._id=t.id,this._setMetadata(t);else{var n=void 0;if(t.path)n=t.path;else{var i=t.parent||"/www";if("/"!=i.charAt(i.length-1)&&(i+="/"),i.length<3)throw new Error("Invalid parent name: "+i);var a=t.name||t.data&&t.data.name||s.uuid();n=i+a}if("/"!=n.charAt(0)&&(n="/"+n),n.indexOf("//")!=-1||n.length<3)throw new Error("Invalid path: "+n);this._id=c+n,this._setMetadata(t)}this.isFolder="/"==this._id.charAt(this._id.length-1)}return o.createClass(File,[{key:"id",get:function(){return this._id}},{key:"url",get:function(){if(this.isFolder)throw new Error("Url can not be created for folders.");return this._url||(this._url=this._db.createURL(this.id,"www"!=this.bucket)),this._url}},{key:"name",get:function(){return this._name||(this._name=this._id.substring(this._id.lastIndexOf("/",this._id.length-2)+1)),this._name}},{key:"mimeType",get:function(){if(this.isFolder)throw new Error("A folder has no mimeType");return this._checkAvailable(),this._mimeType}},{key:"acl",get:function(){return this._checkAvailable(),this._acl}},{key:"lastModified",get:function(){if(this.isFolder)throw new Error("A folder has no lastModified");return this._checkAvailable(),this._lastModified}},{key:"createdAt",get:function(){if(this.isFolder)throw new Error("A folder has no creation date");return this._checkAvailable(),this._createdAt}},{key:"eTag",get:function(){if(this.isFolder)throw new Error("A folder has no eTag");return this._checkAvailable(),this._eTag}},{key:"size",get:function(){if(this.isFolder)throw new Error("A folder has no size");return this._checkAvailable(),this._size}},{key:"bucket",get:function(){return this.id.substring(l+1,this.id.indexOf("/",l+1))}},{key:"key",get:function(){return this.id.substring(this.id.indexOf("/",l+1)+1)}},{key:"path",get:function(){return this.id.substring(l)}},{key:"parent",get:function(){return this.id.substring(l,this.id.lastIndexOf("/",this.id.length-2))}},{key:"isMetadataLoaded",get:function(){return this._available}}]),File.prototype.upload=function(t,e,r){var n=this;if(t=t||{},this.isFolder)throw new Error("A folder cannot be uploaded");this._setMetadata(t);var i=new a.UploadFile(this.bucket,this.key).entity(this._data,this._type).acl(this._acl);return i.progress(t.progress),this._size&&i.contentLength(this._size),
this._mimeType&&i.mimeType(this._mimeType),this._conditional(i,t),this._db.addToBlackList(this.id),this._db.send(i).then(function(t){return n._data=null,n._type=null,n.fromJSON(t.entity),n}).then(e,r)},File.prototype.download=function(t,e,r){var n=this;if(t=t||{},this.isFolder)throw new Error("A folder cannot be downloaded");var i=t.type||"blob",o=new a.DownloadFile(this.bucket,this.key).responseType(i);return this._db.ensureCacheHeader(this.id,o,t.refresh),this._db.send(o).then(function(t){return n._db.addToWhiteList(n.id),n._fromHeaders(t.headers),t.entity},function(t){if(t.status==u.OBJECT_NOT_FOUND)return null;throw t}).then(e,r)},File.prototype.delete=function(t,e,r){if(t=t||{},this.isFolder)throw new Error("A folder cannot be deleted");var n=new a.DeleteFile(this.bucket,this.key);return this._conditional(n,t),this._db.addToBlackList(this.id),this._db.send(n).then(function(){return this}).then(e,r)},File.prototype._conditional=function(t,e){e.force||(this._lastModified&&t.ifUnmodifiedSince(this._lastModified),this._eTag&&t.ifMatch(this._eTag),this._lastModified||this._eTag||t.ifNoneMatch("*"))},File.prototype.loadMetadata=function(t,e,r){var n=this;if(t=t||{},this.isFolder)throw new Error("A folder has no matadata");var i=new a.GetFileMetadata(this.bucket,this.key);return this._db.ensureCacheHeader(this.id,i,t.refresh),this._db.send(i).then(function(t){return n._fromHeaders(t.headers),n},function(t){if(t.status==u.OBJECT_NOT_FOUND)return null;throw t}).then(e,r)},File.prototype.saveMetadata=function(t,e,r){var n=this;t=t||{};var i=this.toJSON();i.id=this._id;var o=new a.UpdateFileMetadata(this.bucket,this.key).entity(i);return this._conditional(o,t),this._db.send(o).then(function(t){return n.fromJSON(t.entity),n}).then(e,r)},File.prototype._setMetadata=function(t){var e=t.data,r=t.type,n=t.eTag,o=t.acl,s=t.size,a=t.mimeType,u=t.lastModified;if(e){if("undefined"!=typeof Blob&&e instanceof Blob)a=a||e.type;else if("data-url"==r){var c=e.match(/^data:(.+?)(;base64)?,.*$/);a=a||c[1]}this._data=e,this._type=r,this._size=s,this._mimeType=a,this._acl=o||this._acl||new i,this._available=!0}else this._available=!1;this._eTag=n||this._eTag,u&&(this._lastModified=new Date(u))},File.prototype._fromHeaders=function(t){this.fromJSON({eTag:t.etag?t.etag.substring(1,t.etag.length-1):null,lastModified:t["last-modified"],createdAt:t["baqend-created-at"],mimeType:t["content-type"],acl:t["baqend-acl"]&&JSON.parse(t["baqend-acl"]),contentLength:+t["baqend-size"]})},File.prototype.fromJSON=function(t){t.mimeType&&(this._mimeType=t.mimeType),t.lastModified&&(this._lastModified=new Date(t.lastModified)),t.createdAt&&(this._createdAt=new Date(t.createdAt)),t.eTag&&(this._eTag=t.eTag),this._acl=this._acl||new i,t.acl&&this._acl.fromJSON(t.acl),t.contentLength&&(this._size=t.contentLength),this._available=!0},File.prototype.toJSON=function(){var t={mimeType:this._mimeType,eTag:this._eTag,acl:this._acl,contentLength:this._size};return this._lastModified&&(t.lastModified=this._lastModified.toISOString()),this._createdAt&&(t.createdAt=this._createdAt.toISOString()),t},File.prototype._checkAvailable=function(){if(!this._available)throw new n.PersistentError("The file metadata of "+this.id+" is not available.")},File}();e.exports=f},{1:1,25:25,34:34,36:36,71:71}],14:[function(t,e,r){"use strict";var n=t(12),i=t(13),o=t(36),s=t(65),a=n.extend({create:function(t){var e=n.create.call(this,i);return e._db=t,e},newInstance:function(t){var e=n.newInstance.call(this,t);return e._db=this._db,e},saveMetadata:function(t,e,r,n){var i=new o.SetFileBucketMetadata(t,e);return this._db.send(i).then(r,n)},loadMetadata:function(t,e,r,n){e=e||{};var i=new o.GetFileBucketMetadata(t);return this._db.send(i).then(function(t){var e={};return s.BASE_PERMISSIONS.forEach(function(r){e[r]=s.fromJSON(t.entity[r]||{})}),e},function(t){if(t.status==StatusCode.OBJECT_NOT_FOUND)return null;throw t}).then(r,n)},listBuckets:function(t,e){var r=this;return this._db.send(new o.ListBuckets).then(function(t){return t.entity.map(function(t){return r.new(t+"/")})}).then(t,e)},listFiles:function(t,e,r,n,i){var s=this;Object(t)instanceof String&&("/"!=t.charAt(t.length-1)&&(t+="/"),t=this.new({path:t}));var a=t.key,u=t.bucket;return e=e?e.key:null,this._db.send(new o.ListFiles(u,a,e,r)).then(function(t){return t.entity.map(function(t){return s.new(t)})}).then(n,i)}});e.exports=a},{12:12,13:13,36:36,65:65}],15:[function(t,e,r){"use strict";var n=t(63),i=function(){function Managed(t){o.classCallCheck(this,Managed),Managed.init(this,t)}return Managed.init=function(t,e){var r=t.constructor.__ype__;r&&Object.defineProperty(t,"_metadata",{value:n.create(r,t),configurable:!0}),e&&Object.assign(t,e)},Managed.extend=function(t){return t.prototype=Object.create(this.prototype,{constructor:{value:t,configurable:!0,writable:!0}}),t.extend=Managed.extend,t},Managed}();Object.defineProperties(i.prototype,{toJSON:{value:function(){return this._metadata.type.toJsonValue(this._metadata,this)}}}),e.exports=i},{63:63}],16:[function(t,e,r){"use strict";var n=t(12),i=(t(15),n.extend({create:function(t,e){var r=n.create.call(this,t.typeConstructor);return r.methods=r.prototype,r._managedType=t,r._db=e,r},newInstance:function(t){var e=t?n.newInstance.call(this,t):this._managedType.create(t);return e._metadata.db=this._db,e},fromJSON:function(t){var e=this.newInstance(),r=e._metadata;return this._managedType.fromJsonValue(r,t,e),e},addMethods:function(t){Object.assign(this.methods,t)},addMethod:function(t,e){this.methods[t]=e}}));e.exports=i},{12:12,15:15}],17:[function(t,e,r){"use strict";var n=t(10),i=t(18),s=function(t){function Role(e){return o.classCallCheck(this,Role),o.possibleConstructorReturn(this,t.call(this,e))}return o.inherits(Role,t),Role}(n);Object.defineProperties(s.prototype,{hasUser:{value:function(t){return this.users&&this.users.has(t)}},addUser:{value:function(t){if(!(t instanceof i))throw new Error("Only user instances can be added to a role.");this.users||(this.users=new Set),this.users.add(t)}},removeUser:{value:function(t){if(!(t instanceof i))throw new Error("Only user instances can be removed from a role.");this.users&&this.users.delete(t)}}}),e.exports=s},{10:10,18:18}],18:[function(t,e,r){"use strict";var n=t(10),i=function(t){function User(e){return o.classCallCheck(this,User),o.possibleConstructorReturn(this,t.call(this,e))}return o.inherits(User,t),User}(n);Object.defineProperties(i.prototype,{newPassword:{value:function(t,e,r,n){return this._metadata.db.newPassword(this.username,t,e).then(r,n)}}}),e.exports=i},{10:10}],19:[function(t,e,r){"use strict";var n=t(11),i=n.extend({get me(){return this._db.me},register:function(t,e,r,n,i){return r instanceof Function&&(i=n,n=r,r=!0),t=Object(t)instanceof String?this.fromJSON({username:t}):t,this._db.register(t,e,void 0===r||r).then(n,i)},login:function(t,e,r,n,i){return r instanceof Function&&(i=n,n=r,r=!0),this._db.login(t,e,void 0===r||r).then(n,i)},loginWithToken:function(t,e,r,n){return e instanceof Function&&(n=r,r=e,e=!0),this._db.token=t,this._db.renew(e).then(r,n)},logout:function(t,e){return this._db.logout().then(t,e)},newPassword:function(t,e,r,n,i){return this._db.newPassword(t,e,r).then(n,i)}});i.LoginOption={NO_LOGIN:-1,SESSION_LOGIN:0,PERSIST_LOGIN:1},i.DefaultOptions={google:{width:585,height:545,scope:"email"},facebook:{width:1140,height:640,scope:"email"},github:{width:1040,height:580,scope:"user:email"},twitter:{width:740,height:730},linkedin:{width:630,height:530,scope:""}},["Google","Facebook","GitHub","Twitter","LinkedIn"].forEach(function(t){i["loginWith"+t]=function(e,r,n,o){return r instanceof Function&&(o=n,n=r,r={}),r=Object.assign({},i.DefaultOptions[t.toLowerCase()],r||{}),this._db.loginWithOAuth(t,e,r).then(n,o)}}),e.exports=i},{11:11}],20:[function(t,e,r){"use strict";r.Accessor=t(7),r.Enhancer=t(9),r.Factory=t(12),r.ManagedFactory=t(16),r.EntityFactory=t(11),r.UserFactory=t(19),r.DeviceFactory=t(8),r.FileFactory=t(14),r.Managed=t(15),r.Entity=t(10),r.Role=t(17),r.User=t(18),r.File=t(13)},{10:10,11:11,12:12,13:13,14:14,15:15,16:16,17:17,18:18,19:19,7:7,8:8,9:9}],21:[function(t,e,r){"use strict";var n=t(70).atob,i=function(){function BloomFilter(t){o.classCallCheck(this,BloomFilter),this.bytes=n(t.b),this.bits=t.m,this.hashes=t.h,this.creation=(new Date).getTime()}return BloomFilter.prototype.contains=function(t){for(var e=BloomFilter._getHashes(t,this.bits,this.hashes),r=Array.isArray(e),n=0,e=r?e:e[Symbol.iterator]();;){var i;if(r){if(n>=e.length)break;i=e[n++]}else{if(n=e.next(),n.done)break;i=n.value}var o=i;if(!this._isSet(o))return!1}return!0},BloomFilter.prototype._isSet=function(t){var e=Math.floor(t/8),r=1<<t%8,n=this.bytes.charCodeAt(e);return 0!=(n&r)},BloomFilter._getHashes=function(t,e,r){for(var n=new Array(this.hashes),i=BloomFilter._murmur3(0,t),o=BloomFilter._murmur3(i,t),s=0;s<r;s++)n[s]=(i+s*o)%e;return n},BloomFilter._murmur3=function(t,e){var r,n,i,o,s,a,u,c;for(r=3&e.length,n=e.length-r,i=t,s=3432918353,a=461845907,c=0;c<n;)u=255&e.charCodeAt(c)|(255&e.charCodeAt(++c))<<8|(255&e.charCodeAt(++c))<<16|(255&e.charCodeAt(++c))<<24,++c,u=(65535&u)*s+(((u>>>16)*s&65535)<<16)&4294967295,u=u<<15|u>>>17,u=(65535&u)*a+(((u>>>16)*a&65535)<<16)&4294967295,i^=u,i=i<<13|i>>>19,o=5*(65535&i)+((5*(i>>>16)&65535)<<16)&4294967295,i=(65535&o)+27492+(((o>>>16)+58964&65535)<<16);switch(u=0,r){case 3:u^=(255&e.charCodeAt(c+2))<<16;case 2:u^=(255&e.charCodeAt(c+1))<<8;case 1:u^=255&e.charCodeAt(c),u=(65535&u)*s+(((u>>>16)*s&65535)<<16)&4294967295,u=u<<15|u>>>17,u=(65535&u)*a+(((u>>>16)*a&65535)<<16)&4294967295,i^=u}return i^=e.length,i^=i>>>16,i=2246822507*(65535&i)+((2246822507*(i>>>16)&65535)<<16)&4294967295,i^=i>>>13,i=3266489909*(65535&i)+((3266489909*(i>>>16)&65535)<<16)&4294967295,i^=i>>>16,i>>>0},BloomFilter}();e.exports=i},{70:70}],22:[function(t,e,r){"use strict";r.BloomFilter=t(21)},{21:21}],23:[function(t,e,r){"use strict";var n=t(32),i=(t(36),function(){function Connector(t,e,r,n){o.classCallCheck(this,Connector),this.host=t,this.port=e,this.secure=r,this.basePath=n,this.origin=Connector.toUri(t,e,r,"")}return Connector.create=function(t,e,r,n){if("undefined"!=typeof window&&(t||(t=window.location.hostname,e=Number(window.location.port)),void 0===r&&(r="https:"==window.location.protocol)),r=!!r,void 0===n&&(n=Connector.DEFAULT_BASE_PATH),t.indexOf("/")!=-1){var i=/^(https?):\/\/([^\/:]+|\[[^\]]+])(:(\d*))?(\/\w+)?\/?$/.exec(t);if(!i)throw new Error("The connection uri host "+t+" seems not to be valid");r="https"==i[1],t=i[2].replace(/(\[|])/g,""),e=i[4],n=i[5]||""}else"localhost"!=t&&/^[a-z0-9-]*$/.test(t)&&(t+=r?Connector.SSL_DOMAIN:Connector.HTTP_DOMAIN);e||(e=r?443:80);var o=Connector.toUri(t,e,r,n),s=this.connections[o];if(!s){for(var a in this.connectors){var u=this.connectors[a];if(u.isUsable&&u.isUsable(t,e,r,n)){s=new u(t,e,r,n);break}}if(!s)throw new Error("No connector is usable for the requested connection.");this.connections[o]=s}return s},Connector.toUri=function(t,e,r,n){var i=(r?"https://":"http://")+(t.indexOf(":")!=-1?"["+t+"]":t);return i+=r&&443!=e||!r&&80!=e?":"+e:"",i+=n},Connector.prototype.send=function(t){var e=this,r={status:0};return new Promise(function(r){e.prepareRequest(t),e.doSend(t,t.request,r)}).then(function(t){return r=t}).then(function(){return e.prepareResponse(t,r)}).then(function(){return t.doReceive(r),r}).catch(function(t){throw r.entity=null,n.of(t)})},Connector.prototype.doSend=function(t,e,r){},Connector.prototype.prepareRequest=function(t){var e=t.mimeType();if(!e){var r=t.request.type;"json"==r?t.mimeType("application/json;charset=utf-8"):"text"==r&&t.mimeType("text/plain;charset=utf-8")}this.toFormat(t);var n=void 0;switch(t.responseType()){case"json":n="application/json";break;case"text":n="text/*";break;default:n="application/json,text/*;q=0.5,*/*;q=0.1"}if(t.accept()||t.accept(n),this.gzip){var i=t.ifNoneMatch();i&&'""'!==i&&"*"!=i&&t.ifNoneMatch(i.slice(0,-1)+'--gzip"')}if("/connect"==t.request.path)t.request.path=t.tokenStorage.signPath(this.basePath+t.request.path).substring(this.basePath.length),t.cacheControl()&&(t.request.path+=(t.tokenStorage.token?"&":"?")+"BCB");else if(t.tokenStorage){var o=t.tokenStorage.token;o&&t.header("authorization","BAT "+o)}},Connector.prototype.toFormat=function(t){},Connector.prototype.prepareResponse=function(t,e){var r=this;e.status=1223==e.status?204:e.status;var n=void 0,i=e.headers||{},o=e.entity;if(o&&(n=t.responseType(),!n||e.status>=400)){var s=i["content-type"]||i["Content-Type"];s&&s.indexOf("application/json")>-1&&(n="json")}if(i.etag&&(i.etag=i.etag.replace("--gzip","")),t.tokenStorage){var a=i["baqend-authorization-token"]||i["Baqend-Authorization-Token"];a&&t.tokenStorage.update(a)}return new Promise(function(t){t(o&&r.fromFormat(e,o,n))}).then(function(n){e.entity=n,t.request.path.indexOf("/connect")!=-1&&n&&(r.gzip=!!n.gzip)},function(t){throw new Error("Response was not valid "+n+": "+t.message)})},Connector.prototype.fromFormat=function(t,e,r){},Connector}());Object.assign(i,{DEFAULT_BASE_PATH:"/v1",HTTP_DOMAIN:".app.baqend.com",SSL_DOMAIN:"-bq.global.ssl.fastly.net",RESPONSE_HEADERS:["baqend-authorization-token","content-type","baqend-size","baqend-acl","etag","last-modified","baqend-created-at"],connectors:[],connections:{},gzip:!1}),e.exports=i},{32:32,36:36}],24:[function(t,e,r){"use strict";var n=t(23),i=t(27),s=function(t){function IFrameConnector(e,r,n,i){o.classCallCheck(this,IFrameConnector);var s=o.possibleConstructorReturn(this,t.call(this,e,r,n,i));return s.mid=0,s.messages={},s.doReceive=s.doReceive.bind(s),addEventListener("message",s.doReceive,!1),s}return o.inherits(IFrameConnector,t),IFrameConnector.isUsable=function(t,e,r){return"undefined"!=typeof window},IFrameConnector.prototype.load=function(t){this.iframe=document.createElement("iframe"),this.iframe.src=this.origin+this.basePath+t,this.iframe.setAttribute("style",IFrameConnector.style),document.body.appendChild(this.iframe),this.queue=[],this.iframe.addEventListener("load",this.onLoad.bind(this),!1)},IFrameConnector.prototype.onLoad=function(){for(var t=this.queue,e=0;e<t.length;++e)this.postMessage(t[e]);this.queue=null},IFrameConnector.prototype.doSend=function(e,r,i){var o=this;if(e.isBinary)return t.prototype.doSend.call(this,e,r,i);this.iframe||this.load(e.request.path);var s={mid:++this.mid,method:r.method,path:r.path,headers:r.headers,entity:r.entity,responseHeaders:n.RESPONSE_HEADERS};this.messages[s.mid]=i;var a=JSON.stringify(s);this.queue?this.queue.push(a):this.postMessage(a),this.connected||setTimeout(function(){o.messages[s.mid]&&(delete o.messages[s.mid],i({status:0,error:new Error("Connection refused.")}))},1e4)},IFrameConnector.prototype.postMessage=function(t){this.iframe.contentWindow.postMessage(t,this.origin)},IFrameConnector.prototype.doReceive=function(t){if(t.origin===this.origin&&"{"==t.data[0]){var e=JSON.parse(t.data),r=this.messages[e.mid];r&&(delete this.messages[e.mid],this.connected=!0,r({status:e.status,headers:e.headers,entity:e.entity}))}},IFrameConnector}(i);s.style="width:1px;height:1px;position:absolute;top:-10px;left:-10px;",n.connectors.push(s),e.exports=s},{23:23,27:27}],25:[function(t,r,n){"use strict";var i=t(29),s="undefined"!=typeof window&&(!!window.chrome&&/google/i.test(navigator.vendor)||/cros i686/i.test(window.navigator.platform)),a=function(){function Message(){o.classCallCheck(this,Message),this.withCredentials=!1,this.tokenStorage=null,this._progress=null;var t=arguments,e=0,r=this.spec.path;if(Object(r)instanceof Array){r=this.spec.path[0];for(var n=this.spec.path.length,i=1;i<n;++i)this.spec.dynamic&&n-1==i?(r+=t[e].split("/").map(encodeURIComponent).join("/"),e+=1):r+=encodeURIComponent(t[e++])+this.spec.path[i]}for(var s="",a=0;a<this.spec.query.length;++a){var u=t[e++];void 0!==u&&null!==u&&(s+=s||~r.indexOf("?")?"&":"?",s+=this.spec.query[a]+"="+encodeURIComponent(u))}this.request={method:this.spec.method,path:r+s,entity:null,headers:{}},t[e]&&this.entity(t[e],"json"),this.responseType("json")}return Message.create=function(t){var e=t.path.split("?"),r=e[0].split(/[:\*]\w*/),n=[];return e[1]&&e[1].split("&").forEach(function(t){var e=t.split("=");n.push(e[0])}),t.dynamic=t.path.indexOf("*")!=-1,t.path=r,t.query=n,function(e){function _class(){return o.classCallCheck(this,_class),o.possibleConstructorReturn(this,e.apply(this,arguments))}return o.inherits(_class,e),o.createClass(_class,[{key:"spec",get:function(){return t}}]),_class}(Message)},Message.createExternal=function(t,e){t.path=[t.path];var r=function(e){function cls(){return o.classCallCheck(this,cls),o.possibleConstructorReturn(this,e.apply(this,arguments))}return o.inherits(cls,e),o.createClass(cls,[{key:"spec",get:function(){return t}}]),cls}(Message);return Object.assign(r.prototype,e),r},o.createClass(Message,[{key:"isBinary",get:function(){return this.request.type in Message.BINARY||this._responseType in Message.BINARY}}]),Message.prototype.header=function(t,e){return void 0!==e?(this.request.headers[t]=e,this):this.request.headers[t]},Message.prototype.entity=function(t,r){return r||(r="string"==typeof t?/^data:(.+?)(;base64)?,.*$/.test(t)?"data-url":"text":"undefined"!=typeof Blob&&t instanceof Blob?"blob":"undefined"!=typeof e&&t instanceof e?"buffer":"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?"arraybuffer":"undefined"!=typeof FormData&&t instanceof FormData?"form":"json"),this.request.type=r,this.request.entity=t,this},Message.prototype.mimeType=function(t){return this.header("content-type",t)},Message.prototype.contentLength=function(t){return this.header("content-length",t)},Message.prototype.ifMatch=function(t){return this.header("If-Match",this._formatETag(t))},Message.prototype.ifNoneMatch=function(t){return this.header("If-None-Match",this._formatETag(t))},Message.prototype.ifUnmodifiedSince=function(t){return this.header("if-unmodified-since",t&&t.toUTCString().replace("UTC","GMT"))},Message.prototype.noCache=function(){return s||this.ifMatch("").ifNoneMatch("-"),this.cacheControl("max-age=0, no-cache")},Message.prototype.cacheControl=function(t){return this.header("cache-control",t)},Message.prototype.acl=function(t){return this.header("baqend-acl",t&&JSON.stringify(t))},Message.prototype.accept=function(t){return this.header("accept",t)},Message.prototype.responseType=function(t){return void 0!==t?(this._responseType=t,this):this._responseType},Message.prototype.progress=function(t){return void 0!==t?(this._progress=t,this):this._progress},Message.prototype.addQueryString=function(t){var e=this;if(Object(t)instanceof String)this.request.path+=t;else if(t){var r=~this.request.path.indexOf("?")?"&":"?";Object.keys(t).forEach(function(n,i){e.request.path+=r+n+"="+encodeURIComponent(t[n]),0==i&&(r="&")})}return this},Message.prototype._formatETag=function(t){return t&&"*"!=t&&(t=""+t,t.indexOf('"')==-1&&(t='"'+t+'"')),t},Message.prototype.doReceive=function(t){if(this.spec.status.indexOf(t.status)==-1)throw new i(this,t)},Message}();Object.assign(a,{StatusCode:{NOT_MODIFIED:304,BAD_CREDENTIALS:460,BUCKET_NOT_FOUND:461,INVALID_PERMISSION_MODIFICATION:462,INVALID_TYPE_VALUE:463,OBJECT_NOT_FOUND:404,OBJECT_OUT_OF_DATE:412,PERMISSION_DENIED:466,QUERY_DISPOSED:467,QUERY_NOT_SUPPORTED:468,SCHEMA_NOT_COMPATIBLE:469,SCHEMA_STILL_EXISTS:470,SYNTAX_ERROR:471,TRANSACTION_INACTIVE:472,TYPE_ALREADY_EXISTS:473,TYPE_STILL_REFERENCED:474,SCRIPT_ABORTION:475},BINARY:{blob:!0,buffer:!0,stream:!0,arraybuffer:!0,"data-url":!0,base64:!0},GoogleOAuth:a.createExternal({method:"OAUTH",path:"https://accounts.google.com/o/oauth2/auth?response_type=code&access_type=online",query:["client_id","scope","state"],status:[200]},{addRedirectOrigin:function(t){this.addQueryString({redirect_uri:t+"/db/User/OAuth/google"})}}),FacebookOAuth:a.createExternal({method:"OAUTH",path:"https://www.facebook.com/dialog/oauth?response_type=code",query:["client_id","scope","state"],status:[200]},{addRedirectOrigin:function(t){this.addQueryString({redirect_uri:t+"/db/User/OAuth/facebook"})}}),GitHubOAuth:a.createExternal({method:"OAUTH",path:"https://github.com/login/oauth/authorize?response_type=code&access_type=online",query:["client_id","scope","state"],status:[200]},{addRedirectOrigin:function(t){this.addQueryString({redirect_uri:t+"/db/User/OAuth/github"})}}),LinkedInOAuth:a.createExternal({method:"OAUTH",path:"https://www.linkedin.com/uas/oauth2/authorization?response_type=code&access_type=online",query:["client_id","scope","state"],status:[200]},{addRedirectOrigin:function(t){this.addQueryString({redirect_uri:t+"/db/User/OAuth/linkedin"})}}),TwitterOAuth:a.createExternal({method:"OAUTH",path:"",query:[],status:[200]},{addRedirectOrigin:function(t){this.request.path=t+"/db/User/OAuth1/twitter"}})}),r.exports=a},{29:29}],26:[function(t,r,n){"use strict";var i,s,a,u=t(23),c=t(32),l=function(r){function NodeConnector(t,e,n,a){o.classCallCheck(this,NodeConnector);var u=o.possibleConstructorReturn(this,r.call(this,t,e,n,a));return u.cookie=null,u.http=n?s:i,u}return o.inherits(NodeConnector,r),NodeConnector.isUsable=function(e,r,n){if(!i)try{i=t("http"),s=t("https"),a=t("stream")}catch(t){}return i&&i.Server},NodeConnector.prototype.doSend=function(t,r,n){var i=this;r.host=this.host,r.port=this.port,r.path=this.basePath+r.path;var o=r.entity,s=r.type,a=t.responseType();this.cookie&&t.withCredentials&&(r.headers.cookie=this.cookie);var u=this.http.request(r,function(t){var r=t.headers["set-cookie"];r&&(i.cookie=i.parseCookie(r+""));var o=t.statusCode;if(o>=400&&(a="json"),"stream"==a)return void n({status:o,headers:t.headers,entity:t});var s=a&&"text"!=a&&"json"!=a,u=[];s||t.setEncoding("utf-8"),t.on("data",function(t){u.push(t)}),t.on("end",function(){n({status:o,headers:t.headers,entity:s?e.concat(u):u.join("")})})});u.on("error",function(t){n({status:0,error:t})}),"stream"==s?o.pipe(u):"buffer"==s?u.end(o):s?u.end(o,"utf8"):u.end()},NodeConnector.prototype.parseCookie=function(t){for(var e,r=t.split(";"),n=0;e=r[n];++n)if(0==e.indexOf("Expires=")){var i=Date.parse(e.substring(8));if(i<Date.now())return null}return r[0]},NodeConnector.prototype.toFormat=function(t){var r=t.request.type;if(r){var n=t.request.entity,i=t.mimeType();switch(r){case"stream":if(!t.contentLength())throw new c("You must specify a content length while making a stream based upload.");break;case"buffer":break;case"arraybuffer":r="buffer",n=new e(n);break;case"data-url":var o=n.match(/^data:(.+?)(;base64)?,(.*)$/),s=o[2];n=o[3],r="buffer",i=i||o[1],n=s?new e(n,"base64"):new e(decodeURIComponent(n),"utf8");break;case"base64":r="buffer",n=new e(n,"base64");break;case"json":"string"!=typeof n&&(n=JSON.stringify(n));break;case"text":break;default:throw new Error("The request type "+r+" is not supported")}t.entity(n,r).mimeType(i)}},NodeConnector.prototype.fromFormat=function(t,e,r){return"json"==r?e=JSON.parse(e):"data-url"==r||"base64"==r?(e=e.toString("base64"),"data-url"==r&&(e="data:"+t.headers["content-type"]+";base64,"+e)):"arraybuffer"==r&&(e=e.buffer.slice(e.byteOffset,e.byteOffset+e.byteLength)),e},NodeConnector}(u);u.connectors.push(l),r.exports=l},{23:23,32:32,undefined:void 0}],27:[function(t,e,r){"use strict";var n=t(23),i=function(t){function XMLHttpConnector(){return o.classCallCheck(this,XMLHttpConnector),o.possibleConstructorReturn(this,t.apply(this,arguments))}return o.inherits(XMLHttpConnector,t),XMLHttpConnector.isUsable=function(t,e,r){if("undefined"==typeof window)return!1;var n="https:"==location.protocol,i=location.port||(n?443:80);return location.hostname==t&&i==e&&n==r},XMLHttpConnector.prototype.doSend=function(t,e,r){var i=this;if("OAUTH"==e.method){this.oAuthHandle&&this.oAuthHandle({status:409,entity:'{"message": "A new OAuth request was sent."}'}),localStorage.removeItem("oauth-response");var o=function(t){"oauth-response"==t.key&&i.oAuthHandle(JSON.parse(t.newValue))};return this.oAuthHandle=function(t){r(t),localStorage.removeItem("oauth-response"),removeEventListener("storage",o,!1)},void addEventListener("storage",o,!1)}var s=new XMLHttpRequest,a=this.origin+this.basePath+e.path;s.onreadystatechange=function(){if(2==s.readyState&&s.status>=400&&(s.responseType="text"),4==s.readyState){var t={headers:{},status:s.status,entity:s.response||s.responseText};n.RESPONSE_HEADERS.forEach(function(e){t.headers[e]=s.getResponseHeader(e)}),r(t)}},s.upload.onprogress=t.progress(),s.open(e.method,a,!0);var u=e.entity,c=e.headers;for(var l in c)s.setRequestHeader(l,c[l]);switch(s.withCredentials=t.withCredentials,t.responseType()){case"arraybuffer":s.responseType="arraybuffer";break;case"blob":case"data-url":case"base64":s.responseType="blob"}s.send(u)},XMLHttpConnector.prototype.fromFormat=function(t,e,r){if("json"==r)e=JSON.parse(e);else if("data-url"==r||"base64"==r){var n=function(){var t=new FileReader;return t.readAsDataURL(e),{v:new Promise(function(e,r){t.onload=e,t.onerror=r}).then(function(){var e=t.result;return"base64"==r&&(e=e.substring(e.indexOf(",")+1)),e})}}();if("object"===("undefined"==typeof n?"undefined":o.typeof(n)))return n.v}return e},XMLHttpConnector.prototype.toFormat=function(t){var e=t.request.type;if(e){var r=t.request.entity,n=t.mimeType();switch(e){case"blob":n=n||r.type;break;case"arraybuffer":case"form":break;case"data-url":var i=r.match(/^data:(.+?)(;base64)?,(.*)$/),o=i[2];if(r=i[3],e="blob",n=n||i[1],!o){r=decodeURIComponent(r);break}case"base64":for(var s=atob(r),a=s.length,u=new Uint8Array(a),c=0;c<a;++c)u[c]=s.charCodeAt(c);e="blob",r=new Blob([u],{type:n});break;case"json":"string"!=typeof r&&(r=JSON.stringify(r));break;case"text":}t.entity(r,e).mimeType(n)}},XMLHttpConnector}(n);n.connectors.push(i),e.exports=i},{23:23}],28:[function(t,e,r){"use strict";r.Message=t(25),r.Connector=t(23),r.NodeConnector=t(26),r.XMLHttpConnector=t(27),r.IFrameConnector=t(24)},{23:23,24:24,25:25,26:26,27:27}],29:[function(t,e,r){"use strict";var n=t(32),i=function(t){function CommunicationError(e,r){o.classCallCheck(this,CommunicationError);var n=r.entity||r.error||{},i=0==r.status?"Request":"Response",s=n.message||"Handling the "+i+" for "+e.request.method+" "+e.request.path,a=o.possibleConstructorReturn(this,t.call(this,s,n));a.name=n.className||"CommunicationError",a.reason=n.reason||"Communication failed",a.status=r.status,n.data&&(a.data=n.data);for(var u=n;u&&u.stackTrace;){a.stack+="\nServerside Caused by: "+u.className+" "+u.message;for(var c=u.stackTrace,l=0;l<c.length;++l){var f=c[l];a.stack+="\n    at "+f.className+"."+f.methodName,a.stack+=" ("+f.fileName+":"+f.lineNumber+")"}u=u.cause}return a}return o.inherits(CommunicationError,t),CommunicationError}(n);e.exports=i},{32:32}],30:[function(t,e,r){"use strict";var n=t(32),i=function(t){function EntityExistsError(e){o.classCallCheck(this,EntityExistsError);var r=o.possibleConstructorReturn(this,t.call(this,"The entity "+e+" is managed by a different db."));return r.entity=e,r}return o.inherits(EntityExistsError,t),EntityExistsError}(n);e.exports=i},{32:32}],31:[function(t,e,r){"use strict";var n=t(32),i=function(t){function IllegalEntityError(e){o.classCallCheck(this,IllegalEntityError);var r=o.possibleConstructorReturn(this,t.call(this,"Entity "+e+" is not a valid entity"));return r.entity=e,r}return o.inherits(IllegalEntityError,t),IllegalEntityError}(n);e.exports=i},{32:32}],32:[function(t,e,r){"use strict";function PersistentError(t,e){t=t?t:"An unexpected persistent error occured.",Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=t,this.name=this.constructor.name,e&&(this.cause=e,e.stack&&(this.stack+="\nCaused By: "+e.stack))}PersistentError.of=function(t){return t instanceof PersistentError?t:new PersistentError(null,t)},PersistentError.prototype=Object.create(Error.prototype,{constructor:{value:PersistentError,enumerable:!1,configurable:!0}}),e.exports=PersistentError},{}],33:[function(t,e,r){"use strict";var n=t(32),i=function(t){function RollbackError(e){return o.classCallCheck(this,RollbackError),o.possibleConstructorReturn(this,t.call(this,"The transaction has been rollbacked",e))}return o.inherits(RollbackError,t),RollbackError}(n);e.exports=i},{32:32}],34:[function(t,e,r){"use strict";r.CommunicationError=t(29),r.IllegalEntityError=t(31),r.EntityExistsError=t(30),r.PersistentError=t(32),r.RollbackError=t(33)},{29:29,30:30,31:31,32:32,33:33}],35:[function(t,e,r){"use strict";t(163),e.exports=t(6)},{163:163,6:6}],36:[function(t,e,r){"use strict";var n=t(25);r.ListAllResources=n.create({method:"GET",path:"/",status:[200]}),r.ApiVersion=n.create({method:"GET",path:"/version",status:[200]}),r.EventsUrl=n.create({method:"GET",path:"/events-url",status:[200]}),r.Specification=n.create({method:"GET",path:"/spec",status:[200]}),r.GetBloomFilter=n.create({method:"GET",path:"/bloomfilter",status:[200]}),r.GetOrestesConfig=n.create({method:"GET",path:"/config",status:[200]}),r.UpdateOrestesConfig=n.create({method:"PUT",path:"/config",status:[200,202]}),r.Connect=n.create({method:"GET",path:"/connect",status:[200]}),r.Status=n.create({method:"GET",path:"/status",status:[200]}),r.BannedIp=n.create({method:"GET",path:"/banned/:ip",status:[204]}),r.Banned=n.create({method:"GET",path:"/banned",status:[]}),r.Unban=n.create({method:"DELETE",path:"/banned",status:[204]}),r.UnbanIp=n.create({method:"DELETE",path:"/banned/:ip",status:[204]}),r.GetBucketNames=n.create({method:"GET",path:"/db",status:[200]}),r.GetBucketIds=n.create({method:"GET",path:"/db/:bucket/ids?start=0&count=-1",status:[200]}),r.ExportBucket=n.create({method:"GET",path:"/db/:bucket",status:[200]}),r.ImportBucket=n.create({method:"PUT",path:"/db/:bucket",status:[200]}),r.TruncateBucket=n.create({method:"DELETE",path:"/db/:bucket",status:[200]}),r.CreateObject=n.create({method:"POST",path:"/db/:bucket",status:[201,202]}),r.GetObject=n.create({method:"GET",path:"/db/:bucket/:oid",status:[200,304]}),r.ReplaceObject=n.create({method:"PUT",path:"/db/:bucket/:oid",status:[200,202]}),r.DeleteObject=n.create({method:"DELETE",path:"/db/:bucket/:oid",status:[202,204]}),r.GetAllSchemas=n.create({method:"GET",path:"/schema",status:[200]}),r.UpdateAllSchemas=n.create({method:"POST",path:"/schema",status:[200]}),r.ReplaceAllSchemas=n.create({method:"PUT",path:"/schema",status:[200]}),r.GetSchema=n.create({method:"GET",path:"/schema/:bucket",status:[200]}),r.UpdateSchema=n.create({method:"POST",path:"/schema/:bucket",status:[200]}),r.ReplaceSchema=n.create({method:"PUT",path:"/schema/:bucket",status:[200]}),r.DeleteSchema=n.create({method:"DELETE",path:"/schema/:bucket",status:[204]}),r.AdhocQuery=n.create({method:"GET",path:"/db/:bucket/query?q&start=0&count=-1&sort=&eager=",status:[200]}),r.AdhocQueryPOST=n.create({method:"POST",path:"/db/:bucket/query?start=0&count=-1&sort=",status:[200]}),r.AdhocCountQuery=n.create({method:"GET",path:"/db/:bucket/count?q",status:[200]}),r.AdhocCountQueryPOST=n.create({method:"POST",path:"/db/:bucket/count",status:[200]}),r.ListQueryResources=n.create({method:"GET",path:"/query",status:[200]}),r.CreateQuery=n.create({method:"POST",path:"/query",status:[201]}),r.ListThisQueryResources=n.create({method:"GET",path:"/query/:qid",status:[200]}),r.GetQueryCode=n.create({method:"GET",path:"/query/:qid/source",status:[200]}),r.RunQuery=n.create({method:"GET",path:"/query/:qid/result?start=0&count=-1",status:[200]}),r.GetQueryParameters=n.create({method:"GET",path:"/query/:qid/parameters",status:[200]}),r.NewTransaction=n.create({method:"POST",path:"/transaction",status:[201]}),r.CommitTransaction=n.create({method:"PUT",path:"/transaction/:tid/committed",status:[200]}),r.GetObjectInExplicitVersion=n.create({method:"GET",path:"/db/:bucket/:oid/:version",status:[200]}),r.UpdatePartially=n.create({method:"POST",path:"/db/:bucket/:oid",status:[204]}),r.UpdateField=n.create({method:"POST",path:"/db/:bucket/:oid/:field",status:[204]}),r.Login=n.create({method:"POST",
path:"/db/User/login",status:[200]}),r.Register=n.create({method:"POST",path:"/db/User/register",status:[200,204]}),r.Me=n.create({method:"GET",path:"/db/User/me",status:[200]}),r.ValidateUser=n.create({method:"GET",path:"/db/User/validate",status:[200]}),r.Logout=n.create({method:"GET",path:"/db/User/logout",status:[204]}),r.NewPassword=n.create({method:"POST",path:"/db/User/password",status:[200]}),r.Verify=n.create({method:"GET",path:"/db/User/verify?token=",status:[204]}),r.OAuth2=n.create({method:"GET",path:"/db/User/OAuth/:provider?state=&code=&oauth_verifier=&oauth_token=&error_description=",status:[200]}),r.OAuth1=n.create({method:"GET",path:"/db/User/OAuth1/:provider",status:[200]}),r.GetBaqendCode=n.create({method:"GET",path:"/code/:bucket/:type",status:[200]}),r.SetBaqendCode=n.create({method:"PUT",path:"/code/:bucket/:type",status:[200,202]}),r.DeleteBaqendCode=n.create({method:"DELETE",path:"/code/:bucket/:type",status:[202,204]}),r.PostBaqendModule=n.create({method:"POST",path:"/code/:bucket",status:[200,204]}),r.GetBaqendModule=n.create({method:"GET",path:"/code/:bucket",status:[200,204]}),r.GetAllModules=n.create({method:"GET",path:"/code",status:[200]}),r.ListFiles=n.create({method:"GET",path:"/file/:bucket/ids?path=/&start=&count=-1",status:[200]}),r.ListBuckets=n.create({method:"GET",path:"/file/buckets",status:[200]}),r.GetFileBucketMetadata=n.create({method:"GET",path:"/file/:bucket",status:[200]}),r.SetFileBucketMetadata=n.create({method:"PUT",path:"/file/:bucket",status:[204]}),r.DeleteFileBucket=n.create({method:"DELETE",path:"/file/:bucket",status:[204]}),r.CreateFile=n.create({method:"POST",path:"/file/:bucket",status:[200]}),r.DownloadFile=n.create({method:"GET",path:"/file/:bucket/*oid",status:[200,304]}),r.UploadFile=n.create({method:"PUT",path:"/file/:bucket/*oid",status:[200]}),r.GetFileMetadata=n.create({method:"HEAD",path:"/file/:bucket/*oid",status:[200]}),r.UpdateFileMetadata=n.create({method:"POST",path:"/file/:bucket/*oid",status:[200]}),r.DeleteFile=n.create({method:"DELETE",path:"/file/:bucket/*oid",status:[204]}),r.ListIndexes=n.create({method:"GET",path:"/index/:bucket",status:[200]}),r.CreateDropIndex=n.create({method:"POST",path:"/index/:bucket",status:[202]}),r.DropAllIndexes=n.create({method:"DELETE",path:"/index/:bucket",status:[202]}),r.DeviceRegister=n.create({method:"POST",path:"/db/Device/register",status:[204]}),r.DevicePush=n.create({method:"POST",path:"/db/Device/push",status:[204]}),r.DeviceRegistered=n.create({method:"GET",path:"/db/Device/registered",status:[200]}),r.UploadAPNSCertificate=n.create({method:"POST",path:"/config/APNSCert",status:[204]}),r.GCMAKey=n.create({method:"POST",path:"/config/GCMKey",status:[204]})},{25:25}],37:[function(t,e,r){"use strict";var n=t(7),i=function(){function Attribute(t,e){o.classCallCheck(this,Attribute),this.isMetadata=!!e,this.isId=!1,this.isVersion=!1,this.isAcl=!1,this.name=t,this.order=null,this.accessor=null,this.declaringType=null}return o.createClass(Attribute,[{key:"persistentAttributeType",get:function(){return-1}},{key:"isAssociation",get:function(){return this.persistentAttributeType>Attribute.PersistentAttributeType.EMBEDDED}},{key:"isCollection",get:function(){return this.persistentAttributeType==Attribute.PersistentAttributeType.ELEMENT_COLLECTION}}]),Attribute.prototype.init=function(t,e){if(this.declaringType)throw new Error("The attribute is already initialized.");this.order=e,this.accessor=new n,this.declaringType=t},Attribute.prototype.getValue=function(t){return this.accessor.getValue(t,this)},Attribute.prototype.setValue=function(t,e){this.accessor.setValue(t,this,e)},Attribute.prototype.getJsonValue=function(t,e){},Attribute.prototype.setJsonValue=function(t,e,r){},Attribute.prototype.toJSON=function(){},Attribute}();i.PersistentAttributeType={BASIC:0,ELEMENT_COLLECTION:1,EMBEDDED:2,MANY_TO_MANY:3,MANY_TO_ONE:4,ONE_TO_MANY:5,ONE_TO_ONE:6},e.exports=i},{7:7}],38:[function(t,e,r){"use strict";function dateToJson(t){return t instanceof Date?t.toISOString().replace(/\.?0*Z/,"Z"):null}function jsonToDate(t,e){var r="string"==typeof t?new Date(t):null;return e&&r&&e.toISOString()==r.toISOString()?e:r}var n=t(51),i=t(5),s=t(13),a=function(t){function BasicType(e,r,n){o.classCallCheck(this,BasicType),0!=e.indexOf("/db/")&&(e="/db/"+e);var i=o.possibleConstructorReturn(this,t.call(this,e,r));return i.noResolving=n,i}return o.inherits(BasicType,t),o.createClass(BasicType,[{key:"persistenceType",get:function(){return n.PersistenceType.BASIC}}]),BasicType.prototype.toJsonValue=function(t,e){return null===e||void 0===e?null:this.typeConstructor(e)},BasicType.prototype.fromJsonValue=function(t,e,r){return null===e||void 0===e?null:e},BasicType.prototype.toString=function(){return"BasicType("+this.ref+")"},BasicType}(n);Object.assign(a,{Boolean:new(function(t){function BooleanType(){return o.classCallCheck(this,BooleanType),o.possibleConstructorReturn(this,t.apply(this,arguments))}return o.inherits(BooleanType,t),BooleanType.prototype.fromJsonValue=function(e,r,n){return"string"==typeof r?"false"!==r:t.prototype.fromJsonValue.call(this,e,r,n)},BooleanType}(a))("Boolean",Boolean),Double:new(function(t){function DoubleType(){return o.classCallCheck(this,DoubleType),o.possibleConstructorReturn(this,t.apply(this,arguments))}return o.inherits(DoubleType,t),DoubleType.prototype.fromJsonValue=function(e,r,n){return"string"==typeof r?parseFloat(r):t.prototype.fromJsonValue.call(this,e,r,n)},DoubleType}(a))("Double",Number),Integer:new(function(t){function IntegerType(){return o.classCallCheck(this,IntegerType),o.possibleConstructorReturn(this,t.apply(this,arguments))}return o.inherits(IntegerType,t),IntegerType.prototype.fromJsonValue=function(e,r,n){return"string"==typeof r?parseInt(r):t.prototype.fromJsonValue.call(this,e,r,n)},IntegerType}(a))("Integer",Number),String:new(function(t){function StringType(){return o.classCallCheck(this,StringType),o.possibleConstructorReturn(this,t.apply(this,arguments))}return o.inherits(StringType,t),StringType}(a))("String",String),DateTime:new(function(t){function DateTimeType(){return o.classCallCheck(this,DateTimeType),o.possibleConstructorReturn(this,t.apply(this,arguments))}return o.inherits(DateTimeType,t),DateTimeType.prototype.toJsonValue=function(t,e){return dateToJson(e)},DateTimeType.prototype.fromJsonValue=function(t,e,r){return jsonToDate(e,r)},DateTimeType}(a))("DateTime",Date),Date:new(function(t){function DateType(){return o.classCallCheck(this,DateType),o.possibleConstructorReturn(this,t.apply(this,arguments))}return o.inherits(DateType,t),DateType.prototype.toJsonValue=function(t,e){var r=dateToJson(e);return r?r.substring(0,r.indexOf("T")):null},DateType.prototype.fromJsonValue=function(t,e,r){return jsonToDate(e,r)},DateType}(a))("Date",Date),Time:new(function(t){function TimeType(){return o.classCallCheck(this,TimeType),o.possibleConstructorReturn(this,t.apply(this,arguments))}return o.inherits(TimeType,t),TimeType.prototype.toJsonValue=function(t,e){var r=dateToJson(e);return r?r.substring(r.indexOf("T")+1):null},TimeType.prototype.fromJsonValue=function(t,e,r){return"string"==typeof e?jsonToDate("1970-01-01T"+e,r):e},TimeType}(a))("Time",Date),File:new(function(t){function FileType(){return o.classCallCheck(this,FileType),o.possibleConstructorReturn(this,t.apply(this,arguments))}return o.inherits(FileType,t),FileType.prototype.toJsonValue=function(t,e){return e instanceof s?e.id:null},FileType.prototype.fromJsonValue=function(t,e,r){return e?r&&r.id==e?r:new s(e):null},FileType}(a))("File",s),GeoPoint:new(function(t){function GeoPointType(){return o.classCallCheck(this,GeoPointType),o.possibleConstructorReturn(this,t.apply(this,arguments))}return o.inherits(GeoPointType,t),GeoPointType.prototype.toJsonValue=function(t,e){return e instanceof i?e:null},GeoPointType.prototype.fromJsonValue=function(t,e){return e?new i(e):null},GeoPointType}(a))("GeoPoint",i),JsonArray:new(function(t){function JsonArrayType(){return o.classCallCheck(this,JsonArrayType),o.possibleConstructorReturn(this,t.apply(this,arguments))}return o.inherits(JsonArrayType,t),JsonArrayType.prototype.init=function(t){this._enhancer=t},JsonArrayType.prototype.toJsonValue=function(t,e){return Array.isArray(e)?e:null},JsonArrayType.prototype.fromJsonValue=function(t,e){return Array.isArray(e)?e:null},JsonArrayType}(a))("JsonArray",Array),JsonObject:new(function(t){function JsonObjectType(){return o.classCallCheck(this,JsonObjectType),o.possibleConstructorReturn(this,t.apply(this,arguments))}return o.inherits(JsonObjectType,t),JsonObjectType.prototype.init=function(t){this._enhancer=t},JsonObjectType.prototype.toJsonValue=function(t,e){return e&&e.constructor==Object?e:null},JsonObjectType}(a))("JsonObject",Object)}),e.exports=a},{13:13,5:5,51:51}],39:[function(t,e,r){"use strict";var n=t(48),i=function(t){function CollectionAttribute(e,r){o.classCallCheck(this,CollectionAttribute);var n=o.possibleConstructorReturn(this,t.call(this,e,r));return n.typeConstructor=null,n}return o.inherits(CollectionAttribute,t),o.createClass(CollectionAttribute,[{key:"collectionType",get:function(){return n.CollectionType.COLLECTION}}]),CollectionAttribute}(n);e.exports=i},{48:48}],40:[function(t,e,r){"use strict";var n=function(){function DbIndex(t,e){if(o.classCallCheck(this,DbIndex),Object(t)instanceof String){var r={};r[t]=DbIndex.ASC,this.keys=[r]}else if(Object(t)instanceof Array)this.keys=t;else{if(!t)throw new Error("The keys parameter must be an String, Object or Array.");this.keys=[t]}this.drop=!1,this.unique=e===!0}return DbIndex.prototype.hasKey=function(t){for(var e=0;e<this.keys.length;e++)if(this.keys[e][t])return!0;return!1},DbIndex.prototype.toJSON=function(){return{unique:this.unique,keys:this.keys,drop:this.drop}},o.createClass(DbIndex,[{key:"isCompound",get:function(){return this.keys.length>1}},{key:"isUnique",get:function(){return this.unique}}]),DbIndex}();Object.assign(n,{ASC:"asc",DESC:"desc",GEO:"geo",fromJSON:function(t){return new n(t.keys,t.unique)}}),e.exports=n},{}],41:[function(t,e,r){"use strict";var n=t(44),i=t(51),s=t(20),a=function(t){function EmbeddableType(e,r){return o.classCallCheck(this,EmbeddableType),o.possibleConstructorReturn(this,t.call(this,e,r))}return o.inherits(EmbeddableType,t),o.createClass(EmbeddableType,[{key:"persistenceType",get:function(){return i.PersistenceType.EMBEDDABLE}}]),EmbeddableType.prototype.createProxyClass=function(){return this._enhancer.createProxy(s.Managed)},EmbeddableType.prototype.createObjectFactory=function(t){return s.ManagedFactory.create(this,t)},EmbeddableType.prototype.toJsonValue=function(e,r){return e._root&&r instanceof this.typeConstructor&&!r._metadata._root&&(r._metadata._root=e._root),t.prototype.toJsonValue.call(this,e,r)},EmbeddableType.prototype.fromJsonValue=function(e,r,n){return r&&(n instanceof this.typeConstructor||(n=this.create()),e._root&&!n._metadata._root&&(n._metadata._root=e._root)),t.prototype.fromJsonValue.call(this,e,r,n)},EmbeddableType.prototype.toString=function(){return"EmbeddableType("+this.ref+")"},EmbeddableType}(n);e.exports=a},{20:20,44:44,51:51}],42:[function(t,e,r){"use strict";var n=t(20),i=t(50),s=t(38),a=t(51),u=t(44),c=t(70),l=function(t){function EntityType(e,r,n){o.classCallCheck(this,EntityType);var i=o.possibleConstructorReturn(this,t.call(this,e,n));return i.declaredId=null,i.declaredVersion=null,i.declaredAcl=null,i.superType=r,i.loadPermission=new c.Permission,i.updatePermission=new c.Permission,i.deletePermission=new c.Permission,i.queryPermission=new c.Permission,i.schemaSubclassPermission=new c.Permission,i.insertPermission=new c.Permission,i}return o.inherits(EntityType,t),o.createClass(EntityType,[{key:"persistenceType",get:function(){return a.PersistenceType.ENTITY}},{key:"id",get:function(){return this.declaredId||this.superType.id}},{key:"version",get:function(){return this.declaredVersion||this.superType.version}},{key:"acl",get:function(){return this.declaredAcl||this.superType.acl}}]),EntityType.prototype.createProxyClass=function(){var t=this.superType.typeConstructor;if(t===Object)switch(this.name){case"User":t=n.User;break;case"Role":t=n.Role;break;default:t=n.Entity}return this._enhancer.createProxy(t)},EntityType.prototype.createObjectFactory=function(t){switch(this.name){case"User":return n.UserFactory.create(this,t);case"Device":return n.DeviceFactory.create(this,t);case"Object":return}return n.EntityFactory.create(this,t)},EntityType.prototype.fromJsonValue=function(e,r,n,i){return i?t.prototype.fromJsonValue.call(this,e,r,n):r?e.db.getReference(r):null},EntityType.prototype.toJsonValue=function(e,r,n){return n?t.prototype.toJsonValue.call(this,e,r):r instanceof this.typeConstructor?(r.attach(e.db),r.id):null},EntityType.prototype.toString=function(){return"EntityType("+this.ref+")"},EntityType.prototype.toJSON=function(){var e=t.prototype.toJSON.call(this);return e.acl.schemaSubclass=this.schemaSubclassPermission,e.acl.insert=this.insertPermission,e.acl.update=this.updatePermission,e.acl.delete=this.deletePermission,e.acl.query=this.queryPermission,e},EntityType}(u),f=function(t){function ObjectType(){o.classCallCheck(this,ObjectType);var e=o.possibleConstructorReturn(this,t.call(this,l.Object.ref,null,Object));return e.declaredId=new i("id",s.String,!0),e.declaredId.init(e,0),e.declaredId.isId=!0,e.declaredVersion=new i("version",s.Double,!0),e.declaredVersion.init(e,1),e.declaredVersion.isVersion=!0,e.declaredAcl=new i("acl",s.JsonObject,!0),e.declaredAcl.init(e,2),e.declaredAcl.isAcl=!0,e.declaredAttributes=[e.declaredId,e.declaredVersion,e.declaredAcl],e}return o.inherits(ObjectType,t),o.createClass(ObjectType,null,[{key:"ref",get:function(){return"/db/Object"}}]),ObjectType}(l);l.Object=f,e.exports=l},{20:20,38:38,44:44,50:50,51:51,70:70}],43:[function(t,e,r){"use strict";var n=t(48),i=function(t){function ListAttribute(e,r){o.classCallCheck(this,ListAttribute);var n=o.possibleConstructorReturn(this,t.call(this,e,r));return n.typeConstructor=Array,n}return o.inherits(ListAttribute,t),o.createClass(ListAttribute,[{key:"collectionType",get:function(){return n.CollectionType.LIST}}],[{key:"ref",get:function(){return"/db/collection.List"}}]),ListAttribute.prototype.getJsonValue=function(t,e){var r=this.getValue(e);if(r instanceof this.typeConstructor){for(var n=r.length,i=new Array(n),o=r.__persistedState__||[],s=!r.__persistedState__||o.length!=n,a=new Array(n),u=0;u<n;++u){var c=r[u];a[u]=this.elementType.toJsonValue(t,c),i[u]=c,s|=o[u]!==c}return t.persisting&&Object.defineProperty(r,"__persistedState__",{value:i,configurable:!0}),t.isPersistent&&s&&t.setDirty(),a}return null},ListAttribute.prototype.setJsonValue=function(t,e,r){var n=null;if(r){n=this.getValue(e);var i=r.length;n instanceof this.typeConstructor||(n=new this.typeConstructor(i));var o=new Array(i),s=n.__persistedState__||[];i<n.length&&n.splice(i,n.length-i);for(var a=0;a<i;++a){var u=this.elementType.fromJsonValue(t,r[a],s[a]);o[a]=n[a]=u}t.persisting&&Object.defineProperty(n,"__persistedState__",{value:o,configurable:!0})}this.setValue(e,n)},ListAttribute.prototype.toJSON=function(){return{name:this.name,type:ListAttribute.ref+"["+this.elementType.ref+"]",order:this.order}},ListAttribute}(n);e.exports=i},{48:48}],44:[function(t,e,r){"use strict";var n=t(51),i=t(65),s=t(69),a=t(20),u=function(t){function ManagedType(e,r){o.classCallCheck(this,ManagedType);var n=o.possibleConstructorReturn(this,t.call(this,0!=e.indexOf("/db/")?"/db/"+e:e,r));return n._enhancer=null,n.declaredAttributes=[],n.schemaAddPermission=new i,n.schemaReplacePermission=new i,n}return o.inherits(ManagedType,t),o.createClass(ManagedType,[{key:"validationCode",get:function(){return this._validationCode},set:function(t){t?this._validationCode=s.compile(this,t):this._validationCode=null}},{key:"typeConstructor",get:function(){return this._typeConstructor||(this.typeConstructor=this.createProxyClass()),this._typeConstructor},set:function(t){if(this._typeConstructor)throw new Error("Type constructor has already been set.");var e=t.prototype instanceof a.Entity;if(this.isEntity){if(!e)throw new TypeError("Entity classes must extends the Entity class.")}else if(!(t.prototype instanceof a.Managed)||e)throw new TypeError("Embeddable classes must extends the Managed class.");this._enhancer.enhance(this,t),this._typeConstructor=t}}]),ManagedType.prototype.init=function(t){this._enhancer=t,this._typeConstructor&&!this._enhancer.getIdentifier(this._typeConstructor)&&this._enhancer.setIdentifier(this._typeConstructor,this.ref)},ManagedType.prototype.createProxyClass=function(){},ManagedType.prototype.createObjectFactory=function(t){},ManagedType.prototype.create=function(){var t;return t=Object.create(this.typeConstructor.prototype),a.Managed.init(t),t},ManagedType.prototype.attributes=function(){var t,e=void 0,r=0,n=this;return this.superType&&(e=this.superType.attributes()),t={},t[Symbol.iterator]=function(){return this},t.next=function(){if(e){var t=e.next();if(!t.done)return t;e=null}return r<n.declaredAttributes.length?{value:n.declaredAttributes[r++],done:!1}:{done:!0}},t},ManagedType.prototype.addAttribute=function(t,e){if(this.getAttribute(t.name))throw new Error("An attribute with the name "+t.name+" is already declared.");e=null==t.order?"undefined"==typeof e?this.declaredAttributes.length:e:t.order,t.init(this,e),this.declaredAttributes.push(t),this._typeConstructor&&"Object"!=this.name&&this._enhancer.enhanceProperty(this._typeConstructor,t)},ManagedType.prototype.removeAttribute=function(t){var e=this.declaredAttributes.length;if(this.declaredAttributes=this.declaredAttributes.filter(function(e){return e.name!=t}),e==this.declaredAttributes.length)throw new Error("An Attribute with the name "+t+" is not declared.")},ManagedType.prototype.getAttribute=function(t){var e=this.getDeclaredAttribute(t);return!e&&this.superType&&(e=this.superType.getAttribute(t)),e},ManagedType.prototype.getDeclaredAttribute=function(t){for(var e=this.declaredAttributes,r=Array.isArray(e),n=0,e=r?e:e[Symbol.iterator]();;){var i;if(r){if(n>=e.length)break;i=e[n++]}else{if(n=e.next(),n.done)break;i=n.value}var o=i;if(o.name===t||o.order===t)return o}return null},ManagedType.prototype.fromJsonValue=function(t,e,r){if(e)for(var n=this.attributes(),i=Array.isArray(n),o=0,n=i?n:n[Symbol.iterator]();;){var s;if(i){if(o>=n.length)break;s=n[o++]}else{if(o=n.next(),o.done)break;s=o.value}var a=s;a.isMetadata||a.setJsonValue(t,r,e[a.name])}else r=null;return r},ManagedType.prototype.toJsonValue=function(t,e){var r=null;if(e instanceof this.typeConstructor){r={};for(var n=this.attributes(),i=Array.isArray(n),o=0,n=i?n:n[Symbol.iterator]();;){var s;if(i){if(o>=n.length)break;s=n[o++]}else{if(o=n.next(),o.done)break;s=o.value}var a=s;a.isMetadata||(r[a.name]=a.getJsonValue(t,e))}}return r},ManagedType.prototype.toJSON=function(){var t={};t.class=this.ref,this.superType&&(t.superClass=this.superType.ref),this.isEmbeddable&&(t.embedded=!0),t.acl={load:this.loadPermission,schemaAdd:this.schemaAddPermission,schemaReplace:this.schemaReplacePermission};for(var e=t.fields={},r=this.declaredAttributes,n=Array.isArray(r),i=0,r=n?r:r[Symbol.iterator]();;){var o;if(n){if(i>=r.length)break;o=r[i++]}else{if(i=r.next(),i.done)break;o=i.value}var s=o;s.isMetadata||(e[s.name]=s)}return t},ManagedType.prototype.references=function(){var t,e=this.attributes(),r=[];return t={},t[Symbol.iterator]=function(){return this},t.next=function(){for(var t=e,n=Array.isArray(t),i=0,t=n?t:t[Symbol.iterator]();;){var o;if(n){if(i>=t.length)break;o=t[i++]}else{if(i=t.next(),i.done)break;o=i.value}var s=o,a=s.isCollection?s.elementType:s.type;if(a.isEntity)return{done:!1,value:{path:[s.name]}};if(a.isEmbeddable)for(var u=a.references(),c=Array.isArray(u),l=0,u=c?u:u[Symbol.iterator]();;){var f;if(c){if(l>=u.length)break;f=u[l++]}else{if(l=u.next(),l.done)break;f=l.value}var h=f;r.push({done:!1,value:{path:[s.name].concat(h.path)}})}}return r.length?r.pop():{done:!0}},t},ManagedType}(n);e.exports=u},{20:20,51:51,65:65,69:69}],45:[function(t,e,r){"use strict";var n=t(48),i=t(32),s=function(t){function MapAttribute(e,r,n){o.classCallCheck(this,MapAttribute);var i=o.possibleConstructorReturn(this,t.call(this,e,n));return i.keyType=r,i.typeConstructor=Map,i}return o.inherits(MapAttribute,t),o.createClass(MapAttribute,[{key:"collectionType",get:function(){return n.CollectionType.MAP}}],[{key:"ref",get:function(){return"/db/collection.Map"}}]),MapAttribute.prototype.getJsonValue=function(t,e){var r=this.getValue(e);if(r instanceof this.typeConstructor){for(var n={},o=r.__persistedState__||{},s=!r.__persistedState__||r.__persistedSize__!==r.size,a={},u=r.entries(),c=Array.isArray(u),l=0,u=c?u:u[Symbol.iterator]();;){var f;if(c){if(l>=u.length)break;f=u[l++]}else{if(l=u.next(),l.done)break;f=l.value}var h=f;if(null===h[0]||void 0===h[0])throw new i("Map keys can't be null nor undefined.");var p=this.keyType.toJsonValue(t,h[0]);a[p]=this.elementType.toJsonValue(t,h[1]),n[p]=[h[0],h[1]],s|=(o[p]||[])[1]!==h[1]}return t.persisting&&Object.defineProperties(r,{__persistedState__:{value:n,configurable:!0},__persistedSize__:{value:r.size,configurable:!0}}),t.isPersistent&&s&&t.setDirty(),a}return null},MapAttribute.prototype.setJsonValue=function(t,e,r){var n=null;if(r){n=this.getValue(e),n instanceof this.typeConstructor||(n=new this.typeConstructor);var i={},o=n.__persistedState__||{};n.clear();for(var s in r){var a=o[s]||[],u=this.keyType.fromJsonValue(t,s,a[0]),c=this.elementType.fromJsonValue(t,r[s],a[1]);i[s]=[u,c],n.set(u,c)}t.persisting&&Object.defineProperties(n,{__persistedState__:{value:i,configurable:!0},__persistedSize__:{value:n.size,configurable:!0}})}this.setValue(e,n)},MapAttribute.prototype.toJSON=function(){return{name:this.name,type:MapAttribute.ref+"["+this.keyType.ref+","+this.elementType.ref+"]",order:this.order}},MapAttribute}(n);e.exports=s},{32:32,48:48}],46:[function(t,e,r){"use strict";var n=(t(38),t(44)),i=t(42),s=t(9),a=t(47),u=t(40),c=t(61),l=t(25).StatusCode,f=t(36),h=function(t){function Metamodel(e){o.classCallCheck(this,Metamodel);var r=o.possibleConstructorReturn(this,t.call(this));return r.isInitialized=!1,r.entityManagerFactory=e,r.entities=null,r.embeddables=null,r.baseTypes=null,r._enhancer=new s,r}return o.inherits(Metamodel,t),Metamodel.prototype.init=function(t){if(this.isInitialized)throw new Error("Metamodel is already initialized.");this.fromJSON(t||[]),this.isInitialized=!0},Metamodel.prototype._getRef=function(t){var e;return Object(t)instanceof String?(e=t,0!=e.indexOf("/db/")&&(e="/db/"+t)):e=this._enhancer.getIdentifier(t),e},Metamodel.prototype.entity=function(t){var e=this._getRef(t);return e?this.entities[e]:null},Metamodel.prototype.baseType=function(t){var e=null;if(Object(t)instanceof String)e=this._getRef(t);else for(var r in this.baseTypes){var n=this.baseTypes[r];if(!n.noResolving&&n.typeConstructor==t){e=r;break}}return e?this.baseTypes[e]:null},Metamodel.prototype.embeddable=function(t){var e=this._getRef(t);return e?this.embeddables[e]:null},Metamodel.prototype.managedType=function(t){return this.baseType(t)||this.entity(t)||this.embeddable(t)},Metamodel.prototype.addType=function(t){var e;if(t.isBasic?e=this.baseTypes:t.isEmbeddable?(t.init(this._enhancer),e=this.embeddables):t.isEntity&&(t.init(this._enhancer),e=this.entities,null==t.superType&&t.ref!=i.Object.ref&&(t.superType=this.entity(i.Object.ref))),e[t.ref])throw new Error("The type "+t.ref+" is already declared.");return e[t.ref]=t},Metamodel.prototype.load=function(){var t=this;if(this.isInitialized)throw new Error("Metamodel is already initialized.");return this.withLock(function(){var e=new f.GetAllSchemas;return t.entityManagerFactory.send(e).then(function(e){return t.init(e.entity),t})})},Metamodel.prototype.save=function(t){var e=this;return this._send(t||this.toJSON()).then(function(){return e})},Metamodel.prototype.update=function(t){var e=this;return this._send(t).then(function(t){return e.fromJSON(t.entity),e})},Metamodel.prototype._send=function(t){var e=this;if(!this.isInitialized)throw new Error("Metamodel is not initialized.");return this.withLock(function(){var r;return r=t instanceof n?new f.UpdateSchema(t.name,t.toJSON()):new f.UpdateAllSchemas(t),e.entityManagerFactory.send(r)})},Metamodel.prototype.toJSON=function(){var t=[];for(var e in this.entities)t.push(this.entities[e]);for(e in this.embeddables)t.push(this.embeddables[e]);return t},Metamodel.prototype.fromJSON=function(t){var e=new a,r=e.buildModels(t);this.baseTypes={},this.embeddables={},this.entities={};for(var n in r){var i=r[n];this.addType(i)}},Metamodel.prototype.createIndex=function(t,e){e.drop=!1;var r=new f.CreateDropIndex(t,e.toJSON());return this.entityManagerFactory.send(r)},Metamodel.prototype.dropIndex=function(t,e){e.drop=!0;var r=new f.CreateDropIndex(t,e.toJSON());return this.entityManagerFactory.send(r)},Metamodel.prototype.dropAllIndexes=function(t){var e=new f.DropAllIndexes(t);return this.entityManagerFactory.send(e)},Metamodel.prototype.getIndexes=function(t){var e=new f.ListIndexes(t);return this.entityManagerFactory.send(e).then(function(t){return t.entity.map(function(t){return new u(t.keys,t.unique)})},function(t){if(t.status==l.BUCKET_NOT_FOUND||t.status==l.OBJECT_NOT_FOUND)return null;throw t})},Metamodel}(c);e.exports=h},{25:25,36:36,38:38,40:40,42:42,44:44,47:47,61:61,9:9}],47:[function(t,e,r){"use strict";var n=t(38),i=t(42),s=t(41),a=t(43),u=t(45),c=t(49),l=t(50),f=t(32),h=function(){function ModelBuilder(){o.classCallCheck(this,ModelBuilder),this.models={},this.modelDescriptors=null;for(var t=Object.keys(n),e=Array.isArray(t),r=0,t=e?t:t[Symbol.iterator]();;){var i;if(e){if(r>=t.length)break;i=t[r++]}else{if(r=t.next(),r.done)break;i=r.value}var s=i,a=n[s];a instanceof n&&(this.models[a.ref]=a)}}return ModelBuilder.prototype.getModel=function(t){return t in this.models?this.models[t]:this.models[t]=this.buildModel(t)},ModelBuilder.prototype.buildModels=function(t){this.modelDescriptors={};for(var e,r=0;e=t[r];++r)this.modelDescriptors[e.class]=e;for(var n in this.modelDescriptors)try{var o=this.getModel(n);this.buildAttributes(o)}catch(t){throw new f("Can't create model for entity class "+n,t)}return this.getModel(i.Object.ref),this.models},ModelBuilder.prototype.buildModel=function(t){var e,r=this.modelDescriptors[t];if(t==i.Object.ref)e=new i.Object;else{if(!r)throw new TypeError("No model available for "+t);if(r.embedded)e=new s(t);else{var n=r.superClass||i.Object.ref;e=new i(t,this.getModel(n))}}if(r){var o=r.acl;for(var a in o)e[a+"Permission"].fromJSON(o[a])}return e},ModelBuilder.prototype.buildAttributes=function(t){var e=this.modelDescriptors[t.ref],r=e.fields;for(var n in r){var i=r[n];t.getAttribute(n)||t.addAttribute(this.buildAttribute(i.name,i.type),i.order)}e.validationCode&&(t.validationCode=e.validationCode)},ModelBuilder.prototype.buildAttribute=function(t,e){if(0!=e.indexOf("/db/collection."))return new l(t,this.getModel(e));var r=e.substring(0,e.indexOf("[")),n=e.substring(e.indexOf("[")+1,e.indexOf("]")).trim();switch(r){case a.ref:return new a(t,this.getModel(n));case c.ref:return new c(t,this.getModel(n));case u.ref:var i=n.substring(0,n.indexOf(",")).trim();return n=n.substring(n.indexOf(",")+1).trim(),new u(t,this.getModel(i),this.getModel(n));default:throw new TypeError("No collection available for "+e)}},ModelBuilder}();e.exports=h},{32:32,38:38,41:41,42:42,43:43,45:45,49:49,50:50}],48:[function(t,e,r){"use strict";var n=t(37),i=function(t){function PluralAttribute(e,r){o.classCallCheck(this,PluralAttribute);var n=o.possibleConstructorReturn(this,t.call(this,e));return n.elementType=r,n.typeConstructor=null,n}return o.inherits(PluralAttribute,t),o.createClass(PluralAttribute,[{key:"persistentAttributeType",get:function(){return n.PersistentAttributeType.ELEMENT_COLLECTION}}]),PluralAttribute}(n);i.CollectionType={COLLECTION:0,LIST:1,MAP:2,SET:3},e.exports=i},{37:37}],49:[function(t,e,r){"use strict";var n=t(48),i=function(t){function SetAttribute(e,r){o.classCallCheck(this,SetAttribute);var n=o.possibleConstructorReturn(this,t.call(this,e,r));return n.typeConstructor=Set,n}return o.inherits(SetAttribute,t),o.createClass(SetAttribute,[{key:"collectionType",get:function(){return n.CollectionType.SET}}],[{key:"ref",get:function(){return"/db/collection.Set"}}]),SetAttribute.prototype.getJsonValue=function(t,e){var r=this.getValue(e);if(r instanceof this.typeConstructor){for(var n={},i=r.__persistedState__||{},o=!r.__persistedState__||r.__persistedSize__!==r.size,s=[],a=r,u=Array.isArray(a),c=0,a=u?a:a[Symbol.iterator]();;){var l;if(u){if(c>=a.length)break;l=a[c++]}else{if(c=a.next(),c.done)break;l=c.value}var f=l,h=this.elementType.toJsonValue(t,f);s.push(h),n[h]=f,o|=i[h]!==f}return t.persisting&&Object.defineProperties(r,{__persistedState__:{value:n,configurable:!0},__persistedSize__:{value:r.size,configurable:!0}}),t.isPersistent&&o&&t.setDirty(),s}return null},SetAttribute.prototype.setJsonValue=function(t,e,r){var n=null;if(r){n=this.getValue(e),n instanceof this.typeConstructor||(n=new this.typeConstructor);var i={},o=n.__persistedState__||{};n.clear();for(var s=0,a=r.length;s<a;++s){var u=r[s],c=this.elementType.fromJsonValue(t,u,o[u]);n.add(c),i[u]=c}t.persisting&&Object.defineProperties(n,{__persistedState__:{value:i,configurable:!0},__persistedSize__:{value:n.size,configurable:!0}})}this.setValue(e,n)},SetAttribute.prototype.toJSON=function(){return{name:this.name,type:SetAttribute.ref+"["+this.elementType.ref+"]",order:this.order}},SetAttribute}(n);e.exports=i},{48:48}],50:[function(t,e,r){"use strict";var n=t(37),i=t(51),s=function(t){function SingularAttribute(e,r,n){o.classCallCheck(this,SingularAttribute);var i=o.possibleConstructorReturn(this,t.call(this,e,n));return i.type=r,i}return o.inherits(SingularAttribute,t),o.createClass(SingularAttribute,[{key:"typeConstructor",get:function(){return this.type.typeConstructor}},{key:"persistentAttributeType",get:function(){switch(this.type.persistenceType){case i.PersistenceType.BASIC:return n.PersistentAttributeType.BASIC;case i.PersistenceType.EMBEDDABLE:return n.PersistentAttributeType.EMBEDDED;case i.PersistenceType.ENTITY:return n.PersistentAttributeType.ONE_TO_MANY}}}]),SingularAttribute.prototype.getJsonValue=function(t,e){return this.type.toJsonValue(t,this.getValue(e))},SingularAttribute.prototype.setJsonValue=function(t,e,r){this.setValue(e,this.type.fromJsonValue(t,r,this.getValue(e)))},SingularAttribute.prototype.toJSON=function(){return{name:this.name,type:this.type.ref,order:this.order}},SingularAttribute}(n);e.exports=s},{37:37,51:51}],51:[function(t,e,r){"use strict";var n=function(){function Type(t,e){if(o.classCallCheck(this,Type),0!=t.indexOf("/db/"))throw new SyntaxError("Type ref "+t+" is invalid.");this.ref=t,this.name=t.substring(4),this._typeConstructor=e}return o.createClass(Type,[{key:"persistenceType",get:function(){return-1}},{key:"isBasic",get:function(){return this.persistenceType==Type.PersistenceType.BASIC}},{key:"isEmbeddable",get:function(){return this.persistenceType==Type.PersistenceType.EMBEDDABLE}},{key:"isEntity",get:function(){return this.persistenceType==Type.PersistenceType.ENTITY}},{key:"isMappedSuperclass",get:function(){return this.persistenceType==Type.PersistenceType.MAPPED_SUPERCLASS}},{key:"typeConstructor",get:function(){return this._typeConstructor},set:function(t){if(this._typeConstructor)throw new Error("typeConstructor has already been set.");this._typeConstructor=t}}]),Type.prototype.fromJsonValue=function(t,e,r){},Type.prototype.toJsonValue=function(t,e){},Type}();n.PersistenceType={BASIC:0,EMBEDDABLE:1,ENTITY:2,MAPPED_SUPERCLASS:3},e.exports=n},{}],52:[function(t,e,r){"use strict";var n=t(46);n.prototype.Attribute=t(37),n.prototype.BasicType=t(38),n.prototype.CollectionAttribute=t(39),n.prototype.EmbeddableType=t(41),n.prototype.EntityType=t(42),
n.prototype.ListAttribute=t(43),n.prototype.ManagedType=t(44),n.prototype.MapAttribute=t(45),n.prototype.Metamodel=t(46),n.prototype.ModelBuilder=t(47),n.prototype.PluralAttribute=t(48),n.prototype.SetAttribute=t(49),n.prototype.SingularAttribute=t(50),n.prototype.Type=t(51),n.prototype.DbIndex=t(40),r=e.exports=new n},{37:37,38:38,39:39,40:40,41:41,42:42,43:43,44:44,45:45,46:46,47:47,48:48,49:49,50:50,51:51}],53:[function(t,e,r){"use strict";var n=t(55),i=t(54),s=t(57),a=t(58),u=a.varargs,c=function(t){function Builder(e,r){return o.classCallCheck(this,Builder),o.possibleConstructorReturn(this,t.call(this,e,r))}return o.inherits(Builder,t),Builder.prototype.and=function(t){return this._addOperator("$and",u(0,arguments))},Builder.prototype.or=function(t){return this._addOperator("$or",u(0,arguments))},Builder.prototype.nor=function(t){return this._addOperator("$nor",u(0,arguments))},Builder.prototype.stream=function(t){return this.where({})._stream(t,this)},Builder.prototype.resultList=function(t,e,r){return this.where({}).resultList(t,e,r)},Builder.prototype.singleResult=function(t,e,r){return this.where({}).singleResult(t,e,r)},Builder.prototype.count=function(t,e){return this.where({}).count(t,e)},Builder.prototype._addOperator=function(t,e){if(e.length<2)throw new Error("Only two or more queries can be joined with an "+t+" operator.");return e.forEach(function(t,e){if(!(t instanceof a))throw new Error("Argument at index "+e+" is not a query.")}),new s(this.entityManager,this.resultClass,t,e)},Builder.prototype._addOrder=function(t,e){return new n(this.entityManager,this.resultClass)._addOrder(t,e)},Builder.prototype._addFilter=function(t,e,r){return new n(this.entityManager,this.resultClass)._addFilter(t,e,r)},Builder.prototype._addOffset=function(t){return new n(this.entityManager,this.resultClass)._addOffset(t)},Builder.prototype._addLimit=function(t){return new n(this.entityManager,this.resultClass)._addLimit(t)},Builder}(a);Object.assign(c.prototype,i),e.exports=c},{54:54,55:55,57:57,58:58}],54:[function(t,e,r){"use strict";var n=t(58).varargs,i={};Object.assign(i,{where:function(t){return this._addFilter(null,null,t)},equal:function(t,e){return this._addFilter(t,null,e)},notEqual:function(t,e){return this._addFilter(t,"$ne",e)},greaterThan:function(t,e){return this._addFilter(t,"$gt",e)},greaterThanOrEqualTo:function(t,e){return this._addFilter(t,"$gte",e)},lessThan:function(t,e){return this._addFilter(t,"$lt",e)},lessThanOrEqualTo:function(t,e){return this._addFilter(t,"$lte",e)},between:function(t,e,r){return this._addFilter(t,"$gt",e)._addFilter(t,"$lt",r)},in:function(t,e){return this._addFilter(t,"$in",n(1,arguments))},notIn:function(t,e){return this._addFilter(t,"$nin",n(1,arguments))},isNull:function(t){return this.equal(t,null)},isNotNull:function(t){return this._addFilter(t,"$exists",!0)._addFilter(t,"$ne",null)},containsAll:function(t,e){return this._addFilter(t,"$all",n(1,arguments))},mod:function(t,e,r){return this._addFilter(t,"$mod",[e,r])},matches:function(t,e){if(Object(e)instanceof RegExp||(e=new RegExp(e)),e.ignoreCase)throw new Error("RegExp.ignoreCase flag is not supported.");if(e.global)throw new Error("RegExp.global flag is not supported.");if(0!=e.source.indexOf("^"))throw new Error("regExp must be an anchored expression, i.e. it must be started with a ^.");var r=this._addFilter(t,"$regex",e.source);return e.multiline&&r._addFilter(t,"$options","m"),r},size:function(t,e){return this._addFilter(t,"$size",e)},near:function(t,e,r){return this._addFilter(t,"$nearSphere",{$geometry:{type:"Point",coordinates:[e.longitude,e.latitude]},$maxDistance:r})},withinPolygon:function(t,e){return e=n(1,arguments),this._addFilter(t,"$geoWithin",{$geometry:{type:"Polygon",coordinates:[e.map(function(t){return[t.longitude,t.latitude]})]}})}}),Object.assign(i,{eq:i.equal,ne:i.notEqual,lt:i.lessThan,le:i.lessThanOrEqualTo,gt:i.greaterThan,ge:i.greaterThanOrEqualTo,containsAny:i.in}),e.exports=i},{58:58}],55:[function(t,e,r){"use strict";var n=t(56),i=t(54),s=function(t){function Filter(e,r){o.classCallCheck(this,Filter);var n=o.possibleConstructorReturn(this,t.call(this,e,r));return n._filter={},n}return o.inherits(Filter,t),Filter.prototype._addFilter=function(t,e,r){if(null!==t){if(!(Object(t)instanceof String))throw new Error("Field must be a string.");if(e){var n=this._filter[t];n instanceof Object&&Object.getPrototypeOf(n)==Object.prototype||(this._filter[t]=n={}),n[e]=r}else this._filter[t]=r}else Object.assign(this._filter,r);return this},Filter.prototype.toJSON=function(){return this._filter},Filter}(n);Object.assign(s.prototype,i),e.exports=s},{54:54,56:56}],56:[function(t,e,r){"use strict";var n=t(58),i=t(36),s=t(63),a=t(10),u=function(t){function Node(e,r){o.classCallCheck(this,Node);var n=o.possibleConstructorReturn(this,t.call(this,e,r));return n.firstResult=0,n.maxResults=-1,n._sort={},n}return o.inherits(Node,t),Node.prototype.stream=function(t){return this._stream(t,this)},Node.prototype._stream=function(t,e){throw new Error("Streaming features not available! Please use Streaming SDK!")},Node.prototype.resultList=function(t,e,r){var o=this;t instanceof Function&&(r=e,e=t,t={});var s=this.resultClass?this.entityManager.metamodel.entity(this.resultClass):null;if(!s)throw new Error("Only typed queries can be executed.");var a,u=this._serializeQuery(),c=this._serializeSort(),l=this.entityManager._connector.host.length+u.length;return a=l>n.MAX_URI_SIZE?new i.AdhocQueryPOST(s.name,this.firstResult,this.maxResults,c).entity(u,"text"):new i.AdhocQuery(s.name,u,this.firstResult,this.maxResults,c),this.entityManager.send(a).then(function(e){return o._createResultList(e.entity,t)}).then(e,r)},Node.prototype.singleResult=function(t,e,r){var o=this;t instanceof Function&&(r=e,e=t,t={});var s=this.resultClass?this.entityManager.metamodel.entity(this.resultClass):null;if(!s)throw new Error("Only typed queries can be executed.");var a,u=this._serializeQuery(),c=this._serializeSort(),l=this.entityManager._connector.host.length+u.length;return a=l>n.MAX_URI_SIZE?new i.AdhocQueryPOST(s.name,u,this.firstResult,1,c).entity(u,"text"):new i.AdhocQuery(s.name,u,this.firstResult,1,c),this.entityManager.send(a).then(function(e){return o._createResultList(e.entity,t)}).then(function(t){return t.length?t[0]:null}).then(e,r)},Node.prototype.count=function(t,e){var r=this.resultClass?this.entityManager.metamodel.entity(this.resultClass):null;if(!r)throw new Error("Only typed queries can be executed.");var o,s=this._serializeQuery(),a=this.entityManager._connector.host.length+s.length;return o=a>n.MAX_URI_SIZE?new i.AdhocCountQueryPOST(r.name).entity(s,"text"):new i.AdhocCountQuery(r.name,s),this.entityManager.send(o).then(function(t){return t.entity.count}).then(t,e)},Node.prototype._serializeQuery=function(){return JSON.stringify(this,function(t,e){var r=this[t];return Object(r)instanceof Date?{$date:e}:r instanceof a?r.id:e})},Node.prototype._serializeSort=function(){return JSON.stringify(this._sort)},Node.prototype._createResultList=function(t,e){return t.length?Promise.all(t.map(function(t){if(t.id){var r=this.entityManager.getReference(this.resultClass,t.id),n=s.get(r);return n.setJson(t,!0),this.entityManager.resolveDepth(r,e)}return this.entityManager.load(Object.keys(t)[0])},this)).then(function(t){return t.filter(function(t){return!!t})}):Promise.resolve([])},Node.prototype._addOrder=function(t,e){return e?this._sort[t]=e:this._sort=t,this},Node.prototype._addOffset=function(t){return this.firstResult=t,this},Node.prototype._addLimit=function(t){return this.maxResults=t,this},Node}(n);e.exports=u},{10:10,36:36,58:58,63:63}],57:[function(t,e,r){"use strict";var n=t(56),i=function(t){function Operator(e,r,n,i){o.classCallCheck(this,Operator);var s=o.possibleConstructorReturn(this,t.call(this,e,r));return s._operator=n,s._childs=i,s}return o.inherits(Operator,t),Operator.prototype.toJSON=function(){var t={};return t[this._operator]=this._childs,t},Operator}(n);e.exports=i},{56:56}],58:[function(t,e,r){"use strict";var n=function(){function Query(t,e){o.classCallCheck(this,Query),this.entityManager=t,this.resultClass=e}return Query.prototype.ascending=function(t){return this._addOrder(t,1)},Query.prototype.descending=function(t){return this._addOrder(t,-1)},Query.prototype.sort=function(t){if(!(t instanceof Object)||Object.getPrototypeOf(t)!=Object.prototype)throw new Error("sort must be an object.");return this._addOrder(t)},Query.prototype.offset=function(t){if(t<0)throw new Error("The offset can't be nagative.");return this._addOffset(t)},Query.prototype.limit=function(t){if(t<0)throw new Error("The limit can't be nagative.");return this._addLimit(t)},Query.prototype.resultList=function(t,e,r){},Query.prototype.singleResult=function(t,e,r){},Query.prototype.stream=function(t){},Query.prototype.count=function(t,e){},Query}();n.MAX_URI_SIZE=2e3,n.varargs=function(t,e){return Array.prototype.concat.apply([],Array.prototype.slice.call(e,t))},e.exports=n},{}],59:[function(t,e,r){"use strict";r.Builder=t(53),r.Condition=t(54),r.Filter=t(55),r.Node=t(56),r.Operator=t(57),r.Query=t(58)},{53:53,54:54,55:55,56:56,57:57,58:58}],60:[function(t,e,r){"use strict";var n=t(36),i=t(25).StatusCode,s=function(){function Code(t,e){o.classCallCheck(this,Code),this._metamodel=t,this.entityManagerFactory=e}return Code.prototype.functionToString=function(t){if(!t)return"";var e=t.toString();return e=e.substring(e.indexOf("{")+1,e.lastIndexOf("}")),"\n"==e.charAt(0)&&(e=e.substring(1)),"\n"==e.charAt(e.length-1)&&(e=e.substring(0,e.length-1)),e},Code.prototype.stringToFunction=function(t,e){return new Function(t,e)},Code.prototype.loadModules=function(){var t=new n.GetAllModules;return this.entityManagerFactory.send(t).then(function(t){return t.entity})},Code.prototype.loadCode=function(t,e,r){var o=this,s=Object(t)instanceof String?t:t.name,a=new n.GetBaqendCode(s,e).responseType("text");return this.entityManagerFactory.send(a).then(function(t){return o._parseCode(s,e,r,t.entity)},function(t){if(t.status==i.OBJECT_NOT_FOUND)return null;throw t})},Code.prototype.saveCode=function(t,e,r){var i=this,o=Object(t)instanceof String?t:t.name,s=r instanceof Function,a=new n.SetBaqendCode(o,e).entity(s?this.functionToString(r):r,"text").responseType("text");return this.entityManagerFactory.send(a).then(function(t){return i._parseCode(o,e,s,t.entity)})},Code.prototype.deleteCode=function(t,e){var r=this,i=Object(t)instanceof String?t:t.name,o=new n.DeleteBaqendCode(i,e);return this.entityManagerFactory.send(o).then(function(){return r._parseCode(i,e,!1,null)})},Code.prototype._parseCode=function(t,e,r,n){if("validate"==e){var i=this._metamodel.entity(t);return i.validationCode=n,r?i.validationCode:n}return r?this.stringToFunction(["module","exports"],n):n},Code}();e.exports=s},{25:25,36:36}],61:[function(t,e,r){"use strict";var n=function(){function Lockable(){o.classCallCheck(this,Lockable),this._isLocked=!1,this._readyPromise=Promise.resolve(this),this._deferred=null}return Lockable.prototype.ready=function(t,e){return this._readyPromise.then(t,e)},Lockable.prototype.withLock=function(t,e){if(this._isLocked)throw new Error("Current operation has not been finished.");var r=this;try{this._isLocked=!0;var n=t().then(function(t){return r._isLocked=!1,t},function(t){throw e||(r._isLocked=!1),t});return this._readyPromise=n.then(function(){return r},function(t){if(!e)return r;throw t}),n}catch(t){throw e?this._readyPromise=Promise.reject(t):this._isLocked=!1,t}},o.createClass(Lockable,[{key:"isReady",get:function(){return!this._isLocked}}]),Lockable}();e.exports=n},{}],62:[function(t,e,r){"use strict";var n=t(36),i=(t(25).StatusCode,function(){function Logger(){o.classCallCheck(this,Logger)}return Logger.create=function(t){function Logger(){e.log.apply(Logger,arguments)}for(var e=this.prototype,r=Object.getOwnPropertyNames(e),n=Array.isArray(r),i=0,r=n?r:r[Symbol.iterator]();;){var o;if(n){if(i>=r.length)break;o=r[i++]}else{if(i=r.next(),i.done)break;o=i.value}var s=o;Object.defineProperty(Logger,s,Object.getOwnPropertyDescriptor(e,s))}return Logger._init(t),Logger},Logger.prototype.log=function(t,e,r){var n=Array.prototype.slice.call(arguments);if(t=Logger.LEVELS.indexOf(n[0])==-1?"info":n.shift(),!(this.levelIndex>Logger.LEVELS.indexOf(t)))return e="string"==typeof n[0]?this._format(n.shift(),n):"[no message]",r=null,n.length&&"object"===o.typeof(n[n.length-1])&&(r=n.pop(),Array.isArray(r)&&(r={data:r})),n.length&&(e+=", "+n.join(", ")),this._log({date:new Date,message:e,level:t,user:this.entityManager.me&&this.entityManager.me.id,data:r})},Logger.prototype._format=function(t,e){if(0==e.length)return t;var r=String(t).replace(Logger.FORMAT_REGEXP,function(t){if("%%"===t)return"%";if(!e.length)return t;switch(t){case"%s":return String(e.shift());case"%d":return Number(e.shift());case"%j":try{return JSON.stringify(e.shift())}catch(t){return"[Circular]"}default:return t}});return r},Logger.prototype._init=function(t){var e=this;this.entityManager=t,this.levelIndex=2,Logger.LEVELS.forEach(function(t){e[t]=e.log.bind(e,t)})},Logger.prototype._log=function(t){return this.entityManager.isReady?this.entityManager.send(new n.CreateObject("logs.AppLog",t)):this.entityManager.ready(this._log.bind(this,t))},o.createClass(Logger,[{key:"level",get:function(){return Logger.LEVELS[this.levelIndex]},set:function(t){var e=Logger.LEVELS.indexOf(t);if(e==-1)throw new Error("Unknown logging level "+t);this.levelIndex=e}}]),Logger}());Object.assign(i,{LEVELS:["trace","debug","info","warn","error"],FORMAT_REGEXP:/%[sdj%]/g}),e.exports=i},{25:25,36:36}],63:[function(t,e,r){"use strict";var n=t(34),i=t(1),s=t(61),a=(t(20),function(e){function Metadata(t,r){o.classCallCheck(this,Metadata);var n=o.possibleConstructorReturn(this,e.call(this));return n._root=t,n._state=Metadata.Type.DIRTY,n._enabled=!0,n.persisting=!1,n.id=null,n.version=null,n.type=r,n.acl=new i(n),n}return o.inherits(Metadata,e),Metadata.create=function(t,e){var r;if(t.isEntity)r=new Metadata(e,t);else{if(!t.isEmbeddable)throw new Error("Illegal type "+t);r={type:t,readAccess:function(){var t=this._root&&this._root._metadata;t&&t.readAccess()},writeAccess:function(){var t=this._root&&this._root._metadata;t&&t.writeAccess()}}}return r},Metadata.get=function(t){return t._metadata},o.createClass(Metadata,[{key:"db",get:function(){return this._db?this._db:this._db=t(6)},set:function(t){if(this._db)throw new Error("DB has already been set.");this._db=t}},{key:"bucket",get:function(){return this.type.name}},{key:"key",get:function(){if(!this._key&&this.id){var t=this.id.lastIndexOf("/");this._key=decodeURIComponent(this.id.substring(t+1))}return this._key},set:function(t){if(t+="",this.id)throw new Error("The id can't be set twice.");this.id="/db/"+this.bucket+"/"+encodeURIComponent(t),this._key=t}},{key:"isAttached",get:function(){return!!this._db}},{key:"isAvailable",get:function(){return this._state>Metadata.Type.UNAVAILABLE}},{key:"isPersistent",get:function(){return this._state==Metadata.Type.PERSISTENT}},{key:"isDirty",get:function(){return this._state==Metadata.Type.DIRTY}}]),Metadata.prototype.readAccess=function(){if(this._enabled&&!this.isAvailable)throw new n.PersistentError("This object "+this.id+" is not available.")},Metadata.prototype.writeAccess=function(){if(this._enabled){if(!this.isAvailable)throw new n.PersistentError("This object "+this.id+" is not available.");this.setDirty()}},Metadata.prototype.setUnavailable=function(){this._state=Metadata.Type.UNAVAILABLE},Metadata.prototype.setPersistent=function(){this._state=Metadata.Type.PERSISTENT},Metadata.prototype.setDirty=function(){this._state=Metadata.Type.DIRTY},Metadata.prototype.setRemoved=function(){this.isAvailable&&(this.setDirty(),this.version=null)},Metadata.prototype.getJsonMetadata=function(){var t={};return this.id&&(t.id=this.id),this.version&&(t.version=this.version),t.acl=this.acl,t},Metadata.prototype.setJsonMetadata=function(t){this.id||(this.id=t.id),t.version&&(this.version=t.version),this.acl.fromJSON(t.acl||{})},Metadata.prototype.getJson=function(t,e){this._enabled=!1,this.persisting=!!e;var r=this.type.toJsonValue(this,this._root,!0);return this._enabled=!0,this.persisting=!1,this.isAttached&&!t&&Object.assign(r,this.getJsonMetadata()),r},Metadata.prototype.setJson=function(t,e){(t.id||t.version||t.acl)&&this.setJsonMetadata(t),this._enabled=!1,this.persisting=!!e,this.type.fromJsonValue(this,t,this._root,!0),this._enabled=!0,this.persisting=!1,e?this.setPersistent():this.setDirty()},Metadata}(s));a.Type={UNAVAILABLE:-1,PERSISTENT:0,DIRTY:1},e.exports=a},{1:1,20:20,34:34,6:6,61:61}],64:[function(t,e,r){"use strict";var n=t(36),i=function(){function Modules(t,e){o.classCallCheck(this,Modules),this._entityManager=t,this._connector=e}return Modules.prototype.get=function(t,e,r,i,o){e instanceof Function&&(o=r,i=e,r={},e=null),r instanceof Function&&(o=i,i=r,r={}),r=r||{};var s=new n.GetBaqendModule(t).addQueryString(e).responseType(r.responseType||null);return this._send(s,i,o)},Modules.prototype.post=function(t,e,r,i,o){r instanceof Function&&(o=i,i=r,r={}),r=r||{};var s=new n.PostBaqendModule(t).entity(e,r.requestType).mimeType(r.mimeType||null).responseType(r.responseType||null);return this._send(s,i,o)},Modules.prototype._send=function(t,e,r){return this._entityManager.send(t).then(function(t){return t.entity}).then(e,r)},Modules}();e.exports=i},{36:36}],65:[function(t,e,r){"use strict";var n=function(){function Permission(t){o.classCallCheck(this,Permission),this._rules={},this._metadata=t}return Permission.prototype.allRules=function(){return Object.keys(this._rules)},Permission.prototype.clear=function(){this._metadata&&this._metadata.writeAccess(),this._rules={}},Permission.prototype.copy=function(t){return this._metadata&&this._metadata.writeAccess(),this._rules=Object.assign({},t._rules),this},Permission.prototype.isPublicAllowed=function(){if("*"in this._rules)return!1;for(var t in this._rules)if("allow"==this._rules[t])return!1;return!0},Permission.prototype.setPublicAllowed=function(){this._metadata&&this._metadata.writeAccess();for(var t in this._rules)"allow"==this._rules[t]&&delete this._rules[t]},Permission.prototype.getRule=function(t){return this._rules[this._getRef(t)]},Permission.prototype.isAllowed=function(t){return"allow"==this._rules[this._getRef(t)]},Permission.prototype.isDenied=function(t){return"deny"==this._rules[this._getRef(t)]},Permission.prototype.allowAccess=function(t){var e=arguments;this._metadata&&this._metadata.writeAccess();for(var r=0;r<e.length;r++)this._rules[this._getRef(e[r])]="allow";return this},Permission.prototype.denyAccess=function(t){var e=arguments;this._metadata&&this._metadata.writeAccess();for(var r=0;r<e.length;r++)this._rules[this._getRef(e[r])]="deny";return this},Permission.prototype.deleteAccess=function(t){var e=arguments;this._metadata&&this._metadata.writeAccess();for(var r=0;r<e.length;r++)delete this._rules[this._getRef(e[r])];return this},Permission.prototype.toJSON=function(){return this._rules},Permission.prototype.fromJSON=function(t){this._rules=t},Permission.fromJSON=function(t){var e=new this;return e.fromJSON(t),e},Permission.prototype._getRef=function(t){if("string"!=typeof t&&(t=t._metadata.id),0==t.indexOf("/db/User/")||0==t.indexOf("/db/Role/"))return t;throw new TypeError("The given object isn't a user, role or a valid reference.")},Permission}();n.BASE_PERMISSIONS=["load","update","delete","query","insert"],e.exports=n},{}],66:[function(t,e,r){"use strict";var n=t(10),i=function(){function PushMessage(t,e,r,i,s,a){if(o.classCallCheck(this,PushMessage),this.devices=null,t instanceof Set)this.devices=t;else if(!t||t[Symbol.iterator])this.devices=new Set(t);else{if(!(t instanceof n))throw new Error("Only Sets, Lists and Arrays can be used as devices.");this.devices=new Set,this.devices.add(t)}this.message=e,this.subject=r,this.sound=i,this.badge=s,this.data=a}return PushMessage.prototype.addDevice=function(t){this.devices||(this.devices=new Set),this.devices.add(t)},PushMessage.prototype.toJSON=function(){if(!this.devices||!this.devices.size)throw new Error("Set of devices is empty.");return Object.assign({},this,{devices:Array.from(this.devices,function(t){return t.id})})},PushMessage}();e.exports=i},{10:10}],67:[function(t,e,r){"use strict";var n=t(71).hmac,i=function(){function TokenStorage(t,e,r){o.classCallCheck(this,TokenStorage),this._token=e||null,this._origin=t,this.temporary=r}return TokenStorage.create=function(t){return Promise.resolve(new TokenStorage(t))},o.createClass(TokenStorage,[{key:"token",get:function(){return this._token}}]),TokenStorage.prototype._saveToken=function(t,e,r){},TokenStorage.prototype.update=function(t){this._token=t,this._saveToken(this._origin,this._token,this.temporary)},TokenStorage.prototype.signPath=function(t){var e=this.token;if(e){var r=e.substring(0,e.length-40),i=e.substring(r.length),o=t.split("/").map(encodeURIComponent).join("/");return o+"?BAT="+(r+n(t+r,i))}return t},TokenStorage}(),s={},a=function(t){function GlobalStorage(){return o.classCallCheck(this,GlobalStorage),o.possibleConstructorReturn(this,t.apply(this,arguments))}return o.inherits(GlobalStorage,t),GlobalStorage.create=function(t){return Promise.resolve(new GlobalStorage(t,s[t]))},GlobalStorage.prototype._saveToken=function(t,e,r){r||(e?s[t]=e:delete s[t])},GlobalStorage}(i);i.GLOBAL=a;var u=function(t){function WebStorage(){return o.classCallCheck(this,WebStorage),o.possibleConstructorReturn(this,t.apply(this,arguments))}return o.inherits(WebStorage,t),WebStorage.isAvailable=function(){try{return"undefined"!=typeof localStorage&&(localStorage.setItem("bq_webstorage_test","bq"),localStorage.removeItem("bq_webstorage_test"),!0)}catch(t){}return!1},WebStorage.create=function(t){var e=!1,r=localStorage.getItem("BAT:"+t);return r||(r=sessionStorage.getItem("BAT:"+t),e=!!r),Promise.resolve(new WebStorage(t,r,e))},WebStorage.prototype._saveToken=function(t,e,r){var n=r?sessionStorage:localStorage;e?n.setItem("BAT:"+t,e):n.removeItem("BAT:"+t)},WebStorage}(i);u.isAvailable()&&(i.WEB_STORAGE=u),e.exports=i},{71:71}],68:[function(t,e,r){"use strict";var n=function(){function ValidationResult(){o.classCallCheck(this,ValidationResult),this.fields={}}return o.createClass(ValidationResult,[{key:"isValid",get:function(){for(var t in this.fields)if(!this.fields[t].isValid)return!1;return!0}}]),ValidationResult.prototype.toJSON=function(){var t={};for(var e in this.fields)t[e]=this.fields[e].toJSON();return t},ValidationResult}();e.exports=n},{}],69:[function(t,e,r){"use strict";var n=t(162),i=(t(68),function(){function Validator(t,e){o.classCallCheck(this,Validator),this.key=t,this._entity=e,this.errors=[]}return Validator.compile=function(t,e){for(var r=[],n=t.attributes(),i=Array.isArray(n),o=0,n=i?n:n[Symbol.iterator]();;){var s;if(i){if(o>=n.length)break;s=n[o++]}else{if(o=n.next(),o.done)break;s=o.value}var a=s;r.push(a.name)}var u=new Function(r,e);return function(t){var e=r.map(function(e){return t[e]});return u.apply({},e)}},Validator.prototype.is=function(t,e){return t instanceof Function&&(e=t,t="is"),e(this.value,n)===!1&&this.errors.push(t),this},o.createClass(Validator,[{key:"value",get:function(){return this._entity[this.key]}},{key:"isValid",get:function(){return 0==this.errors.length}}]),Validator.prototype._callMethod=function(t,e,r){return r=r||[],r.unshift(this.value),n[t].apply(this,r)===!1&&this.errors.push(e),this},Validator.prototype.toString=function(){return this.value},Validator.prototype.toJSON=function(){return{isValid:this.isValid,errors:this.errors}},Validator}());Object.keys(n).forEach(function(t){"function"==typeof n[t]&&"toString"!==t&&"toDate"!==t&&"extend"!==t&&"init"!==t&&(i.prototype[t]=function(e){return this._callMethod(t,e||t,Array.prototype.slice.call(arguments,e?1:0))})}),e.exports=i},{162:162,68:68}],70:[function(t,e,r){"use strict";e.exports=r=t(71),r.Metadata=t(63),r.Permission=t(65),r.Validator=t(69),r.ValidationResult=t(68),r.Code=t(60),r.Modules=t(64),r.Lockable=t(61),r.Logger=t(62),r.PushMessage=t(66),r.TokenStorage=t(67),r.uuid=t(160)},{160:160,60:60,61:61,62:62,63:63,64:64,65:65,66:66,67:67,68:68,69:69,71:71}],71:[function(t,e,r){"use strict";r.hmac=t(155),r.atob=window.atob,r.isNode=!1},{155:155}],72:[function(t,e,r){e.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},{}],73:[function(t,e,r){var n=t(144)("unscopables"),i=Array.prototype;void 0==i[n]&&t(94)(i,n,{}),e.exports=function(t){i[n][t]=!0}},{144:144,94:94}],74:[function(t,e,r){e.exports=function(t,e,r,n){if(!(t instanceof e)||void 0!==n&&n in t)throw TypeError(r+": incorrect invocation!");return t}},{}],75:[function(t,e,r){var n=t(102);e.exports=function(t){if(!n(t))throw TypeError(t+" is not an object!");return t}},{102:102}],76:[function(t,e,r){var n=t(137),i=t(138),o=t(135);e.exports=function(t){return function(e,r,s){var a,u=n(e),c=i(u.length),l=o(s,c);if(t&&r!=r){for(;c>l;)if(a=u[l++],a!=a)return!0}else for(;c>l;l++)if((t||l in u)&&u[l]===r)return t||l||0;return!t&&-1}}},{135:135,137:137,138:138}],77:[function(t,e,r){var n=t(78),i=t(144)("toStringTag"),o="Arguments"==n(function(){return arguments}()),s=function(t,e){try{return t[e]}catch(t){}};e.exports=function(t){var e,r,a;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(r=s(e=Object(t),i))?r:o?n(e):"Object"==(a=n(e))&&"function"==typeof e.callee?"Arguments":a}},{144:144,78:78}],78:[function(t,e,r){var n={}.toString;e.exports=function(t){return n.call(t).slice(8,-1)}},{}],79:[function(t,e,r){"use strict";var n=t(115).f,i=t(114),o=t(126),s=t(83),a=t(74),u=t(84),c=t(91),l=t(105),f=t(107),h=t(129),p=t(85),d=t(111).fastKey,y=p?"_s":"size",g=function(t,e){var r,n=d(e);if("F"!==n)return t._i[n];for(r=t._f;r;r=r.n)if(r.k==e)return r};e.exports={getConstructor:function(t,e,r,l){var f=t(function(t,n){a(t,f,e,"_i"),t._i=i(null),t._f=void 0,t._l=void 0,t[y]=0,void 0!=n&&c(n,r,t[l],t)});return o(f.prototype,{clear:function(){for(var t=this,e=t._i,r=t._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete e[r.i];t._f=t._l=void 0,t[y]=0},delete:function(t){var e=this,r=g(e,t);if(r){var n=r.n,i=r.p;delete e._i[r.i],r.r=!0,i&&(i.n=n),n&&(n.p=i),e._f==r&&(e._f=n),e._l==r&&(e._l=i),e[y]--}return!!r},forEach:function(t){a(this,f,"forEach");for(var e,r=s(t,arguments.length>1?arguments[1]:void 0,3);e=e?e.n:this._f;)for(r(e.v,e.k,this);e&&e.r;)e=e.p},has:function(t){return!!g(this,t)}}),p&&n(f.prototype,"size",{get:function(){return u(this[y])}}),f},def:function(t,e,r){var n,i,o=g(t,e);return o?o.v=r:(t._l=o={i:i=d(e,!0),k:e,v:r,p:n=t._l,n:void 0,r:!1},t._f||(t._f=o),n&&(n.n=o),t[y]++,"F"!==i&&(t._i[i]=o)),t},getEntry:g,setStrong:function(t,e,r){l(t,e,function(t,e){this._t=t,this._k=e,this._l=void 0},function(){for(var t=this,e=t._k,r=t._l;r&&r.r;)r=r.p;return t._t&&(t._l=r=r?r.n:t._t._f)?"keys"==e?f(0,r.k):"values"==e?f(0,r.v):f(0,[r.k,r.v]):(t._t=void 0,f(1))},r?"entries":"values",!r,!0),h(e)}}},{105:105,107:107,111:111,114:114,115:115,126:126,129:129,74:74,83:83,84:84,85:85,91:91}],80:[function(t,e,r){"use strict";var n=t(92),i=t(89),o=t(127),s=t(126),a=t(111),u=t(91),c=t(74),l=t(102),f=t(90),h=t(106),p=t(130),d=t(97);e.exports=function(t,e,r,y,g,b){var v=n[t],m=v,_=g?"set":"add",w=m&&m.prototype,E={},T=function(t){var e=w[t];o(w,t,"delete"==t?function(t){return!(b&&!l(t))&&e.call(this,0===t?0:t)}:"has"==t?function(t){return!(b&&!l(t))&&e.call(this,0===t?0:t)}:"get"==t?function(t){return b&&!l(t)?void 0:e.call(this,0===t?0:t)}:"add"==t?function(t){return e.call(this,0===t?0:t),this}:function(t,r){return e.call(this,0===t?0:t,r),this})};if("function"==typeof m&&(b||w.forEach&&!f(function(){(new m).entries().next()}))){var A=new m,S=A[_](b?{}:-0,1)!=A,k=f(function(){A.has(1)}),C=h(function(t){new m(t)}),O=!b&&f(function(){for(var t=new m,e=5;e--;)t[_](e,e);return!t.has(-0)});C||(m=e(function(e,r){c(e,m,t);var n=d(new v,e,m);return void 0!=r&&u(r,g,n[_],n),n}),m.prototype=w,w.constructor=m),(k||O)&&(T("delete"),T("has"),g&&T("get")),(O||S)&&T(_),b&&w.clear&&delete w.clear}else m=y.getConstructor(e,t,g,_),s(m.prototype,r),a.NEED=!0;return p(m,t),E[t]=m,i(i.G+i.W+i.F*(m!=v),E),b||y.setStrong(m,t,g),m}},{102:102,106:106,111:111,126:126,127:127,130:130,74:74,89:89,90:90,91:91,92:92,97:97}],81:[function(t,e,r){var n=e.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},{}],82:[function(t,e,r){"use strict";var n=t(115),i=t(125);e.exports=function(t,e,r){e in t?n.f(t,e,i(0,r)):t[e]=r}},{115:115,125:125}],83:[function(t,e,r){var n=t(72);e.exports=function(t,e,r){if(n(t),void 0===e)return t;switch(r){case 1:return function(r){return t.call(e,r)};case 2:return function(r,n){return t.call(e,r,n)};case 3:return function(r,n,i){return t.call(e,r,n,i)}}return function(){return t.apply(e,arguments)}}},{72:72}],84:[function(t,e,r){e.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},{}],85:[function(t,e,r){e.exports=!t(90)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},{90:90}],86:[function(t,e,r){var n=t(102),i=t(92).document,o=n(i)&&n(i.createElement);e.exports=function(t){return o?i.createElement(t):{}}},{102:102,92:92}],87:[function(t,e,r){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},{}],88:[function(t,e,r){var n=t(123),i=t(120),o=t(124);e.exports=function(t){var e=n(t),r=i.f;if(r)for(var s,a=r(t),u=o.f,c=0;a.length>c;)u.call(t,s=a[c++])&&e.push(s);return e}},{120:120,123:123,124:124}],89:[function(t,e,r){var n=t(92),i=t(81),o=t(94),s=t(127),a=t(83),u="prototype",c=function(t,e,r){var l,f,h,p,d=t&c.F,y=t&c.G,g=t&c.S,b=t&c.P,v=t&c.B,m=y?n:g?n[e]||(n[e]={}):(n[e]||{})[u],_=y?i:i[e]||(i[e]={}),w=_[u]||(_[u]={});y&&(r=e);for(l in r)f=!d&&m&&void 0!==m[l],h=(f?m:r)[l],p=v&&f?a(h,n):b&&"function"==typeof h?a(Function.call,h):h,m&&s(m,l,h,t&c.U),_[l]!=h&&o(_,l,p),b&&w[l]!=h&&(w[l]=h)};n.core=i,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,e.exports=c},{127:127,81:81,83:83,92:92,94:94}],90:[function(t,e,r){e.exports=function(t){try{return!!t()}catch(t){return!0}}},{}],91:[function(t,e,r){var n=t(83),i=t(103),o=t(100),s=t(75),a=t(138),u=t(145),c={},l={},r=e.exports=function(t,e,r,f,h){var p,d,y,g,b=h?function(){return t}:u(t),v=n(r,f,e?2:1),m=0;if("function"!=typeof b)throw TypeError(t+" is not iterable!");if(o(b)){for(p=a(t.length);p>m;m++)if(g=e?v(s(d=t[m])[0],d[1]):v(t[m]),g===c||g===l)return g}else for(y=b.call(t);!(d=y.next()).done;)if(g=i(y,v,d.value,e),g===c||g===l)return g};r.BREAK=c,r.RETURN=l},{100:100,103:103,138:138,145:145,75:75,83:83}],92:[function(t,e,r){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},{}],93:[function(t,e,r){var n={}.hasOwnProperty;e.exports=function(t,e){return n.call(t,e)}},{}],94:[function(t,e,r){var n=t(115),i=t(125);e.exports=t(85)?function(t,e,r){return n.f(t,e,i(1,r))}:function(t,e,r){return t[e]=r,t}},{115:115,125:125,85:85}],95:[function(t,e,r){e.exports=t(92).document&&document.documentElement},{92:92}],96:[function(t,e,r){e.exports=!t(85)&&!t(90)(function(){return 7!=Object.defineProperty(t(86)("div"),"a",{get:function(){return 7}}).a})},{85:85,86:86,90:90}],97:[function(t,e,r){var n=t(102),i=t(128).set;e.exports=function(t,e,r){var o,s=e.constructor;return s!==r&&"function"==typeof s&&(o=s.prototype)!==r.prototype&&n(o)&&i&&i(t,o),t}},{102:102,128:128}],98:[function(t,e,r){e.exports=function(t,e,r){var n=void 0===r;switch(e.length){case 0:return n?t():t.call(r);case 1:return n?t(e[0]):t.call(r,e[0]);case 2:return n?t(e[0],e[1]):t.call(r,e[0],e[1]);case 3:return n?t(e[0],e[1],e[2]):t.call(r,e[0],e[1],e[2]);case 4:return n?t(e[0],e[1],e[2],e[3]):t.call(r,e[0],e[1],e[2],e[3])}return t.apply(r,e)}},{}],99:[function(t,e,r){
var n=t(78);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==n(t)?t.split(""):Object(t)}},{78:78}],100:[function(t,e,r){var n=t(108),i=t(144)("iterator"),o=Array.prototype;e.exports=function(t){return void 0!==t&&(n.Array===t||o[i]===t)}},{108:108,144:144}],101:[function(t,e,r){var n=t(78);e.exports=Array.isArray||function(t){return"Array"==n(t)}},{78:78}],102:[function(t,e,r){e.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},{}],103:[function(t,e,r){var n=t(75);e.exports=function(t,e,r,i){try{return i?e(n(r)[0],r[1]):e(r)}catch(e){var o=t.return;throw void 0!==o&&n(o.call(t)),e}}},{75:75}],104:[function(t,e,r){"use strict";var n=t(114),i=t(125),o=t(130),s={};t(94)(s,t(144)("iterator"),function(){return this}),e.exports=function(t,e,r){t.prototype=n(s,{next:i(1,r)}),o(t,e+" Iterator")}},{114:114,125:125,130:130,144:144,94:94}],105:[function(t,e,r){"use strict";var n=t(110),i=t(89),o=t(127),s=t(94),a=t(93),u=t(108),c=t(104),l=t(130),f=t(121),h=t(144)("iterator"),p=!([].keys&&"next"in[].keys()),d="@@iterator",y="keys",g="values",b=function(){return this};e.exports=function(t,e,r,v,m,_,w){c(r,e,v);var E,T,A,S=function(t){if(!p&&t in x)return x[t];switch(t){case y:return function(){return new r(this,t)};case g:return function(){return new r(this,t)}}return function(){return new r(this,t)}},k=e+" Iterator",C=m==g,O=!1,x=t.prototype,P=x[h]||x[d]||m&&x[m],M=P||S(m),B=m?C?S("entries"):M:void 0,F="Array"==e?x.entries||P:P;if(F&&(A=f(F.call(new t)),A!==Object.prototype&&(l(A,k,!0),n||a(A,h)||s(A,h,b))),C&&P&&P.name!==g&&(O=!0,M=function(){return P.call(this)}),n&&!w||!p&&!O&&x[h]||s(x,h,M),u[e]=M,u[k]=b,m)if(E={values:C?M:S(g),keys:_?M:S(y),entries:B},w)for(T in E)T in x||o(x,T,E[T]);else i(i.P+i.F*(p||O),e,E);return E}},{104:104,108:108,110:110,121:121,127:127,130:130,144:144,89:89,93:93,94:94}],106:[function(t,e,r){var n=t(144)("iterator"),i=!1;try{var o=[7][n]();o.return=function(){i=!0},Array.from(o,function(){throw 2})}catch(t){}e.exports=function(t,e){if(!e&&!i)return!1;var r=!1;try{var o=[7],s=o[n]();s.next=function(){return{done:r=!0}},o[n]=function(){return s},t(o)}catch(t){}return r}},{144:144}],107:[function(t,e,r){e.exports=function(t,e){return{value:e,done:!!t}}},{}],108:[function(t,e,r){e.exports={}},{}],109:[function(t,e,r){var n=t(123),i=t(137);e.exports=function(t,e){for(var r,o=i(t),s=n(o),a=s.length,u=0;a>u;)if(o[r=s[u++]]===e)return r}},{123:123,137:137}],110:[function(t,e,r){e.exports=!1},{}],111:[function(t,e,r){var n=t(141)("meta"),i=t(102),o=t(93),s=t(115).f,a=0,u=Object.isExtensible||function(){return!0},c=!t(90)(function(){return u(Object.preventExtensions({}))}),l=function(t){s(t,n,{value:{i:"O"+ ++a,w:{}}})},f=function(t,e){if(!i(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,n)){if(!u(t))return"F";if(!e)return"E";l(t)}return t[n].i},h=function(t,e){if(!o(t,n)){if(!u(t))return!0;if(!e)return!1;l(t)}return t[n].w},p=function(t){return c&&d.NEED&&u(t)&&!o(t,n)&&l(t),t},d=e.exports={KEY:n,NEED:!1,fastKey:f,getWeak:h,onFreeze:p}},{102:102,115:115,141:141,90:90,93:93}],112:[function(t,e,r){var n=t(92),i=t(134).set,o=n.MutationObserver||n.WebKitMutationObserver,s=n.process,a=n.Promise,u="process"==t(78)(s);e.exports=function(){var t,e,r,c=function(){var n,i;for(u&&(n=s.domain)&&n.exit();t;){i=t.fn,t=t.next;try{i()}catch(n){throw t?r():e=void 0,n}}e=void 0,n&&n.enter()};if(u)r=function(){s.nextTick(c)};else if(o){var l=!0,f=document.createTextNode("");new o(c).observe(f,{characterData:!0}),r=function(){f.data=l=!l}}else if(a&&a.resolve){var h=a.resolve();r=function(){h.then(c)}}else r=function(){i.call(n,c)};return function(n){var i={fn:n,next:void 0};e&&(e.next=i),t||(t=i,r()),e=i}}},{134:134,78:78,92:92}],113:[function(t,e,r){"use strict";var n=t(123),i=t(120),o=t(124),s=t(139),a=t(99),u=Object.assign;e.exports=!u||t(90)(function(){var t={},e={},r=Symbol(),n="abcdefghijklmnopqrst";return t[r]=7,n.split("").forEach(function(t){e[t]=t}),7!=u({},t)[r]||Object.keys(u({},e)).join("")!=n})?function(t,e){for(var r=s(t),u=arguments.length,c=1,l=i.f,f=o.f;u>c;)for(var h,p=a(arguments[c++]),d=l?n(p).concat(l(p)):n(p),y=d.length,g=0;y>g;)f.call(p,h=d[g++])&&(r[h]=p[h]);return r}:u},{120:120,123:123,124:124,139:139,90:90,99:99}],114:[function(t,e,r){var n=t(75),i=t(116),o=t(87),s=t(131)("IE_PROTO"),a=function(){},u="prototype",c=function(){var e,r=t(86)("iframe"),n=o.length,i="<",s=">";for(r.style.display="none",t(95).appendChild(r),r.src="javascript:",e=r.contentWindow.document,e.open(),e.write(i+"script"+s+"document.F=Object"+i+"/script"+s),e.close(),c=e.F;n--;)delete c[u][o[n]];return c()};e.exports=Object.create||function(t,e){var r;return null!==t?(a[u]=n(t),r=new a,a[u]=null,r[s]=t):r=c(),void 0===e?r:i(r,e)}},{116:116,131:131,75:75,86:86,87:87,95:95}],115:[function(t,e,r){var n=t(75),i=t(96),o=t(140),s=Object.defineProperty;r.f=t(85)?Object.defineProperty:function(t,e,r){if(n(t),e=o(e,!0),n(r),i)try{return s(t,e,r)}catch(t){}if("get"in r||"set"in r)throw TypeError("Accessors not supported!");return"value"in r&&(t[e]=r.value),t}},{140:140,75:75,85:85,96:96}],116:[function(t,e,r){var n=t(115),i=t(75),o=t(123);e.exports=t(85)?Object.defineProperties:function(t,e){i(t);for(var r,s=o(e),a=s.length,u=0;a>u;)n.f(t,r=s[u++],e[r]);return t}},{115:115,123:123,75:75,85:85}],117:[function(t,e,r){var n=t(124),i=t(125),o=t(137),s=t(140),a=t(93),u=t(96),c=Object.getOwnPropertyDescriptor;r.f=t(85)?c:function(t,e){if(t=o(t),e=s(e,!0),u)try{return c(t,e)}catch(t){}if(a(t,e))return i(!n.f.call(t,e),t[e])}},{124:124,125:125,137:137,140:140,85:85,93:93,96:96}],118:[function(t,e,r){var n=t(137),i=t(119).f,o={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],a=function(t){try{return i(t)}catch(t){return s.slice()}};e.exports.f=function(t){return s&&"[object Window]"==o.call(t)?a(t):i(n(t))}},{119:119,137:137}],119:[function(t,e,r){var n=t(122),i=t(87).concat("length","prototype");r.f=Object.getOwnPropertyNames||function(t){return n(t,i)}},{122:122,87:87}],120:[function(t,e,r){r.f=Object.getOwnPropertySymbols},{}],121:[function(t,e,r){var n=t(93),i=t(139),o=t(131)("IE_PROTO"),s=Object.prototype;e.exports=Object.getPrototypeOf||function(t){return t=i(t),n(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?s:null}},{131:131,139:139,93:93}],122:[function(t,e,r){var n=t(93),i=t(137),o=t(76)(!1),s=t(131)("IE_PROTO");e.exports=function(t,e){var r,a=i(t),u=0,c=[];for(r in a)r!=s&&n(a,r)&&c.push(r);for(;e.length>u;)n(a,r=e[u++])&&(~o(c,r)||c.push(r));return c}},{131:131,137:137,76:76,93:93}],123:[function(t,e,r){var n=t(122),i=t(87);e.exports=Object.keys||function(t){return n(t,i)}},{122:122,87:87}],124:[function(t,e,r){r.f={}.propertyIsEnumerable},{}],125:[function(t,e,r){e.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},{}],126:[function(t,e,r){var n=t(127);e.exports=function(t,e,r){for(var i in e)n(t,i,e[i],r);return t}},{127:127}],127:[function(t,e,r){var n=t(92),i=t(94),o=t(93),s=t(141)("src"),a="toString",u=Function[a],c=(""+u).split(a);t(81).inspectSource=function(t){return u.call(t)},(e.exports=function(t,e,r,a){var u="function"==typeof r;u&&(o(r,"name")||i(r,"name",e)),t[e]!==r&&(u&&(o(r,s)||i(r,s,t[e]?""+t[e]:c.join(String(e)))),t===n?t[e]=r:a?t[e]?t[e]=r:i(t,e,r):(delete t[e],i(t,e,r)))})(Function.prototype,a,function(){return"function"==typeof this&&this[s]||u.call(this)})},{141:141,81:81,92:92,93:93,94:94}],128:[function(t,e,r){var n=t(102),i=t(75),o=function(t,e){if(i(t),!n(e)&&null!==e)throw TypeError(e+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,r,n){try{n=t(83)(Function.call,t(117).f(Object.prototype,"__proto__").set,2),n(e,[]),r=!(e instanceof Array)}catch(t){r=!0}return function(t,e){return o(t,e),r?t.__proto__=e:n(t,e),t}}({},!1):void 0),check:o}},{102:102,117:117,75:75,83:83}],129:[function(t,e,r){"use strict";var n=t(92),i=t(115),o=t(85),s=t(144)("species");e.exports=function(t){var e=n[t];o&&e&&!e[s]&&i.f(e,s,{configurable:!0,get:function(){return this}})}},{115:115,144:144,85:85,92:92}],130:[function(t,e,r){var n=t(115).f,i=t(93),o=t(144)("toStringTag");e.exports=function(t,e,r){t&&!i(t=r?t:t.prototype,o)&&n(t,o,{configurable:!0,value:e})}},{115:115,144:144,93:93}],131:[function(t,e,r){var n=t(132)("keys"),i=t(141);e.exports=function(t){return n[t]||(n[t]=i(t))}},{132:132,141:141}],132:[function(t,e,r){var n=t(92),i="__core-js_shared__",o=n[i]||(n[i]={});e.exports=function(t){return o[t]||(o[t]={})}},{92:92}],133:[function(t,e,r){var n=t(75),i=t(72),o=t(144)("species");e.exports=function(t,e){var r,s=n(t).constructor;return void 0===s||void 0==(r=n(s)[o])?e:i(r)}},{144:144,72:72,75:75}],134:[function(t,e,r){var n,i,o,s=t(83),a=t(98),u=t(95),c=t(86),l=t(92),f=l.process,h=l.setImmediate,p=l.clearImmediate,d=l.MessageChannel,y=0,g={},b="onreadystatechange",v=function(){var t=+this;if(g.hasOwnProperty(t)){var e=g[t];delete g[t],e()}},m=function(t){v.call(t.data)};h&&p||(h=function(t){for(var e=[],r=1;arguments.length>r;)e.push(arguments[r++]);return g[++y]=function(){a("function"==typeof t?t:Function(t),e)},n(y),y},p=function(t){delete g[t]},"process"==t(78)(f)?n=function(t){f.nextTick(s(v,t,1))}:d?(i=new d,o=i.port2,i.port1.onmessage=m,n=s(o.postMessage,o,1)):l.addEventListener&&"function"==typeof postMessage&&!l.importScripts?(n=function(t){l.postMessage(t+"","*")},l.addEventListener("message",m,!1)):n=b in c("script")?function(t){u.appendChild(c("script"))[b]=function(){u.removeChild(this),v.call(t)}}:function(t){setTimeout(s(v,t,1),0)}),e.exports={set:h,clear:p}},{78:78,83:83,86:86,92:92,95:95,98:98}],135:[function(t,e,r){var n=t(136),i=Math.max,o=Math.min;e.exports=function(t,e){return t=n(t),t<0?i(t+e,0):o(t,e)}},{136:136}],136:[function(t,e,r){var n=Math.ceil,i=Math.floor;e.exports=function(t){return isNaN(t=+t)?0:(t>0?i:n)(t)}},{}],137:[function(t,e,r){var n=t(99),i=t(84);e.exports=function(t){return n(i(t))}},{84:84,99:99}],138:[function(t,e,r){var n=t(136),i=Math.min;e.exports=function(t){return t>0?i(n(t),9007199254740991):0}},{136:136}],139:[function(t,e,r){var n=t(84);e.exports=function(t){return Object(n(t))}},{84:84}],140:[function(t,e,r){var n=t(102);e.exports=function(t,e){if(!n(t))return t;var r,i;if(e&&"function"==typeof(r=t.toString)&&!n(i=r.call(t)))return i;if("function"==typeof(r=t.valueOf)&&!n(i=r.call(t)))return i;if(!e&&"function"==typeof(r=t.toString)&&!n(i=r.call(t)))return i;throw TypeError("Can't convert object to primitive value")}},{102:102}],141:[function(t,e,r){var n=0,i=Math.random();e.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+i).toString(36))}},{}],142:[function(t,e,r){var n=t(92),i=t(81),o=t(110),s=t(143),a=t(115).f;e.exports=function(t){var e=i.Symbol||(i.Symbol=o?{}:n.Symbol||{});"_"==t.charAt(0)||t in e||a(e,t,{value:s.f(t)})}},{110:110,115:115,143:143,81:81,92:92}],143:[function(t,e,r){r.f=t(144)},{144:144}],144:[function(t,e,r){var n=t(132)("wks"),i=t(141),o=t(92).Symbol,s="function"==typeof o,a=e.exports=function(t){return n[t]||(n[t]=s&&o[t]||(s?o:i)("Symbol."+t))};a.store=n},{132:132,141:141,92:92}],145:[function(t,e,r){var n=t(77),i=t(144)("iterator"),o=t(108);e.exports=t(81).getIteratorMethod=function(t){if(void 0!=t)return t[i]||t["@@iterator"]||o[n(t)]}},{108:108,144:144,77:77,81:81}],146:[function(t,e,r){"use strict";var n=t(83),i=t(89),o=t(139),s=t(103),a=t(100),u=t(138),c=t(82),l=t(145);i(i.S+i.F*!t(106)(function(t){Array.from(t)}),"Array",{from:function(t){var e,r,i,f,h=o(t),p="function"==typeof this?this:Array,d=arguments.length,y=d>1?arguments[1]:void 0,g=void 0!==y,b=0,v=l(h);if(g&&(y=n(y,d>2?arguments[2]:void 0,2)),void 0==v||p==Array&&a(v))for(e=u(h.length),r=new p(e);e>b;b++)c(r,b,g?y(h[b],b):h[b]);else for(f=v.call(h),r=new p;!(i=f.next()).done;b++)c(r,b,g?s(f,y,[i.value,b],!0):i.value);return r.length=b,r}})},{100:100,103:103,106:106,138:138,139:139,145:145,82:82,83:83,89:89}],147:[function(t,e,r){"use strict";var n=t(73),i=t(107),o=t(108),s=t(137);e.exports=t(105)(Array,"Array",function(t,e){this._t=s(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,r=this._i++;return!t||r>=t.length?(this._t=void 0,i(1)):"keys"==e?i(0,r):"values"==e?i(0,t[r]):i(0,[r,t[r]])},"values"),o.Arguments=o.Array,n("keys"),n("values"),n("entries")},{105:105,107:107,108:108,137:137,73:73}],148:[function(t,e,r){"use strict";var n=t(79);e.exports=t(80)("Map",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{get:function(t){var e=n.getEntry(this,t);return e&&e.v},set:function(t,e){return n.def(this,0===t?0:t,e)}},n,!0)},{79:79,80:80}],149:[function(t,e,r){var n=t(89);n(n.S+n.F,"Object",{assign:t(113)})},{113:113,89:89}],150:[function(t,e,r){var n=t(89);n(n.S,"Object",{setPrototypeOf:t(128).set})},{128:128,89:89}],151:[function(t,e,r){"use strict";var n,i,o,s=t(110),a=t(92),u=t(83),c=t(77),l=t(89),f=t(102),h=t(72),p=t(74),d=t(91),y=t(133),g=t(134).set,b=t(112)(),v="Promise",m=a.TypeError,_=a.process,w=a[v],_=a.process,E="process"==c(_),T=function(){},A=!!function(){try{var e=w.resolve(1),r=(e.constructor={})[t(144)("species")]=function(t){t(T,T)};return(E||"function"==typeof PromiseRejectionEvent)&&e.then(T)instanceof r}catch(t){}}(),S=function(t,e){return t===e||t===w&&e===o},k=function(t){var e;return!(!f(t)||"function"!=typeof(e=t.then))&&e},C=function(t){return S(w,t)?new O(t):new i(t)},O=i=function(t){var e,r;this.promise=new t(function(t,n){if(void 0!==e||void 0!==r)throw m("Bad Promise constructor");e=t,r=n}),this.resolve=h(e),this.reject=h(r)},x=function(t){try{t()}catch(t){return{error:t}}},P=function(t,e){if(!t._n){t._n=!0;var r=t._c;b(function(){for(var n=t._v,i=1==t._s,o=0,s=function(e){var r,o,s=i?e.ok:e.fail,a=e.resolve,u=e.reject,c=e.domain;try{s?(i||(2==t._h&&F(t),t._h=1),s===!0?r=n:(c&&c.enter(),r=s(n),c&&c.exit()),r===e.promise?u(m("Promise-chain cycle")):(o=k(r))?o.call(r,a,u):a(r)):u(n)}catch(t){u(t)}};r.length>o;)s(r[o++]);t._c=[],t._n=!1,e&&!t._h&&M(t)})}},M=function(t){g.call(a,function(){var e,r,n,i=t._v;if(B(t)&&(e=x(function(){E?_.emit("unhandledRejection",i,t):(r=a.onunhandledrejection)?r({promise:t,reason:i}):(n=a.console)&&n.error&&n.error("Unhandled promise rejection",i)}),t._h=E||B(t)?2:1),t._a=void 0,e)throw e.error})},B=function(t){if(1==t._h)return!1;for(var e,r=t._a||t._c,n=0;r.length>n;)if(e=r[n++],e.fail||!B(e.promise))return!1;return!0},F=function(t){g.call(a,function(){var e;E?_.emit("rejectionHandled",t):(e=a.onrejectionhandled)&&e({promise:t,reason:t._v})})},R=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),P(e,!0))},I=function(t){var e,r=this;if(!r._d){r._d=!0,r=r._w||r;try{if(r===t)throw m("Promise can't be resolved itself");(e=k(t))?b(function(){var n={_w:r,_d:!1};try{e.call(t,u(I,n,1),u(R,n,1))}catch(t){R.call(n,t)}}):(r._v=t,r._s=1,P(r,!1))}catch(t){R.call({_w:r,_d:!1},t)}}};A||(w=function(t){p(this,w,v,"_h"),h(t),n.call(this);try{t(u(I,this,1),u(R,this,1))}catch(t){R.call(this,t)}},n=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},n.prototype=t(126)(w.prototype,{then:function(t,e){var r=C(y(this,w));return r.ok="function"!=typeof t||t,r.fail="function"==typeof e&&e,r.domain=E?_.domain:void 0,this._c.push(r),this._a&&this._a.push(r),this._s&&P(this,!1),r.promise},catch:function(t){return this.then(void 0,t)}}),O=function(){var t=new n;this.promise=t,this.resolve=u(I,t,1),this.reject=u(R,t,1)}),l(l.G+l.W+l.F*!A,{Promise:w}),t(130)(w,v),t(129)(v),o=t(81)[v],l(l.S+l.F*!A,v,{reject:function(t){var e=C(this),r=e.reject;return r(t),e.promise}}),l(l.S+l.F*(s||!A),v,{resolve:function(t){if(t instanceof w&&S(t.constructor,this))return t;var e=C(this),r=e.resolve;return r(t),e.promise}}),l(l.S+l.F*!(A&&t(106)(function(t){w.all(t).catch(T)})),v,{all:function(t){var e=this,r=C(e),n=r.resolve,i=r.reject,o=x(function(){var r=[],o=0,s=1;d(t,!1,function(t){var a=o++,u=!1;r.push(void 0),s++,e.resolve(t).then(function(t){u||(u=!0,r[a]=t,--s||n(r))},i)}),--s||n(r)});return o&&i(o.error),r.promise},race:function(t){var e=this,r=C(e),n=r.reject,i=x(function(){d(t,!1,function(t){e.resolve(t).then(r.resolve,n)})});return i&&n(i.error),r.promise}})},{102:102,106:106,110:110,112:112,126:126,129:129,130:130,133:133,134:134,144:144,72:72,74:74,77:77,81:81,83:83,89:89,91:91,92:92}],152:[function(t,e,r){"use strict";var n=t(79);e.exports=t(80)("Set",function(t){return function(){return t(this,arguments.length>0?arguments[0]:void 0)}},{add:function(t){return n.def(this,t=0===t?0:t,t)}},n)},{79:79,80:80}],153:[function(t,e,r){"use strict";var n=t(92),i=t(93),o=t(85),s=t(89),a=t(127),u=t(111).KEY,c=t(90),l=t(132),f=t(130),h=t(141),p=t(144),d=t(143),y=t(142),g=t(109),b=t(88),v=t(101),m=t(75),_=t(137),w=t(140),E=t(125),T=t(114),A=t(118),S=t(117),k=t(115),C=t(123),O=S.f,x=k.f,P=A.f,M=n.Symbol,B=n.JSON,F=B&&B.stringify,R="prototype",I=p("_hidden"),L=p("toPrimitive"),D={}.propertyIsEnumerable,j=l("symbol-registry"),N=l("symbols"),U=l("op-symbols"),J=Object[R],$="function"==typeof M,G=n.QObject,V=!G||!G[R]||!G[R].findChild,q=o&&c(function(){return 7!=T(x({},"a",{get:function(){return x(this,"a",{value:7}).a}})).a})?function(t,e,r){var n=O(J,e);n&&delete J[e],x(t,e,r),n&&t!==J&&x(J,e,n)}:x,H=function(t){var e=N[t]=T(M[R]);return e._k=t,e},z=$&&"symbol"==typeof M.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof M},W=function(t,e,r){return t===J&&W(U,e,r),m(t),e=w(e,!0),m(r),i(N,e)?(r.enumerable?(i(t,I)&&t[I][e]&&(t[I][e]=!1),r=T(r,{enumerable:E(0,!1)})):(i(t,I)||x(t,I,E(1,{})),t[I][e]=!0),q(t,e,r)):x(t,e,r)},Y=function(t,e){m(t);for(var r,n=b(e=_(e)),i=0,o=n.length;o>i;)W(t,r=n[i++],e[r]);return t},Q=function(t,e){return void 0===e?T(t):Y(T(t),e)},Z=function(t){var e=D.call(this,t=w(t,!0));return!(this===J&&i(N,t)&&!i(U,t))&&(!(e||!i(this,t)||!i(N,t)||i(this,I)&&this[I][t])||e)},K=function(t,e){if(t=_(t),e=w(e,!0),t!==J||!i(N,e)||i(U,e)){var r=O(t,e);return!r||!i(N,e)||i(t,I)&&t[I][e]||(r.enumerable=!0),r}},X=function(t){for(var e,r=P(_(t)),n=[],o=0;r.length>o;)i(N,e=r[o++])||e==I||e==u||n.push(e);return n},tt=function(t){for(var e,r=t===J,n=P(r?U:_(t)),o=[],s=0;n.length>s;)!i(N,e=n[s++])||r&&!i(J,e)||o.push(N[e]);return o};$||(M=function(){if(this instanceof M)throw TypeError("Symbol is not a constructor!");var t=h(arguments.length>0?arguments[0]:void 0),e=function(r){this===J&&e.call(U,r),i(this,I)&&i(this[I],t)&&(this[I][t]=!1),q(this,t,E(1,r))};return o&&V&&q(J,t,{configurable:!0,set:e}),H(t)},a(M[R],"toString",function(){return this._k}),S.f=K,k.f=W,t(119).f=A.f=X,t(124).f=Z,t(120).f=tt,o&&!t(110)&&a(J,"propertyIsEnumerable",Z,!0),d.f=function(t){return H(p(t))}),s(s.G+s.W+s.F*!$,{Symbol:M});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),rt=0;et.length>rt;)p(et[rt++]);for(var et=C(p.store),rt=0;et.length>rt;)y(et[rt++]);s(s.S+s.F*!$,"Symbol",{for:function(t){return i(j,t+="")?j[t]:j[t]=M(t)},keyFor:function(t){if(z(t))return g(j,t);throw TypeError(t+" is not a symbol!")},useSetter:function(){V=!0},useSimple:function(){V=!1}}),s(s.S+s.F*!$,"Object",{create:Q,defineProperty:W,defineProperties:Y,getOwnPropertyDescriptor:K,getOwnPropertyNames:X,getOwnPropertySymbols:tt}),B&&s(s.S+s.F*(!$||c(function(){var t=M();return"[null]"!=F([t])||"{}"!=F({a:t})||"{}"!=F(Object(t))})),"JSON",{stringify:function(t){if(void 0!==t&&!z(t)){for(var e,r,n=[t],i=1;arguments.length>i;)n.push(arguments[i++]);return e=n[1],"function"==typeof e&&(r=e),!r&&v(e)||(e=function(t,e){if(r&&(e=r.call(this,t,e)),!z(e))return e}),n[1]=e,F.apply(B,n)}}}),M[R][L]||t(94)(M[R],L,M[R].valueOf),f(M,"Symbol"),f(Math,"Math",!0),f(n.JSON,"JSON",!0)},{101:101,109:109,110:110,111:111,114:114,115:115,117:117,118:118,119:119,120:120,123:123,124:124,125:125,127:127,130:130,132:132,137:137,140:140,141:141,142:142,143:143,144:144,75:75,85:85,88:88,89:89,90:90,92:92,93:93,94:94}],154:[function(e,r,n){!function(e,i){"object"==typeof n?r.exports=n=i():"function"==typeof t&&t.amd?t([],i):e.CryptoJS=i()}(this,function(){var t=t||function(t,e){var r=Object.create||function(){function F(){}return function(t){var e;return F.prototype=t,e=new F,F.prototype=null,e}}(),n={},i=n.lib={},o=i.Base=function(){return{extend:function(t){var e=r(this);return t&&e.mixIn(t),e.hasOwnProperty("init")&&this.init!==e.init||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}}}(),s=i.WordArray=o.extend({init:function(t,r){t=this.words=t||[],r!=e?this.sigBytes=r:this.sigBytes=4*t.length},toString:function(t){return(t||u).stringify(this)},concat:function(t){var e=this.words,r=t.words,n=this.sigBytes,i=t.sigBytes;if(this.clamp(),n%4)for(var o=0;o<i;o++){var s=r[o>>>2]>>>24-o%4*8&255;e[n+o>>>2]|=s<<24-(n+o)%4*8}else for(var o=0;o<i;o+=4)e[n+o>>>2]=r[o>>>2];return this.sigBytes+=i,this},clamp:function(){var e=this.words,r=this.sigBytes;e[r>>>2]&=4294967295<<32-r%4*8,e.length=t.ceil(r/4)},clone:function(){var t=o.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var r,n=[],i=function(e){var e=e,r=987654321,n=4294967295;return function(){r=36969*(65535&r)+(r>>16)&n,e=18e3*(65535&e)+(e>>16)&n;var i=(r<<16)+e&n;return i/=4294967296,i+=.5,i*(t.random()>.5?1:-1)}},o=0;o<e;o+=4){var a=i(4294967296*(r||t.random()));r=987654071*a(),n.push(4294967296*a()|0)}return new s.init(n,e)}}),a=n.enc={},u=a.Hex={stringify:function(t){for(var e=t.words,r=t.sigBytes,n=[],i=0;i<r;i++){var o=e[i>>>2]>>>24-i%4*8&255;n.push((o>>>4).toString(16)),n.push((15&o).toString(16))}return n.join("")},parse:function(t){for(var e=t.length,r=[],n=0;n<e;n+=2)r[n>>>3]|=parseInt(t.substr(n,2),16)<<24-n%8*4;return new s.init(r,e/2)}},c=a.Latin1={stringify:function(t){for(var e=t.words,r=t.sigBytes,n=[],i=0;i<r;i++){var o=e[i>>>2]>>>24-i%4*8&255;n.push(String.fromCharCode(o))}return n.join("")},parse:function(t){for(var e=t.length,r=[],n=0;n<e;n++)r[n>>>2]|=(255&t.charCodeAt(n))<<24-n%4*8;return new s.init(r,e)}},l=a.Utf8={stringify:function(t){try{return decodeURIComponent(escape(c.stringify(t)))}catch(t){throw new Error("Malformed UTF-8 data")}},parse:function(t){return c.parse(unescape(encodeURIComponent(t)))}},f=i.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new s.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=l.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var r=this._data,n=r.words,i=r.sigBytes,o=this.blockSize,a=4*o,u=i/a;u=e?t.ceil(u):t.max((0|u)-this._minBufferSize,0);var c=u*o,l=t.min(4*c,i);if(c){for(var f=0;f<c;f+=o)this._doProcessBlock(n,f);var h=n.splice(0,c);r.sigBytes-=l}return new s.init(h,l)},clone:function(){var t=o.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0}),h=(i.Hasher=f.extend({cfg:o.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){f.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){t&&this._append(t);var e=this._doFinalize();return e},blockSize:16,_createHelper:function(t){return function(e,r){return new t.init(r).finalize(e)}},_createHmacHelper:function(t){return function(e,r){return new h.HMAC.init(t,r).finalize(e)}}}),n.algo={});return n}(Math);return t})},{}],155:[function(e,r,n){!function(i,o,s){"object"==typeof n?r.exports=n=o(e(154),e(157),e(156)):"function"==typeof t&&t.amd?t(["./core","./sha1","./hmac"],o):o(i.CryptoJS)}(this,function(t){return t.HmacSHA1})},{154:154,156:156,157:157}],156:[function(e,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(e(154)):"function"==typeof t&&t.amd?t(["./core"],o):o(i.CryptoJS)}(this,function(t){!function(){var e=t,r=e.lib,n=r.Base,i=e.enc,o=i.Utf8,s=e.algo;s.HMAC=n.extend({init:function(t,e){t=this._hasher=new t.init,"string"==typeof e&&(e=o.parse(e));var r=t.blockSize,n=4*r;e.sigBytes>n&&(e=t.finalize(e)),e.clamp();for(var i=this._oKey=e.clone(),s=this._iKey=e.clone(),a=i.words,u=s.words,c=0;c<r;c++)a[c]^=1549556828,u[c]^=909522486;i.sigBytes=s.sigBytes=n,this.reset()},reset:function(){var t=this._hasher;t.reset(),t.update(this._iKey)},update:function(t){return this._hasher.update(t),this},finalize:function(t){var e=this._hasher,r=e.finalize(t);e.reset();var n=e.finalize(this._oKey.clone().concat(r));return n}})}()})},{154:154}],157:[function(e,r,n){!function(i,o){"object"==typeof n?r.exports=n=o(e(154)):"function"==typeof t&&t.amd?t(["./core"],o):o(i.CryptoJS)}(this,function(t){return function(){var e=t,r=e.lib,n=r.WordArray,i=r.Hasher,o=e.algo,s=[],a=o.SHA1=i.extend({_doReset:function(){this._hash=new n.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(t,e){for(var r=this._hash.words,n=r[0],i=r[1],o=r[2],a=r[3],u=r[4],c=0;c<80;c++){if(c<16)s[c]=0|t[e+c];else{var l=s[c-3]^s[c-8]^s[c-14]^s[c-16];s[c]=l<<1|l>>>31}var f=(n<<5|n>>>27)+u+s[c];f+=c<20?(i&o|~i&a)+1518500249:c<40?(i^o^a)+1859775393:c<60?(i&o|i&a|o&a)-1894007588:(i^o^a)-899497514,u=a,a=o,o=i<<30|i>>>2,i=n,n=f}r[0]=r[0]+n|0,r[1]=r[1]+i|0,r[2]=r[2]+o|0,r[3]=r[3]+a|0,r[4]=r[4]+u|0},_doFinalize:function(){var t=this._data,e=t.words,r=8*this._nDataBytes,n=8*t.sigBytes;return e[n>>>5]|=128<<24-n%32,e[(n+64>>>9<<4)+14]=Math.floor(r/4294967296),e[(n+64>>>9<<4)+15]=r,t.sigBytes=4*e.length,this._process(),this._hash},clone:function(){var t=i.clone.call(this);return t._hash=this._hash.clone(),t}});e.SHA1=i._createHelper(a),e.HmacSHA1=i._createHmacHelper(a)}(),t.SHA1})},{154:154}],158:[function(t,e,r){function bytesToUuid(t,e){var r=e||0,i=n;return i[t[r++]]+i[t[r++]]+i[t[r++]]+i[t[r++]]+"-"+i[t[r++]]+i[t[r++]]+"-"+i[t[r++]]+i[t[r++]]+"-"+i[t[r++]]+i[t[r++]]+"-"+i[t[r++]]+i[t[r++]]+i[t[r++]]+i[t[r++]]+i[t[r++]]+i[t[r++]]}for(var n=[],i=0;i<256;++i)n[i]=(i+256).toString(16).substr(1);e.exports=bytesToUuid},{}],159:[function(t,e,n){(function(t){var r,n=t.crypto||t.msCrypto;if(n&&n.getRandomValues){var i=new Uint8Array(16);r=function(){return n.getRandomValues(i),i}}if(!r){var o=new Array(16);r=function(){for(var t,e=0;e<16;e++)0===(3&e)&&(t=4294967296*Math.random()),o[e]=t>>>((3&e)<<3)&255;return o}}e.exports=r}).call(this,"undefined"!=typeof r?r:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],160:[function(t,e,r){function v4(t,e,r){var o=e&&r||0;"string"==typeof t&&(e="binary"==t?new Array(16):null,t=null),t=t||{};var s=t.random||(t.rng||n)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,e)for(var a=0;a<16;++a)e[o+a]=s[a];return e||i(s)}var n=t(159),i=t(158);e.exports=v4},{158:158,159:159}],161:[function(t,e,r){/*!
	 * depd
	 * Copyright(c) 2015 Douglas Christopher Wilson
	 * MIT Licensed
	 */
"use strict";function depd(t){function deprecate(t){}if(!t)throw new TypeError("argument namespace is required");return deprecate._file=void 0,deprecate._ignored=!0,deprecate._namespace=t,deprecate._traced=!1,deprecate._warned=Object.create(null),deprecate.function=wrapfunction,deprecate.property=wrapproperty,deprecate}function wrapfunction(t,e){if("function"!=typeof t)throw new TypeError("argument fn must be a function");return t}function wrapproperty(t,e,r){if(!t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("argument obj must be object");var n=Object.getOwnPropertyDescriptor(t,e);if(!n)throw new TypeError("must call property on owner object");if(!n.configurable)throw new TypeError("property must be configurable")}e.exports=depd},{}],162:[function(e,r,n){/*!
	 * Copyright (c) 2015 Chris O'Hara <cohara87@gmail.com>
	 *
	 * Permission is hereby granted, free of charge, to any person obtaining
	 * a copy of this software and associated documentation files (the
	 * "Software"), to deal in the Software without restriction, including
	 * without limitation the rights to use, copy, modify, merge, publish,
	 * distribute, sublicense, and/or sell copies of the Software, and to
	 * permit persons to whom the Software is furnished to do so, subject to
	 * the following conditions:
	 *
	 * The above copyright notice and this permission notice shall be
	 * included in all copies or substantial portions of the Software.
	 *
	 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
	 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
	 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
	 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
	 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
	 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
	 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
	 */
!function(e,i){"undefined"!=typeof n&&"undefined"!=typeof r?r.exports=i():"function"==typeof t&&"object"==typeof t.amd?t(i):"function"==typeof t&&"object"==typeof t.petal?t(e,[],i):this[e]=i()}("validator",function(t){"use strict";function getTimezoneOffset(t){var e,r,n,i,o=t.match(I);if(o){if(e=o[21],!e)return o[12]?null:0;if("z"===e||"Z"===e)return 0;r=o[22],e.indexOf(":")!==-1?(n=parseInt(o[23]),i=parseInt(o[24])):(n=0,i=parseInt(o[23]))}else{if(t=t.toLowerCase(),e=t.match(/(?:\s|gmt\s*)(-|\+)(\d{1,4})(\s|$)/),!e)return t.indexOf("gmt")!==-1?0:null;r=e[1];var s=e[2];3===s.length&&(s="0"+s),s.length<=2?(n=0,i=parseInt(s)):(n=parseInt(s.slice(0,2)),i=parseInt(s.slice(2,4)))}return(60*n+i)*("-"===r?1:-1)}function merge(t,e){t=t||{};for(var r in e)"undefined"==typeof t[r]&&(t[r]=e[r]);return t}function currencyRegex(t){var e="(\\"+t.symbol.replace(/\./g,"\\.")+")"+(t.require_symbol?"":"?"),r="-?",n="[1-9]\\d*",i="[1-9]\\d{0,2}(\\"+t.thousands_separator+"\\d{3})*",o=["0",n,i],s="("+o.join("|")+")?",a="(\\"+t.decimal_separator+"\\d{2})?",u=s+a;return t.allow_negatives&&!t.parens_for_negatives&&(t.negative_sign_after_digits?u+=r:t.negative_sign_before_digits&&(u=r+u)),t.allow_negative_sign_placeholder?u="( (?!\\-))?"+u:t.allow_space_after_symbol?u=" ?"+u:t.allow_space_after_digits&&(u+="( (?!$))?"),t.symbol_after_digits?u+=e:u=e+u,t.allow_negatives&&(t.parens_for_negatives?u="(\\("+u+"\\)|"+u+")":t.negative_sign_before_digits||t.negative_sign_after_digits||(u=r+u)),new RegExp("^(?!-? )(?=.*\\d)"+u+"$")}t={version:"4.9.0",coerce:!0};for(var n,o=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~]+$/i,s=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f]))*$/i,a=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+$/i,u=/^([\s\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|(\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*$/i,c=/^[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\.\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+[a-z\d!#\$%&'\*\+\-\/=\?\^_`{\|}~\.\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF\s]*<(.+)>$/i,l=/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\d{3})\d{11})$/,f=/^[A-Z]{2}[0-9A-Z]{9}[0-9]$/,h=/^(?:[0-9]{9}X|[0-9]{10})$/,p=/^(?:[0-9]{13})$/,d=/^([0-9a-fA-F][0-9a-fA-F]:){5}([0-9a-fA-F][0-9a-fA-F])$/,y=/^(\d{1,3})\.(\d{1,3})\.(\d{1,3})\.(\d{1,3})$/,g=/^[0-9A-F]{1,4}$/i,b={3:/^[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,4:/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,5:/^[0-9A-F]{8}-[0-9A-F]{4}-5[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,all:/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i},v={"en-US":/^[A-Z]+$/i,"de-DE":/^[A-Z]+$/i,"es-ES":/^[A-Z]+$/i,"fr-FR":/^[A-Z]+$/i,"nl-NL":/^[A-Z]+$/i,"pt-PT":/^[A-Z]+$/i,"ru-RU":/^[--]+$/i},m={"en-US":/^[0-9A-Z]+$/i,"de-DE":/^[0-9A-Z]+$/i,"es-ES":/^[0-9A-Z]+$/i,"fr-FR":/^[0-9A-Z]+$/i,"nl-NL":/^[0-9A-Z]+$/i,"pt-PT":/^[0-9A-Z]+$/i,"ru-RU":/^[0-9--]+$/i},_=["AU","GB","HK","IN","NZ","ZA","ZM"],w=0;w<_.length;w++)n="en-"+_[w],v[n]=v["en-US"],m[n]=m["en-US"];var E=/^[-+]?[0-9]+$/,T=/^(?:[-+]?(?:0|[1-9][0-9]*))$/,A=/^(?:[-+]?(?:[0-9]+))?(?:\.[0-9]*)?(?:[eE][\+\-]?(?:[0-9]+))?$/,S=/^[0-9A-F]+$/i,k=/^[-+]?([0-9]+|\.[0-9]+|[0-9]+\.[0-9]+)$/,C=/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i,O=/^[\x00-\x7F]+$/,x=/[^\x00-\x7F]/,P=/[^\u0020-\u007E\uFF61-\uFF9F\uFFA0-\uFFDC\uFFE8-\uFFEE0-9a-zA-Z]/,M=/[\u0020-\u007E\uFF61-\uFF9F\uFFA0-\uFFDC\uFFE8-\uFFEE0-9a-zA-Z]/,B=/[\uD800-\uDBFF][\uDC00-\uDFFF]/,F=/^(?:[A-Z0-9+\/]{4})*(?:[A-Z0-9+\/]{2}==|[A-Z0-9+\/]{3}=|[A-Z0-9+\/]{4})$/i,R={"en-US":/^(\+?1)?[2-9]\d{2}[2-9](?!11)\d{6}$/,"de-DE":/^(\+?49[ \.\-])?([\(]{1}[0-9]{1,6}[\)])?([0-9 \.\-\/]{3,20})((x|ext|extension)[ ]?[0-9]{1,4})?$/,"el-GR":/^(\+?30)?(69\d{8})$/,"en-AU":/^(\+?61|0)4\d{8}$/,"en-GB":/^(\+?44|0)7\d{9}$/,"en-HK":/^(\+?852\-?)?[569]\d{3}\-?\d{4}$/,"en-IN":/^(\+?91|0)?[789]\d{9}$/,"en-NZ":/^(\+?64|0)2\d{7,9}$/,"en-ZA":/^(\+?27|0)\d{9}$/,"en-ZM":/^(\+?26)?09[567]\d{7}$/,"es-ES":/^(\+?34)?(6\d{1}|7[1234])\d{7}$/,"fi-FI":/^(\+?358|0)\s?(4(0|1|2|4|5)?|50)\s?(\d\s?){4,8}\d$/,"fr-FR":/^(\+?33|0)[67]\d{8}$/,"nb-NO":/^(\+?47)?[49]\d{7}$/,"nn-NO":/^(\+?47)?[49]\d{7}$/,"pt-BR":/^(\+?55|0)\-?[1-9]{2}\-?[2-9]{1}\d{3,4}\-?\d{4}$/,"pt-PT":/^(\+?351)?9[1236]\d{7}$/,"ru-RU":/^(\+?7|8)?9\d{9}$/,"vi-VN":/^(\+?84|0)?((1(2([0-9])|6([2-9])|88|99))|(9((?!5)[0-9])))([0-9]{7})$/,"zh-CN":/^(\+?0?86\-?)?((13\d|14[57]|15[^4,\D]|17[678]|18\d)\d{8}|170[059]\d{7})$/,"zh-TW":/^(\+?886\-?|0)?9\d{8}$/},I=/^([\+-]?\d{4}(?!\d{2}\b))((-?)((0[1-9]|1[0-2])(\3([12]\d|0[1-9]|3[01]))?|W([0-4]\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\d|[12]\d{2}|3([0-5]\d|6[1-6])))([T\s]((([01]\d|2[0-3])((:?)[0-5]\d)?|24\:?00)([\.,]\d+(?!:))?)?(\17[0-5]\d([\.,]\d+)?)?([zZ]|([\+-])([01]\d|2[0-3]):?([0-5]\d)?)?)?)?$/;t.extend=function(e,r){t[e]=function(){var e=Array.prototype.slice.call(arguments);return e[0]=t.toString(e[0]),r.apply(t,e)}},t.init=function(){for(var e in t)"function"==typeof t[e]&&"toString"!==e&&"toDate"!==e&&"extend"!==e&&"init"!==e&&"isServerSide"!==e&&t.extend(e,t[e])},t.isServerSide=function(){return"object"==typeof r&&r&&"object"==typeof r.exports&&"object"==typeof i&&"function"==typeof e};var L=null;t.deprecation=function(r){if(null===L){if(!t.isServerSide())return;L=e(161)("validator")}L(r)},t.toString=function(e){if("string"!=typeof e){if(!t.coerce)throw new Error("this library validates strings only");t.deprecation("you tried to validate a "+typeof e+" but this library (validator.js) validates strings only. Please update your code as this will be an error soon.")}return"object"==typeof e&&null!==e?e="function"==typeof e.toString?e.toString():"[object Object]":(null===e||"undefined"==typeof e||isNaN(e)&&!e.length)&&(e=""),""+e},t.toDate=function(t){return"[object Date]"===Object.prototype.toString.call(t)?t:(t=Date.parse(t),isNaN(t)?null:new Date(t))},t.toFloat=function(t){return parseFloat(t)},t.toInt=function(t,e){return parseInt(t,e||10)},t.toBoolean=function(t,e){return e?"1"===t||"true"===t:"0"!==t&&"false"!==t&&""!==t},t.equals=function(e,r){return e===t.toString(r)},t.contains=function(e,r){return e.indexOf(t.toString(r))>=0},t.matches=function(t,e,r){return"[object RegExp]"!==Object.prototype.toString.call(e)&&(e=new RegExp(e,r)),e.test(t)};var D={allow_display_name:!1,allow_utf8_local_part:!0,require_tld:!0};t.isEmail=function(e,r){if(r=merge(r,D),r.allow_display_name){var n=e.match(c);n&&(e=n[1])}var i=e.split("@"),l=i.pop(),f=i.join("@"),h=l.toLowerCase();if("gmail.com"!==h&&"googlemail.com"!==h||(f=f.replace(/\./g,"").toLowerCase()),!t.isByteLength(f,{max:64})||!t.isByteLength(l,{max:256}))return!1;if(!t.isFQDN(l,{require_tld:r.require_tld}))return!1;if('"'===f[0])return f=f.slice(1,f.length-1),r.allow_utf8_local_part?u.test(f):s.test(f);for(var p=r.allow_utf8_local_part?a:o,d=f.split("."),y=0;y<d.length;y++)if(!p.test(d[y]))return!1;return!0};var j={protocols:["http","https","ftp"],require_tld:!0,require_protocol:!1,require_valid_protocol:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_protocol_relative_urls:!1};t.isURL=function(e,r){if(!e||e.length>=2083||/\s/.test(e))return!1;if(0===e.indexOf("mailto:"))return!1;r=merge(r,j);var n,i,o,s,a,u,c;if(c=e.split("://"),c.length>1){if(n=c.shift(),r.require_valid_protocol&&r.protocols.indexOf(n)===-1)return!1}else{if(r.require_protocol)return!1;r.allow_protocol_relative_urls&&"//"===e.substr(0,2)&&(c[0]=e.substr(2))}return e=c.join("://"),c=e.split("#"),e=c.shift(),c=e.split("?"),e=c.shift(),c=e.split("/"),e=c.shift(),c=e.split("@"),!(c.length>1&&(i=c.shift(),i.indexOf(":")>=0&&i.split(":").length>2))&&(s=c.join("@"),c=s.split(":"),o=c.shift(),!(c.length&&(u=c.join(":"),a=parseInt(u,10),!/^[0-9]+$/.test(u)||a<=0||a>65535))&&(!(!t.isIP(o)&&!t.isFQDN(o,r)&&"localhost"!==o)&&((!r.host_whitelist||r.host_whitelist.indexOf(o)!==-1)&&(!r.host_blacklist||r.host_blacklist.indexOf(o)===-1))))},t.isMACAddress=function(t){return d.test(t)},t.isIP=function(e,r){if(r=r?r+"":"",!r)return t.isIP(e,4)||t.isIP(e,6);if("4"===r){if(!y.test(e))return!1;var n=e.split(".").sort(function(t,e){return t-e});return n[3]<=255}if("6"===r){var i=e.split(":"),o=!1,s=t.isIP(i[i.length-1],4),a=s?7:8;if(i.length>a)return!1;if("::"===e)return!0;"::"===e.substr(0,2)?(i.shift(),i.shift(),o=!0):"::"===e.substr(e.length-2)&&(i.pop(),i.pop(),o=!0);for(var u=0;u<i.length;++u)if(""===i[u]&&u>0&&u<i.length-1){if(o)return!1;o=!0}else if(s&&u==i.length-1);else if(!g.test(i[u]))return!1;return o?i.length>=1:i.length===a}return!1};var N={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1};t.isFQDN=function(t,e){e=merge(e,N),e.allow_trailing_dot&&"."===t[t.length-1]&&(t=t.substring(0,t.length-1));var r=t.split(".");if(e.require_tld){var n=r.pop();if(!r.length||!/^([a-z\u00a1-\uffff]{2,}|xn[a-z0-9-]{2,})$/i.test(n))return!1}for(var i,o=0;o<r.length;o++){if(i=r[o],e.allow_underscores){if(i.indexOf("__")>=0)return!1;i=i.replace(/_/g,"")}if(!/^[a-z\u00a1-\uffff0-9-]+$/i.test(i))return!1;if(/[\uff01-\uff5e]/.test(i))return!1;if("-"===i[0]||"-"===i[i.length-1])return!1}return!0},t.isBoolean=function(t){return["true","false","1","0"].indexOf(t)>=0},t.isAlpha=function(t,e){if(e=e||"en-US",e in v)return v[e].test(t);throw new Error("Invalid locale '"+e+"'")},t.isAlphanumeric=function(t,e){if(e=e||"en-US",e in m)return m[e].test(t);throw new Error("Invalid locale '"+e+"'")},t.isNumeric=function(t){return E.test(t)},t.isDecimal=function(t){return""!==t&&k.test(t)},t.isHexadecimal=function(t){return S.test(t)},t.isHexColor=function(t){return C.test(t)},t.isLowercase=function(t){return t===t.toLowerCase()},t.isUppercase=function(t){return t===t.toUpperCase()},t.isInt=function(t,e){return e=e||{},T.test(t)&&(!e.hasOwnProperty("min")||t>=e.min)&&(!e.hasOwnProperty("max")||t<=e.max)},t.isFloat=function(t,e){return e=e||{},""!==t&&"."!==t&&(A.test(t)&&(!e.hasOwnProperty("min")||t>=e.min)&&(!e.hasOwnProperty("max")||t<=e.max))},t.isDivisibleBy=function(e,r){return t.toFloat(e)%parseInt(r,10)===0},t.isNull=function(t){return 0===t.length},t.isLength=function(t,e){var r,n;"object"==typeof e?(r=e.min||0,n=e.max):(r=arguments[1],n=arguments[2]);var i=t.match(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g)||[],o=t.length-i.length;return o>=r&&("undefined"==typeof n||o<=n)},t.isByteLength=function(t,e){var r,n;"object"==typeof e?(r=e.min||0,n=e.max):(r=arguments[1],n=arguments[2]);var i=encodeURI(t).split(/%..|./).length-1;return i>=r&&("undefined"==typeof n||i<=n)},t.isUUID=function(t,e){var r=b[e?e:"all"];return r&&r.test(t)},t.isDate=function(t){var e=new Date(Date.parse(t));if(isNaN(e))return!1;var r=getTimezoneOffset(t);if(null!==r){var n=e.getTimezoneOffset()-r;e=new Date(e.getTime()+6e4*n)}var i,o,s,a=String(e.getDate());return!(o=t.match(/(^|[^:\d])[23]\d([^:\d]|$)/g))||(i=o.map(function(t){return t.match(/\d+/g)[0]}).join("/"),s=String(e.getFullYear()).slice(-2),i===a||i===s||(i===a+"/"+s||i===s+"/"+a))},t.isAfter=function(e,r){var n=t.toDate(r||new Date),i=t.toDate(e);return!!(i&&n&&i>n)},t.isBefore=function(e,r){var n=t.toDate(r||new Date),i=t.toDate(e);return!!(i&&n&&i<n)},t.isIn=function(e,r){var n;if("[object Array]"===Object.prototype.toString.call(r)){var i=[];for(n in r)i[n]=t.toString(r[n]);return i.indexOf(e)>=0}return"object"==typeof r?r.hasOwnProperty(e):!(!r||"function"!=typeof r.indexOf)&&r.indexOf(e)>=0},t.isWhitelisted=function(t,e){for(var r=t.length-1;r>=0;r--)if(e.indexOf(t[r])===-1)return!1;return!0},t.isCreditCard=function(t){var e=t.replace(/[^0-9]+/g,"");if(!l.test(e))return!1;for(var r,n,i,o=0,s=e.length-1;s>=0;s--)r=e.substring(s,s+1),n=parseInt(r,10),i?(n*=2,o+=n>=10?n%10+1:n):o+=n,i=!i;return!(o%10!==0||!e)},t.isISIN=function(t){if(!f.test(t))return!1;for(var e,r,n=t.replace(/[A-Z]/g,function(t){return parseInt(t,36)}),i=0,o=!0,s=n.length-2;s>=0;s--)e=n.substring(s,s+1),r=parseInt(e,10),o?(r*=2,i+=r>=10?r+1:r):i+=r,o=!o;return parseInt(t.substr(t.length-1),10)===(1e4-i)%10},t.isISBN=function(e,r){if(r=r?r+"":"",!r)return t.isISBN(e,10)||t.isISBN(e,13);var n,i=e.replace(/[\s-]+/g,""),o=0;if("10"===r){if(!h.test(i))return!1;for(n=0;n<9;n++)o+=(n+1)*i.charAt(n);if(o+="X"===i.charAt(9)?100:10*i.charAt(9),o%11===0)return!!i}else if("13"===r){if(!p.test(i))return!1;var s=[1,3];for(n=0;n<12;n++)o+=s[n%2]*i.charAt(n);if(i.charAt(12)-(10-o%10)%10===0)return!!i}return!1},t.isMobilePhone=function(t,e){return e in R&&R[e].test(t)};var U={symbol:"$",require_symbol:!1,allow_space_after_symbol:!1,symbol_after_digits:!1,allow_negatives:!0,parens_for_negatives:!1,negative_sign_before_digits:!1,negative_sign_after_digits:!1,allow_negative_sign_placeholder:!1,thousands_separator:",",decimal_separator:".",allow_space_after_digits:!1};t.isCurrency=function(t,e){return e=merge(e,U),currencyRegex(e).test(t)},t.isJSON=function(t){try{var e=JSON.parse(t);return!!e&&"object"==typeof e}catch(t){}return!1},t.isMultibyte=function(t){return x.test(t)},t.isAscii=function(t){return O.test(t)},t.isFullWidth=function(t){return P.test(t)},t.isHalfWidth=function(t){return M.test(t)},t.isVariableWidth=function(t){return P.test(t)&&M.test(t)},t.isSurrogatePair=function(t){return B.test(t)},t.isBase64=function(t){return F.test(t)},t.isMongoId=function(e){return t.isHexadecimal(e)&&24===e.length},t.isISO8601=function(t){return I.test(t)},t.ltrim=function(t,e){var r=e?new RegExp("^["+e+"]+","g"):/^\s+/g;return t.replace(r,"")},t.rtrim=function(t,e){var r=e?new RegExp("["+e+"]+$","g"):/\s+$/g;return t.replace(r,"")},t.trim=function(t,e){var r=e?new RegExp("^["+e+"]+|["+e+"]+$","g"):/^\s+|\s+$/g;return t.replace(r,"")},t.escape=function(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\//g,"&#x2F;").replace(/\`/g,"&#96;")},t.stripLow=function(e,r){var n=r?"\\x00-\\x09\\x0B\\x0C\\x0E-\\x1F\\x7F":"\\x00-\\x1F\\x7F";return t.blacklist(e,n)},t.whitelist=function(t,e){return t.replace(new RegExp("[^"+e+"]+","g"),"")},t.blacklist=function(t,e){return t.replace(new RegExp("["+e+"]+","g"),"")};var J={lowercase:!0,remove_dots:!0,remove_extension:!0};return t.normalizeEmail=function(e,r){if(r=merge(r,J),!t.isEmail(e))return!1;var n=e.split("@",2);if(n[1]=n[1].toLowerCase(),"gmail.com"===n[1]||"googlemail.com"===n[1]){if(r.remove_extension&&(n[0]=n[0].split("+")[0]),r.remove_dots&&(n[0]=n[0].replace(/\./g,"")),!n[0].length)return!1;n[0]=n[0].toLowerCase(),n[1]="gmail.com"}else r.lowercase&&(n[0]=n[0].toLowerCase());return n.join("@")},t.init(),t})},{161:161}],163:[function(t,e,r){"use strict";t(152),t(148),Object.assign||t(149),Object.setPrototypeOf||t(150),"undefined"==typeof Promise&&t(151),Array.from||(t(146),t(147)),"undefined"==typeof Symbol&&t(153)},{146:146,147:147,148:148,149:149,150:150,151:151,152:152,153:153}]},{},[35])(35)})}).call(e,r(26).Buffer,function(){return this}(),r(30))},function(t,e,r){(function(t){/*!
	 * The buffer module from node.js, for the browser.
	 *
	 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
	 * @license  MIT
	 */
"use strict";function typedArraySupport(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()&&"function"==typeof t.subarray&&0===t.subarray(1,1).byteLength}catch(t){return!1}}function kMaxLength(){return Buffer.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function createBuffer(t,e){if(kMaxLength()<e)throw new RangeError("Invalid typed array length");return Buffer.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e),t.__proto__=Buffer.prototype):(null===t&&(t=new Buffer(e)),t.length=e),t}function Buffer(t,e,r){if(!(Buffer.TYPED_ARRAY_SUPPORT||this instanceof Buffer))return new Buffer(t,e,r);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return allocUnsafe(this,t)}return from(this,t,e,r)}function from(t,e,r,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?fromArrayBuffer(t,e,r,n):"string"==typeof e?fromString(t,e,r):fromObject(t,e)}function assertSize(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function alloc(t,e,r,n){return assertSize(e),e<=0?createBuffer(t,e):void 0!==r?"string"==typeof n?createBuffer(t,e).fill(r,n):createBuffer(t,e).fill(r):createBuffer(t,e)}function allocUnsafe(t,e){if(assertSize(e),t=createBuffer(t,e<0?0:0|checked(e)),!Buffer.TYPED_ARRAY_SUPPORT)for(var r=0;r<e;++r)t[r]=0;return t}function fromString(t,e,r){if("string"==typeof r&&""!==r||(r="utf8"),!Buffer.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|byteLength(e,r);t=createBuffer(t,n);var i=t.write(e,r);return i!==n&&(t=t.slice(0,i)),t}function fromArrayLike(t,e){var r=e.length<0?0:0|checked(e.length);t=createBuffer(t,r);for(var n=0;n<r;n+=1)t[n]=255&e[n];return t}function fromArrayBuffer(t,e,r,n){if(e.byteLength,r<0||e.byteLength<r)throw new RangeError("'offset' is out of bounds");if(e.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");return e=void 0===r&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,r):new Uint8Array(e,r,n),Buffer.TYPED_ARRAY_SUPPORT?(t=e,t.__proto__=Buffer.prototype):t=fromArrayLike(t,e),t}function fromObject(t,e){if(Buffer.isBuffer(e)){var r=0|checked(e.length);return t=createBuffer(t,r),0===t.length?t:(e.copy(t,0,0,r),t)}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||isnan(e.length)?createBuffer(t,0):fromArrayLike(t,e);if("Buffer"===e.type&&o(e.data))return fromArrayLike(t,e.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function checked(t){if(t>=kMaxLength())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+kMaxLength().toString(16)+" bytes");return 0|t}function SlowBuffer(t){return+t!=t&&(t=0),Buffer.alloc(+t)}function byteLength(t,e){if(Buffer.isBuffer(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var r=t.length;if(0===r)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return utf8ToBytes(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return base64ToBytes(t).length;default:if(n)return utf8ToBytes(t).length;e=(""+e).toLowerCase(),n=!0}}function slowToString(t,e,r){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if(r>>>=0,e>>>=0,r<=e)return"";for(t||(t="utf8");;)switch(t){case"hex":return hexSlice(this,e,r);case"utf8":case"utf-8":return utf8Slice(this,e,r);case"ascii":return asciiSlice(this,e,r);case"latin1":case"binary":return latin1Slice(this,e,r);case"base64":return base64Slice(this,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return utf16leSlice(this,e,r);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function swap(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function bidirectionalIndexOf(t,e,r,n,i){if(0===t.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:t.length-1),r<0&&(r=t.length+r),r>=t.length){if(i)return-1;r=t.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof e&&(e=Buffer.from(e,n)),Buffer.isBuffer(e))return 0===e.length?-1:arrayIndexOf(t,e,r,n,i);if("number"==typeof e)return e&=255,Buffer.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(t,e,r):Uint8Array.prototype.lastIndexOf.call(t,e,r):arrayIndexOf(t,[e],r,n,i);throw new TypeError("val must be string, number or Buffer")}function arrayIndexOf(t,e,r,n,i){function read(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}var o=1,s=t.length,a=e.length;if(void 0!==n&&(n=String(n).toLowerCase(),"ucs2"===n||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;o=2,s/=2,a/=2,r/=2}var u;if(i){var c=-1;for(u=r;u<s;u++)if(read(t,u)===read(e,c===-1?0:u-c)){if(c===-1&&(c=u),u-c+1===a)return c*o}else c!==-1&&(u-=u-c),c=-1}else for(r+a>s&&(r=s-a),u=r;u>=0;u--){for(var l=!0,f=0;f<a;f++)if(read(t,u+f)!==read(e,f)){l=!1;break}if(l)return u}return-1}function hexWrite(t,e,r,n){r=Number(r)||0;var i=t.length-r;n?(n=Number(n),n>i&&(n=i)):n=i;var o=e.length;if(o%2!==0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var s=0;s<n;++s){var a=parseInt(e.substr(2*s,2),16);if(isNaN(a))return s;t[r+s]=a}return s}function utf8Write(t,e,r,n){return blitBuffer(utf8ToBytes(e,t.length-r),t,r,n)}function asciiWrite(t,e,r,n){return blitBuffer(asciiToBytes(e),t,r,n)}function latin1Write(t,e,r,n){return asciiWrite(t,e,r,n)}function base64Write(t,e,r,n){return blitBuffer(base64ToBytes(e),t,r,n)}function ucs2Write(t,e,r,n){return blitBuffer(utf16leToBytes(e,t.length-r),t,r,n)}function base64Slice(t,e,r){return 0===e&&r===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,r))}function utf8Slice(t,e,r){r=Math.min(t.length,r);for(var n=[],i=e;i<r;){var o=t[i],s=null,a=o>239?4:o>223?3:o>191?2:1;if(i+a<=r){var u,c,l,f;switch(a){case 1:o<128&&(s=o);break;case 2:u=t[i+1],128===(192&u)&&(f=(31&o)<<6|63&u,f>127&&(s=f));break;case 3:u=t[i+1],c=t[i+2],128===(192&u)&&128===(192&c)&&(f=(15&o)<<12|(63&u)<<6|63&c,f>2047&&(f<55296||f>57343)&&(s=f));break;case 4:u=t[i+1],c=t[i+2],l=t[i+3],128===(192&u)&&128===(192&c)&&128===(192&l)&&(f=(15&o)<<18|(63&u)<<12|(63&c)<<6|63&l,f>65535&&f<1114112&&(s=f))}}null===s?(s=65533,a=1):s>65535&&(s-=65536,n.push(s>>>10&1023|55296),s=56320|1023&s),n.push(s),i+=a}return decodeCodePointsArray(n)}function decodeCodePointsArray(t){var e=t.length;if(e<=s)return String.fromCharCode.apply(String,t);for(var r="",n=0;n<e;)r+=String.fromCharCode.apply(String,t.slice(n,n+=s));return r}function asciiSlice(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(127&t[i]);return n}function latin1Slice(t,e,r){var n="";r=Math.min(t.length,r);for(var i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n}function hexSlice(t,e,r){var n=t.length;(!e||e<0)&&(e=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=e;o<r;++o)i+=toHex(t[o]);return i}function utf16leSlice(t,e,r){for(var n=t.slice(e,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function checkOffset(t,e,r){if(t%1!==0||t<0)throw new RangeError("offset is not uint");if(t+e>r)throw new RangeError("Trying to access beyond buffer length")}function checkInt(t,e,r,n,i,o){if(!Buffer.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>i||e<o)throw new RangeError('"value" argument is out of bounds');if(r+n>t.length)throw new RangeError("Index out of range")}function objectWriteUInt16(t,e,r,n){e<0&&(e=65535+e+1);for(var i=0,o=Math.min(t.length-r,2);i<o;++i)t[r+i]=(e&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function objectWriteUInt32(t,e,r,n){e<0&&(e=4294967295+e+1);for(var i=0,o=Math.min(t.length-r,4);i<o;++i)t[r+i]=e>>>8*(n?i:3-i)&255}function checkIEEE754(t,e,r,n,i,o){if(r+n>t.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function writeFloat(t,e,r,n,o){return o||checkIEEE754(t,e,r,4,3.4028234663852886e38,-3.4028234663852886e38),i.write(t,e,r,n,23,4),r+4}function writeDouble(t,e,r,n,o){return o||checkIEEE754(t,e,r,8,1.7976931348623157e308,-1.7976931348623157e308),i.write(t,e,r,n,52,8),r+8}function base64clean(t){if(t=stringtrim(t).replace(a,""),t.length<2)return"";for(;t.length%4!==0;)t+="=";return t}function stringtrim(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function toHex(t){return t<16?"0"+t.toString(16):t.toString(16)}function utf8ToBytes(t,e){e=e||1/0;for(var r,n=t.length,i=null,o=[],s=0;s<n;++s){if(r=t.charCodeAt(s),r>55295&&r<57344){if(!i){if(r>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(s+1===n){(e-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(e-=3)>-1&&o.push(239,191,189),i=r;continue}r=(i-55296<<10|r-56320)+65536}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((e-=1)<0)break;o.push(r)}else if(r<2048){if((e-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((e-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function asciiToBytes(t){for(var e=[],r=0;r<t.length;++r)e.push(255&t.charCodeAt(r));return e}function utf16leToBytes(t,e){for(var r,n,i,o=[],s=0;s<t.length&&!((e-=2)<0);++s)r=t.charCodeAt(s),n=r>>8,i=r%256,o.push(i),o.push(n);return o}function base64ToBytes(t){return n.toByteArray(base64clean(t))}function blitBuffer(t,e,r,n){for(var i=0;i<n&&!(i+r>=e.length||i>=t.length);++i)e[i+r]=t[i];return i}function isnan(t){return t!==t}var n=r(27),i=r(28),o=r(29);e.Buffer=Buffer,e.SlowBuffer=SlowBuffer,e.INSPECT_MAX_BYTES=50,Buffer.TYPED_ARRAY_SUPPORT=void 0!==t.TYPED_ARRAY_SUPPORT?t.TYPED_ARRAY_SUPPORT:typedArraySupport(),e.kMaxLength=kMaxLength(),Buffer.poolSize=8192,Buffer._augment=function(t){return t.__proto__=Buffer.prototype,t},Buffer.from=function(t,e,r){return from(null,t,e,r)},Buffer.TYPED_ARRAY_SUPPORT&&(Buffer.prototype.__proto__=Uint8Array.prototype,Buffer.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&Buffer[Symbol.species]===Buffer&&Object.defineProperty(Buffer,Symbol.species,{value:null,configurable:!0})),Buffer.alloc=function(t,e,r){return alloc(null,t,e,r)},Buffer.allocUnsafe=function(t){return allocUnsafe(null,t)},Buffer.allocUnsafeSlow=function(t){return allocUnsafe(null,t)},Buffer.isBuffer=function(t){return!(null==t||!t._isBuffer)},Buffer.compare=function(t,e){if(!Buffer.isBuffer(t)||!Buffer.isBuffer(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var r=t.length,n=e.length,i=0,o=Math.min(r,n);i<o;++i)if(t[i]!==e[i]){r=t[i],n=e[i];break}return r<n?-1:n<r?1:0},Buffer.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},Buffer.concat=function(t,e){if(!o(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return Buffer.alloc(0);var r;if(void 0===e)for(e=0,r=0;r<t.length;++r)e+=t[r].length;var n=Buffer.allocUnsafe(e),i=0;for(r=0;r<t.length;++r){var s=t[r];if(!Buffer.isBuffer(s))throw new TypeError('"list" argument must be an Array of Buffers');s.copy(n,i),i+=s.length}return n},Buffer.byteLength=byteLength,Buffer.prototype._isBuffer=!0,Buffer.prototype.swap16=function(){var t=this.length;if(t%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)swap(this,e,e+1);return this},Buffer.prototype.swap32=function(){var t=this.length;if(t%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)swap(this,e,e+3),swap(this,e+1,e+2);return this},Buffer.prototype.swap64=function(){var t=this.length;if(t%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)swap(this,e,e+7),swap(this,e+1,e+6),swap(this,e+2,e+5),swap(this,e+3,e+4);return this},Buffer.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?utf8Slice(this,0,t):slowToString.apply(this,arguments)},Buffer.prototype.equals=function(t){if(!Buffer.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===Buffer.compare(this,t)},Buffer.prototype.inspect=function(){var t="",r=e.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(t+=" ... ")),"<Buffer "+t+">"},Buffer.prototype.compare=function(t,e,r,n,i){if(!Buffer.isBuffer(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===r&&(r=t?t.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),e<0||r>t.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&e>=r)return 0;if(n>=i)return-1;if(e>=r)return 1;if(e>>>=0,r>>>=0,n>>>=0,i>>>=0,this===t)return 0;for(var o=i-n,s=r-e,a=Math.min(o,s),u=this.slice(n,i),c=t.slice(e,r),l=0;l<a;++l)if(u[l]!==c[l]){o=u[l],s=c[l];break}return o<s?-1:s<o?1:0},Buffer.prototype.includes=function(t,e,r){return this.indexOf(t,e,r)!==-1},Buffer.prototype.indexOf=function(t,e,r){return bidirectionalIndexOf(this,t,e,r,!0)},Buffer.prototype.lastIndexOf=function(t,e,r){return bidirectionalIndexOf(this,t,e,r,!1)},Buffer.prototype.write=function(t,e,r,n){if(void 0===e)n="utf8",r=this.length,e=0;else if(void 0===r&&"string"==typeof e)n=e,r=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-e;if((void 0===r||r>i)&&(r=i),t.length>0&&(r<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return hexWrite(this,t,e,r);case"utf8":case"utf-8":return utf8Write(this,t,e,r);case"ascii":return asciiWrite(this,t,e,r);case"latin1":case"binary":return latin1Write(this,t,e,r);case"base64":return base64Write(this,t,e,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ucs2Write(this,t,e,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},Buffer.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var s=4096;Buffer.prototype.slice=function(t,e){var r=this.length;t=~~t,e=void 0===e?r:~~e,t<0?(t+=r,t<0&&(t=0)):t>r&&(t=r),e<0?(e+=r,e<0&&(e=0)):e>r&&(e=r),e<t&&(e=t);var n;if(Buffer.TYPED_ARRAY_SUPPORT)n=this.subarray(t,e),n.__proto__=Buffer.prototype;else{var i=e-t;n=new Buffer(i,void 0);for(var o=0;o<i;++o)n[o]=this[o+t]}return n},Buffer.prototype.readUIntLE=function(t,e,r){t|=0,e|=0,r||checkOffset(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return n},Buffer.prototype.readUIntBE=function(t,e,r){t|=0,e|=0,r||checkOffset(t,e,this.length);for(var n=this[t+--e],i=1;e>0&&(i*=256);)n+=this[t+--e]*i;return n},Buffer.prototype.readUInt8=function(t,e){return e||checkOffset(t,1,this.length),this[t]},Buffer.prototype.readUInt16LE=function(t,e){return e||checkOffset(t,2,this.length),this[t]|this[t+1]<<8},Buffer.prototype.readUInt16BE=function(t,e){return e||checkOffset(t,2,this.length),this[t]<<8|this[t+1]},Buffer.prototype.readUInt32LE=function(t,e){return e||checkOffset(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},Buffer.prototype.readUInt32BE=function(t,e){return e||checkOffset(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},Buffer.prototype.readIntLE=function(t,e,r){t|=0,e|=0,r||checkOffset(t,e,this.length);for(var n=this[t],i=1,o=0;++o<e&&(i*=256);)n+=this[t+o]*i;return i*=128,n>=i&&(n-=Math.pow(2,8*e)),n},Buffer.prototype.readIntBE=function(t,e,r){t|=0,e|=0,r||checkOffset(t,e,this.length);for(var n=e,i=1,o=this[t+--n];n>0&&(i*=256);)o+=this[t+--n]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},Buffer.prototype.readInt8=function(t,e){return e||checkOffset(t,1,this.length),128&this[t]?(255-this[t]+1)*-1:this[t]},Buffer.prototype.readInt16LE=function(t,e){e||checkOffset(t,2,this.length);var r=this[t]|this[t+1]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt16BE=function(t,e){e||checkOffset(t,2,this.length);var r=this[t+1]|this[t]<<8;return 32768&r?4294901760|r:r},Buffer.prototype.readInt32LE=function(t,e){return e||checkOffset(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},Buffer.prototype.readInt32BE=function(t,e){return e||checkOffset(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},Buffer.prototype.readFloatLE=function(t,e){return e||checkOffset(t,4,this.length),i.read(this,t,!0,23,4)},Buffer.prototype.readFloatBE=function(t,e){return e||checkOffset(t,4,this.length),i.read(this,t,!1,23,4)},Buffer.prototype.readDoubleLE=function(t,e){return e||checkOffset(t,8,this.length),i.read(this,t,!0,52,8)},Buffer.prototype.readDoubleBE=function(t,e){return e||checkOffset(t,8,this.length),i.read(this,t,!1,52,8)},Buffer.prototype.writeUIntLE=function(t,e,r,n){if(t=+t,e|=0,r|=0,!n){var i=Math.pow(2,8*r)-1;checkInt(this,t,e,r,i,0)}var o=1,s=0;for(this[e]=255&t;++s<r&&(o*=256);)this[e+s]=t/o&255;return e+r},Buffer.prototype.writeUIntBE=function(t,e,r,n){if(t=+t,e|=0,r|=0,!n){var i=Math.pow(2,8*r)-1;checkInt(this,t,e,r,i,0)}var o=r-1,s=1;for(this[e+o]=255&t;--o>=0&&(s*=256);)this[e+o]=t/s&255;return e+r},Buffer.prototype.writeUInt8=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,1,255,0),Buffer.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},Buffer.prototype.writeUInt16LE=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):objectWriteUInt16(this,t,e,!0),e+2},Buffer.prototype.writeUInt16BE=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,2,65535,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):objectWriteUInt16(this,t,e,!1),e+2},Buffer.prototype.writeUInt32LE=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):objectWriteUInt32(this,t,e,!0),e+4},Buffer.prototype.writeUInt32BE=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,4,4294967295,0),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):objectWriteUInt32(this,t,e,!1),e+4},Buffer.prototype.writeIntLE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);checkInt(this,t,e,r,i-1,-i)}var o=0,s=1,a=0;for(this[e]=255&t;++o<r&&(s*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+r},Buffer.prototype.writeIntBE=function(t,e,r,n){if(t=+t,e|=0,!n){var i=Math.pow(2,8*r-1);checkInt(this,t,e,r,i-1,-i)}var o=r-1,s=1,a=0;for(this[e+o]=255&t;--o>=0&&(s*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/s>>0)-a&255;return e+r},Buffer.prototype.writeInt8=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,1,127,-128),Buffer.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},Buffer.prototype.writeInt16LE=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):objectWriteUInt16(this,t,e,!0),e+2},Buffer.prototype.writeInt16BE=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,2,32767,-32768),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):objectWriteUInt16(this,t,e,!1),e+2},Buffer.prototype.writeInt32LE=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,4,2147483647,-2147483648),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):objectWriteUInt32(this,t,e,!0),e+4},Buffer.prototype.writeInt32BE=function(t,e,r){return t=+t,e|=0,r||checkInt(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),Buffer.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):objectWriteUInt32(this,t,e,!1),e+4},Buffer.prototype.writeFloatLE=function(t,e,r){return writeFloat(this,t,e,!0,r)},Buffer.prototype.writeFloatBE=function(t,e,r){return writeFloat(this,t,e,!1,r)},Buffer.prototype.writeDoubleLE=function(t,e,r){return writeDouble(this,t,e,!0,r)},Buffer.prototype.writeDoubleBE=function(t,e,r){return writeDouble(this,t,e,!1,r)},Buffer.prototype.copy=function(t,e,r,n){if(r||(r=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-r&&(n=t.length-e+r);var i,o=n-r;if(this===t&&r<e&&e<n)for(i=o-1;i>=0;--i)t[i+e]=this[i+r];else if(o<1e3||!Buffer.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)t[i+e]=this[i+r];else Uint8Array.prototype.set.call(t,this.subarray(r,r+o),e);return o},Buffer.prototype.fill=function(t,e,r,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===t.length){var i=t.charCodeAt(0);i<256&&(t=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!Buffer.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<r)throw new RangeError("Out of range index");if(r<=e)return this;e>>>=0,r=void 0===r?this.length:r>>>0,t||(t=0);var o;if("number"==typeof t)for(o=e;o<r;++o)this[o]=t;else{var s=Buffer.isBuffer(t)?t:utf8ToBytes(new Buffer(t,n).toString()),a=s.length;for(o=0;o<r-e;++o)this[o+e]=s[o%a]}return this};var a=/[^+\/0-9A-Za-z-_]/g}).call(e,function(){return this}())},function(t,e){"use strict";function placeHoldersCount(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");return"="===t[e-2]?2:"="===t[e-1]?1:0}function byteLength(t){return 3*t.length/4-placeHoldersCount(t)}function toByteArray(t){var e,r,o,s,a,u,c=t.length;a=placeHoldersCount(t),u=new i(3*c/4-a),o=a>0?c-4:c;var l=0;for(e=0,r=0;e<o;e+=4,r+=3)s=n[t.charCodeAt(e)]<<18|n[t.charCodeAt(e+1)]<<12|n[t.charCodeAt(e+2)]<<6|n[t.charCodeAt(e+3)],u[l++]=s>>16&255,u[l++]=s>>8&255,u[l++]=255&s;return 2===a?(s=n[t.charCodeAt(e)]<<2|n[t.charCodeAt(e+1)]>>4,u[l++]=255&s):1===a&&(s=n[t.charCodeAt(e)]<<10|n[t.charCodeAt(e+1)]<<4|n[t.charCodeAt(e+2)]>>2,u[l++]=s>>8&255,u[l++]=255&s),u}function tripletToBase64(t){return r[t>>18&63]+r[t>>12&63]+r[t>>6&63]+r[63&t]}function encodeChunk(t,e,r){for(var n,i=[],o=e;o<r;o+=3)n=(t[o]<<16)+(t[o+1]<<8)+t[o+2],i.push(tripletToBase64(n));return i.join("")}function fromByteArray(t){for(var e,n=t.length,i=n%3,o="",s=[],a=16383,u=0,c=n-i;u<c;u+=a)s.push(encodeChunk(t,u,u+a>c?c:u+a));return 1===i?(e=t[n-1],o+=r[e>>2],o+=r[e<<4&63],o+="=="):2===i&&(e=(t[n-2]<<8)+t[n-1],o+=r[e>>10],o+=r[e>>4&63],o+=r[e<<2&63],o+="="),s.push(o),s.join("")}e.byteLength=byteLength,e.toByteArray=toByteArray,e.fromByteArray=fromByteArray;for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,a=o.length;s<a;++s)r[s]=o[s],n[o.charCodeAt(s)]=s;n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},function(t,e){e.read=function(t,e,r,n,i){var o,s,a=8*i-n-1,u=(1<<a)-1,c=u>>1,l=-7,f=r?i-1:0,h=r?-1:1,p=t[e+f];for(f+=h,o=p&(1<<-l)-1,p>>=-l,l+=a;l>0;o=256*o+t[e+f],f+=h,l-=8);for(s=o&(1<<-l)-1,o>>=-l,l+=n;l>0;s=256*s+t[e+f],f+=h,l-=8);if(0===o)o=1-c;else{if(o===u)return s?NaN:(p?-1:1)*(1/0);s+=Math.pow(2,n),o-=c}return(p?-1:1)*s*Math.pow(2,o-n)},e.write=function(t,e,r,n,i,o){var s,a,u,c=8*o-i-1,l=(1<<c)-1,f=l>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,d=n?1:-1,y=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,s=l):(s=Math.floor(Math.log(e)/Math.LN2),e*(u=Math.pow(2,-s))<1&&(s--,u*=2),e+=s+f>=1?h/u:h*Math.pow(2,1-f),e*u>=2&&(s++,u/=2),s+f>=l?(a=0,s=l):s+f>=1?(a=(e*u-1)*Math.pow(2,i),s+=f):(a=e*Math.pow(2,f-1)*Math.pow(2,i),s=0));i>=8;t[r+p]=255&a,p+=d,a/=256,i-=8);for(s=s<<i|a,c+=i;c>0;t[r+p]=255&s,p+=d,s/=256,c-=8);t[r+p-d]|=128*y}},function(t,e){var r={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==r.call(t)}},,function(t,e,r){"use strict";var n=r(25),i=r(32),o=function(){function PostService(){this.converter=new i.Converter}return PostService.prototype.getAll=function(){var t=this;return n.db.Post.find().descending("date").limit(30).resultList().then(function(e){return e.forEach(function(e){e.text=t.converter.makeHtml(e.text)}),e})},PostService}();e.PostService=o},function(t,e,r){var n;/*! showdown 09-01-2017 */
(function(){function getDefaultOpts(t){"use strict";var e={omitExtraWLInCodeBlocks:{defaultValue:!1,describe:"Omit the default extra whiteline added to code blocks",type:"boolean"},noHeaderId:{defaultValue:!1,describe:"Turn on/off generated header id",type:"boolean"},prefixHeaderId:{defaultValue:!1,describe:"Specify a prefix to generated header ids",type:"string"},ghCompatibleHeaderId:{defaultValue:!1,describe:"Generate header ids compatible with github style (spaces are replaced with dashes, a bunch of non alphanumeric chars are removed)",type:"boolean"},headerLevelStart:{defaultValue:!1,describe:"The header blocks level start",type:"integer"},parseImgDimensions:{defaultValue:!1,describe:"Turn on/off image dimension parsing",type:"boolean"},simplifiedAutoLink:{defaultValue:!1,describe:"Turn on/off GFM autolink style",type:"boolean"},excludeTrailingPunctuationFromURLs:{defaultValue:!1,describe:"Excludes trailing punctuation from links generated with autoLinking",type:"boolean"},literalMidWordUnderscores:{defaultValue:!1,describe:"Parse midword underscores as literal underscores",type:"boolean"},strikethrough:{defaultValue:!1,describe:"Turn on/off strikethrough support",type:"boolean"},tables:{defaultValue:!1,describe:"Turn on/off tables support",type:"boolean"},tablesHeaderId:{defaultValue:!1,describe:"Add an id to table headers",type:"boolean"},ghCodeBlocks:{defaultValue:!0,describe:"Turn on/off GFM fenced code blocks support",type:"boolean"},tasklists:{defaultValue:!1,describe:"Turn on/off GFM tasklist support",type:"boolean"},smoothLivePreview:{defaultValue:!1,describe:"Prevents weird effects in live previews due to incomplete input",type:"boolean"},smartIndentationFix:{defaultValue:!1,description:"Tries to smartly fix indentation in es6 strings",type:"boolean"},disableForced4SpacesIndentedSublists:{defaultValue:!1,description:"Disables the requirement of indenting nested sublists by 4 spaces",type:"boolean"},simpleLineBreaks:{defaultValue:!1,description:"Parses simple line breaks as <br> (GFM Style)",type:"boolean"},requireSpaceBeforeHeadingText:{defaultValue:!1,description:"Makes adding a space between `#` and the header text mandatory (GFM Style)",type:"boolean"},ghMentions:{defaultValue:!1,description:"Enables github @mentions",type:"boolean"}};if(t===!1)return JSON.parse(JSON.stringify(e));var r={};for(var n in e)e.hasOwnProperty(n)&&(r[n]=e[n].defaultValue);return r}function allOptionsOn(){"use strict";var t=getDefaultOpts(!0),e={};for(var r in t)t.hasOwnProperty(r)&&(e[r]=!0);return e}function validate(t,e){"use strict";var r=e?"Error in "+e+" extension->":"Error in unnamed extension",n={valid:!0,error:""};i.helper.isArray(t)||(t=[t]);for(var o=0;o<t.length;++o){var s=r+" sub-extension "+o+": ",a=t[o];if("object"!=typeof a)return n.valid=!1,n.error=s+"must be an object, but "+typeof a+" given",n;if(!i.helper.isString(a.type))return n.valid=!1,n.error=s+'property "type" must be a string, but '+typeof a.type+" given",n;var u=a.type=a.type.toLowerCase();if("language"===u&&(u=a.type="lang"),"html"===u&&(u=a.type="output"),"lang"!==u&&"output"!==u&&"listener"!==u)return n.valid=!1,n.error=s+"type "+u+' is not recognized. Valid values: "lang/language", "output/html" or "listener"',n;if("listener"===u){if(i.helper.isUndefined(a.listeners))return n.valid=!1,n.error=s+'. Extensions of type "listener" must have a property called "listeners"',n}else if(i.helper.isUndefined(a.filter)&&i.helper.isUndefined(a.regex))return n.valid=!1,n.error=s+u+' extensions must define either a "regex" property or a "filter" method',n;if(a.listeners){if("object"!=typeof a.listeners)return n.valid=!1,n.error=s+'"listeners" property must be an object but '+typeof a.listeners+" given",n;for(var c in a.listeners)if(a.listeners.hasOwnProperty(c)&&"function"!=typeof a.listeners[c])return n.valid=!1,n.error=s+'"listeners" property must be an hash of [event name]: [callback]. listeners.'+c+" must be a function but "+typeof a.listeners[c]+" given",n}if(a.filter){if("function"!=typeof a.filter)return n.valid=!1,n.error=s+'"filter" must be a function, but '+typeof a.filter+" given",n}else if(a.regex){if(i.helper.isString(a.regex)&&(a.regex=new RegExp(a.regex,"g")),!a.regex instanceof RegExp)return n.valid=!1,n.error=s+'"regex" property must either be a string or a RegExp object, but '+typeof a.regex+" given",n;if(i.helper.isUndefined(a.replace))return n.valid=!1,n.error=s+'"regex" extensions must implement a replace string or function',n}}return n}function escapeCharactersCallback(t,e){"use strict";var r=e.charCodeAt(0);return"~E"+r+"E"}var i={},o={},s={},a=getDefaultOpts(!0),u="vanilla",c={github:{omitExtraWLInCodeBlocks:!0,prefixHeaderId:"user-content-",simplifiedAutoLink:!0,excludeTrailingPunctuationFromURLs:!0,literalMidWordUnderscores:!0,strikethrough:!0,tables:!0,tablesHeaderId:!0,ghCodeBlocks:!0,tasklists:!0,disableForced4SpacesIndentedSublists:!0,simpleLineBreaks:!0,requireSpaceBeforeHeadingText:!0,ghCompatibleHeaderId:!0,ghMentions:!0},vanilla:getDefaultOpts(!0),allOn:allOptionsOn()};i.helper={},i.extensions={},i.setOption=function(t,e){"use strict";return a[t]=e,this},i.getOption=function(t){"use strict";return a[t]},i.getOptions=function(){"use strict";return a},i.resetOptions=function(){"use strict";a=getDefaultOpts(!0)},i.setFlavor=function(t){"use strict";if(!c.hasOwnProperty(t))throw Error(t+" flavor was not found");var e=c[t];u=t;for(var r in e)e.hasOwnProperty(r)&&(a[r]=e[r])},i.getFlavor=function(){"use strict";return u},i.getFlavorOptions=function(t){"use strict";if(c.hasOwnProperty(t))return c[t]},i.getDefaultOptions=function(t){"use strict";return getDefaultOpts(t)},i.subParser=function(t,e){"use strict";if(i.helper.isString(t)){if("undefined"==typeof e){if(o.hasOwnProperty(t))return o[t];throw Error("SubParser named "+t+" not registered!")}o[t]=e}},i.extension=function(t,e){"use strict";if(!i.helper.isString(t))throw Error("Extension 'name' must be a string");if(t=i.helper.stdExtName(t),i.helper.isUndefined(e)){if(!s.hasOwnProperty(t))throw Error("Extension named "+t+" is not registered!");return s[t]}"function"==typeof e&&(e=e()),i.helper.isArray(e)||(e=[e]);var r=validate(e,t);if(!r.valid)throw Error(r.error);s[t]=e},i.getAllExtensions=function(){"use strict";return s},i.removeExtension=function(t){"use strict";delete s[t]},i.resetExtensions=function(){"use strict";s={}},i.validateExtension=function(t){"use strict";var e=validate(t,null);return!!e.valid||(console.warn(e.error),!1)},i.hasOwnProperty("helper")||(i.helper={}),i.helper.isString=function(t){"use strict";return"string"==typeof t||t instanceof String},i.helper.isFunction=function(t){"use strict";var e={};return t&&"[object Function]"===e.toString.call(t)},i.helper.forEach=function(t,e){"use strict";if("function"==typeof t.forEach)t.forEach(e);else for(var r=0;r<t.length;r++)e(t[r],r,t)},i.helper.isArray=function(t){"use strict";return t.constructor===Array},i.helper.isUndefined=function(t){"use strict";return"undefined"==typeof t},i.helper.stdExtName=function(t){"use strict";return t.replace(/[_-]||\s/g,"").toLowerCase()},i.helper.escapeCharactersCallback=escapeCharactersCallback,i.helper.escapeCharacters=function(t,e,r){"use strict";var n="(["+e.replace(/([\[\]\\])/g,"\\$1")+"])";r&&(n="\\\\"+n);var i=new RegExp(n,"g");return t=t.replace(i,escapeCharactersCallback)};var l=function(t,e,r,n){"use strict";var i,o,s,a,u,c=n||"",l=c.indexOf("g")>-1,f=new RegExp(e+"|"+r,"g"+c.replace(/g/g,"")),h=new RegExp(e,c.replace(/g/g,"")),p=[];do for(i=0;s=f.exec(t);)if(h.test(s[0]))i++||(o=f.lastIndex,a=o-s[0].length);else if(i&&!--i){u=s.index+s[0].length;var d={left:{start:a,end:o},match:{start:o,end:s.index},right:{start:s.index,end:u},wholeMatch:{start:a,end:u}};if(p.push(d),!l)return p}while(i&&(f.lastIndex=o));return p};i.helper.matchRecursiveRegExp=function(t,e,r,n){"use strict";for(var i=l(t,e,r,n),o=[],s=0;s<i.length;++s)o.push([t.slice(i[s].wholeMatch.start,i[s].wholeMatch.end),t.slice(i[s].match.start,i[s].match.end),t.slice(i[s].left.start,i[s].left.end),t.slice(i[s].right.start,i[s].right.end)]);return o},i.helper.replaceRecursiveRegExp=function(t,e,r,n,o){"use strict";if(!i.helper.isFunction(e)){var s=e;e=function(){return s}}var a=l(t,r,n,o),u=t,c=a.length;if(c>0){var f=[];0!==a[0].wholeMatch.start&&f.push(t.slice(0,a[0].wholeMatch.start));for(var h=0;h<c;++h)f.push(e(t.slice(a[h].wholeMatch.start,a[h].wholeMatch.end),t.slice(a[h].match.start,a[h].match.end),t.slice(a[h].left.start,a[h].left.end),t.slice(a[h].right.start,a[h].right.end))),h<c-1&&f.push(t.slice(a[h].wholeMatch.end,a[h+1].wholeMatch.start));a[c-1].wholeMatch.end<t.length&&f.push(t.slice(a[c-1].wholeMatch.end)),u=f.join("")}return u},"undefined"==typeof console&&(console={warn:function(t){"use strict";alert(t)},log:function(t){"use strict";alert(t)},error:function(t){"use strict";throw t}}),i.Converter=function(t){"use strict";function _constructor(){t=t||{};for(var r in a)a.hasOwnProperty(r)&&(e[r]=a[r]);if("object"!=typeof t)throw Error("Converter expects the passed parameter to be an object, but "+typeof t+" was passed instead.");for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);e.extensions&&i.helper.forEach(e.extensions,_parseExtension)}function _parseExtension(t,e){if(e=e||null,i.helper.isString(t)){if(t=i.helper.stdExtName(t),e=t,i.extensions[t])return console.warn("DEPRECATION WARNING: "+t+" is an old extension that uses a deprecated loading method.Please inform the developer that the extension should be updated!"),void legacyExtensionLoading(i.extensions[t],t);if(i.helper.isUndefined(s[t]))throw Error('Extension "'+t+'" could not be loaded. It was either not found or is not a valid extension.');t=s[t]}"function"==typeof t&&(t=t()),i.helper.isArray(t)||(t=[t]);var o=validate(t,e);if(!o.valid)throw Error(o.error);for(var a=0;a<t.length;++a){switch(t[a].type){case"lang":r.push(t[a]);break;case"output":n.push(t[a])}if(t[a].hasOwnProperty("listeners"))for(var u in t[a].listeners)t[a].listeners.hasOwnProperty(u)&&listen(u,t[a].listeners[u])}}function legacyExtensionLoading(t,e){"function"==typeof t&&(t=t(new i.Converter)),i.helper.isArray(t)||(t=[t]);var o=validate(t,e);if(!o.valid)throw Error(o.error);for(var s=0;s<t.length;++s)switch(t[s].type){case"lang":r.push(t[s]);break;case"output":n.push(t[s]);break;default:throw Error("Extension loader error: Type unrecognized!!!")}}function listen(t,e){if(!i.helper.isString(t))throw Error("Invalid argument in converter.listen() method: name must be a string, but "+typeof t+" given");if("function"!=typeof e)throw Error("Invalid argument in converter.listen() method: callback must be a function, but "+typeof e+" given");o.hasOwnProperty(t)||(o[t]=[]),o[t].push(e)}function rTrimInputText(t){var e=t.match(/^\s*/)[0].length,r=new RegExp("^\\s{0,"+e+"}","gm");return t.replace(r,"")}var e={},r=[],n=[],o={},l=u;_constructor(),this._dispatch=function(t,e,r,n){if(o.hasOwnProperty(t))for(var i=0;i<o[t].length;++i){var s=o[t][i](t,e,this,r,n);s&&"undefined"!=typeof s&&(e=s)}return e},this.listen=function(t,e){return listen(t,e),this},this.makeHtml=function(t){if(!t)return t;var o={gHtmlBlocks:[],gHtmlMdBlocks:[],gHtmlSpans:[],gUrls:{},gTitles:{},gDimensions:{},gListLevel:0,hashLinkCounts:{},langExtensions:r,outputModifiers:n,converter:this,ghCodeBlocks:[]};return t=t.replace(/~/g,"~T"),t=t.replace(/\$/g,"~D"),t=t.replace(/\r\n/g,"\n"),t=t.replace(/\r/g,"\n"),t=t.replace(/\u00A0/g," "),e.smartIndentationFix&&(t=rTrimInputText(t)),t="\n\n"+t+"\n\n",t=i.subParser("detab")(t,e,o),t=i.subParser("stripBlankLines")(t,e,o),i.helper.forEach(r,function(r){t=i.subParser("runExtension")(r,t,e,o)}),t=i.subParser("hashPreCodeTags")(t,e,o),t=i.subParser("githubCodeBlocks")(t,e,o),t=i.subParser("hashHTMLBlocks")(t,e,o),t=i.subParser("hashHTMLSpans")(t,e,o),t=i.subParser("stripLinkDefinitions")(t,e,o),t=i.subParser("blockGamut")(t,e,o),t=i.subParser("unhashHTMLSpans")(t,e,o),t=i.subParser("unescapeSpecialChars")(t,e,o),t=t.replace(/~D/g,"$$"),t=t.replace(/~T/g,"~"),i.helper.forEach(n,function(r){t=i.subParser("runExtension")(r,t,e,o)}),t},this.setOption=function(t,r){e[t]=r},this.getOption=function(t){return e[t]},this.getOptions=function(){return e},this.addExtension=function(t,e){e=e||null,_parseExtension(t,e)},this.useExtension=function(t){_parseExtension(t)},this.setFlavor=function(t){if(!c.hasOwnProperty(t))throw Error(t+" flavor was not found");var r=c[t];l=t;for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])},this.getFlavor=function(){return l},this.removeExtension=function(t){i.helper.isArray(t)||(t=[t]);for(var e=0;e<t.length;++e){for(var o=t[e],s=0;s<r.length;++s)r[s]===o&&r[s].splice(s,1);for(var a=0;a<n.length;++s)n[a]===o&&n[a].splice(s,1)}},this.getAllExtensions=function(){return{language:r,output:n}}},i.subParser("anchors",function(t,e,r){"use strict";t=r.converter._dispatch("anchors.before",t,e,r);var n=function(t,e,n,o,s,a,u,c){i.helper.isUndefined(c)&&(c=""),t=e;var l=n,f=o.toLowerCase(),h=s,p=c;if(!h)if(f||(f=l.toLowerCase().replace(/ ?\n/g," ")),h="#"+f,i.helper.isUndefined(r.gUrls[f])){if(!(t.search(/\(\s*\)$/m)>-1))return t;h=""}else h=r.gUrls[f],i.helper.isUndefined(r.gTitles[f])||(p=r.gTitles[f]);h=i.helper.escapeCharacters(h,"*_",!1);var d='<a href="'+h+'"';return""!==p&&null!==p&&(p=p.replace(/"/g,"&quot;"),p=i.helper.escapeCharacters(p,"*_",!1),d+=' title="'+p+'"'),d+=">"+l+"</a>"};return t=t.replace(/(\[((?:\[[^\]]*]|[^\[\]])*)][ ]?(?:\n[ ]*)?\[(.*?)])()()()()/g,n),t=t.replace(/(\[((?:\[[^\]]*]|[^\[\]])*)]\([ \t]*()<?(.*?(?:\(.*?\).*?)?)>?[ \t]*((['"])(.*?)\6[ \t]*)?\))/g,n),t=t.replace(/(\[([^\[\]]+)])()()()()()/g,n),e.ghMentions&&(t=t.replace(/(^|\s)(\\)?(@([a-z\d\-]+))(?=[.!?;,[\]()]|\s|$)/gim,function(t,e,r,n,i){return"\\"===r?e+n:e+'<a href="https://www.github.com/'+i+'">'+n+"</a>"})),t=r.converter._dispatch("anchors.after",t,e,r)}),i.subParser("autoLinks",function(t,e,r){"use strict";function replaceLink(t,r,n,i,o){var s=r,a="";return/^www\./i.test(r)&&(r=r.replace(/^www\./i,"http://www.")),e.excludeTrailingPunctuationFromURLs&&o&&(a=o),'<a href="'+r+'">'+s+"</a>"+a}function replaceMail(t,e){var r=i.subParser("unescapeSpecialChars")(e);return i.subParser("encodeEmailAddress")(r)}t=r.converter._dispatch("autoLinks.before",t,e,r);var n=/\b(((https?|ftp|dict):\/\/|www\.)[^'">\s]+\.[^'">\s]+)()(?=\s|$)(?!["<>])/gi,o=/\b(((https?|ftp|dict):\/\/|www\.)[^'">\s]+\.[^'">\s]+?)([.!?()]?)(?=\s|$)(?!["<>])/gi,s=/<(((https?|ftp|dict):\/\/|www\.)[^'">\s]+)>/gi,a=/(?:^|\s)([A-Za-z0-9!#$%&'*+-\/=?^_`{|}~.]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)(?:$|\s)/gi,u=/<(?:mailto:)?([-.\w]+@[-a-z0-9]+(\.[-a-z0-9]+)*\.[a-z]+)>/gi;return t=t.replace(s,replaceLink),t=t.replace(u,replaceMail),e.simplifiedAutoLink&&(t=e.excludeTrailingPunctuationFromURLs?t.replace(o,replaceLink):t.replace(n,replaceLink),t=t.replace(a,replaceMail)),t=r.converter._dispatch("autoLinks.after",t,e,r)}),i.subParser("blockGamut",function(t,e,r){"use strict";t=r.converter._dispatch("blockGamut.before",t,e,r),t=i.subParser("blockQuotes")(t,e,r),t=i.subParser("headers")(t,e,r);var n=i.subParser("hashBlock")("<hr />",e,r);return t=t.replace(/^ {0,2}( ?-){3,}[ \t]*$/gm,n),t=t.replace(/^ {0,2}( ?\*){3,}[ \t]*$/gm,n),t=t.replace(/^ {0,2}( ?_){3,}[ \t]*$/gm,n),t=i.subParser("lists")(t,e,r),t=i.subParser("codeBlocks")(t,e,r),t=i.subParser("tables")(t,e,r),t=i.subParser("hashHTMLBlocks")(t,e,r),t=i.subParser("paragraphs")(t,e,r),t=r.converter._dispatch("blockGamut.after",t,e,r)}),i.subParser("blockQuotes",function(t,e,r){"use strict";return t=r.converter._dispatch("blockQuotes.before",t,e,r),t=t.replace(/((^ {0,3}>[ \t]?.+\n(.+\n)*\n*)+)/gm,function(t,n){var o=n;return o=o.replace(/^[ \t]*>[ \t]?/gm,"~0"),o=o.replace(/~0/g,""),o=o.replace(/^[ \t]+$/gm,""),o=i.subParser("githubCodeBlocks")(o,e,r),o=i.subParser("blockGamut")(o,e,r),o=o.replace(/(^|\n)/g,"$1  "),o=o.replace(/(\s*<pre>[^\r]+?<\/pre>)/gm,function(t,e){var r=e;return r=r.replace(/^  /gm,"~0"),r=r.replace(/~0/g,"")}),i.subParser("hashBlock")("<blockquote>\n"+o+"\n</blockquote>",e,r)}),t=r.converter._dispatch("blockQuotes.after",t,e,r)}),i.subParser("codeBlocks",function(t,e,r){"use strict";t=r.converter._dispatch("codeBlocks.before",t,e,r),t+="~0";var n=/(?:\n\n|^)((?:(?:[ ]{4}|\t).*\n+)+)(\n*[ ]{0,3}[^ \t\n]|(?=~0))/g;return t=t.replace(n,function(t,n,o){var s=n,a=o,u="\n";return s=i.subParser("outdent")(s),s=i.subParser("encodeCode")(s),s=i.subParser("detab")(s),s=s.replace(/^\n+/g,""),s=s.replace(/\n+$/g,""),e.omitExtraWLInCodeBlocks&&(u=""),s="<pre><code>"+s+u+"</code></pre>",i.subParser("hashBlock")(s,e,r)+a}),t=t.replace(/~0/,""),t=r.converter._dispatch("codeBlocks.after",t,e,r)}),i.subParser("codeSpans",function(t,e,r){"use strict";return t=r.converter._dispatch("codeSpans.before",t,e,r),"undefined"==typeof t&&(t=""),t=t.replace(/(^|[^\\])(`+)([^\r]*?[^`])\2(?!`)/gm,function(t,e,r,n){var o=n;return o=o.replace(/^([ \t]*)/g,""),o=o.replace(/[ \t]*$/g,""),o=i.subParser("encodeCode")(o),e+"<code>"+o+"</code>"}),t=r.converter._dispatch("codeSpans.after",t,e,r)}),i.subParser("detab",function(t){"use strict";return t=t.replace(/\t(?=\t)/g,"    "),t=t.replace(/\t/g,"~A~B"),t=t.replace(/~B(.+?)~A/g,function(t,e){for(var r=e,n=4-r.length%4,i=0;i<n;i++)r+=" ";return r}),t=t.replace(/~A/g,"    "),t=t.replace(/~B/g,"")}),i.subParser("encodeAmpsAndAngles",function(t){"use strict";return t=t.replace(/&(?!#?[xX]?(?:[0-9a-fA-F]+|\w+);)/g,"&amp;"),t=t.replace(/<(?![a-z\/?\$!])/gi,"&lt;")}),i.subParser("encodeBackslashEscapes",function(t){"use strict";return t=t.replace(/\\(\\)/g,i.helper.escapeCharactersCallback),t=t.replace(/\\([`*_{}\[\]()>#+-.!])/g,i.helper.escapeCharactersCallback)}),i.subParser("encodeCode",function(t){"use strict";return t=t.replace(/&/g,"&amp;"),t=t.replace(/</g,"&lt;"),t=t.replace(/>/g,"&gt;"),t=i.helper.escapeCharacters(t,"*_{}[]\\",!1)}),i.subParser("encodeEmailAddress",function(t){"use strict";var e=[function(t){return"&#"+t.charCodeAt(0)+";"},function(t){return"&#x"+t.charCodeAt(0).toString(16)+";"},function(t){return t}];return t="mailto:"+t,t=t.replace(/./g,function(t){if("@"===t)t=e[Math.floor(2*Math.random())](t);else if(":"!==t){var r=Math.random();t=r>.9?e[2](t):r>.45?e[1](t):e[0](t)}return t}),t='<a href="'+t+'">'+t+"</a>",t=t.replace(/">.+:/g,'">')}),i.subParser("escapeSpecialCharsWithinTagAttributes",function(t){"use strict";var e=/(<[a-z\/!$]("[^"]*"|'[^']*'|[^'">])*>|<!(--.*?--\s*)+>)/gi;return t=t.replace(e,function(t){var e=t.replace(/(.)<\/?code>(?=.)/g,"$1`");return e=i.helper.escapeCharacters(e,"\\`*_",!1)})}),i.subParser("githubCodeBlocks",function(t,e,r){"use strict";return e.ghCodeBlocks?(t=r.converter._dispatch("githubCodeBlocks.before",t,e,r),t+="~0",t=t.replace(/(?:^|\n)```(.*)\n([\s\S]*?)\n```/g,function(t,n,o){var s=e.omitExtraWLInCodeBlocks?"":"\n";return o=i.subParser("encodeCode")(o),o=i.subParser("detab")(o),o=o.replace(/^\n+/g,""),o=o.replace(/\n+$/g,""),o="<pre><code"+(n?' class="'+n+" language-"+n+'"':"")+">"+o+s+"</code></pre>",o=i.subParser("hashBlock")(o,e,r),"\n\n~G"+(r.ghCodeBlocks.push({text:t,codeblock:o})-1)+"G\n\n"}),t=t.replace(/~0/,""),r.converter._dispatch("githubCodeBlocks.after",t,e,r)):t}),i.subParser("hashBlock",function(t,e,r){"use strict";return t=t.replace(/(^\n+|\n+$)/g,""),"\n\n~K"+(r.gHtmlBlocks.push(t)-1)+"K\n\n"}),i.subParser("hashElement",function(t,e,r){"use strict";return function(t,e){var n=e;return n=n.replace(/\n\n/g,"\n"),n=n.replace(/^\n/,""),n=n.replace(/\n+$/g,""),n="\n\n~K"+(r.gHtmlBlocks.push(n)-1)+"K\n\n"}}),i.subParser("hashHTMLBlocks",function(t,e,r){"use strict";for(var n=["pre","div","h1","h2","h3","h4","h5","h6","blockquote","table","dl","ol","ul","script","noscript","form","fieldset","iframe","math","style","section","header","footer","nav","article","aside","address","audio","canvas","figure","hgroup","output","video","p"],o=function(t,e,n,i){var o=t;return n.search(/\bmarkdown\b/)!==-1&&(o=n+r.converter.makeHtml(e)+i),"\n\n~K"+(r.gHtmlBlocks.push(o)-1)+"K\n\n"},s=0;s<n.length;++s)t=i.helper.replaceRecursiveRegExp(t,o,"^ {0,3}<"+n[s]+"\\b[^>]*>","</"+n[s]+">","gim");return t=t.replace(/(\n {0,3}(<(hr)\b([^<>])*?\/?>)[ \t]*(?=\n{2,}))/g,i.subParser("hashElement")(t,e,r)),t=i.helper.replaceRecursiveRegExp(t,function(t){return"\n\n~K"+(r.gHtmlBlocks.push(t)-1)+"K\n\n"},"^ {0,3}<!--","-->","gm"),t=t.replace(/(?:\n\n)( {0,3}(?:<([?%])[^\r]*?\2>)[ \t]*(?=\n{2,}))/g,i.subParser("hashElement")(t,e,r))}),i.subParser("hashHTMLSpans",function(t,e,r){"use strict";for(var n=i.helper.matchRecursiveRegExp(t,"<code\\b[^>]*>","</code>","gi"),o=0;o<n.length;++o)t=t.replace(n[o][0],"~C"+(r.gHtmlSpans.push(n[o][0])-1)+"C");return t}),i.subParser("unhashHTMLSpans",function(t,e,r){"use strict";for(var n=0;n<r.gHtmlSpans.length;++n)t=t.replace("~C"+n+"C",r.gHtmlSpans[n]);return t}),i.subParser("hashPreCodeTags",function(t,e,r){"use strict";var n=function(t,e,n,o){var s=n+i.subParser("encodeCode")(e)+o;return"\n\n~G"+(r.ghCodeBlocks.push({text:t,codeblock:s})-1)+"G\n\n"};return t=i.helper.replaceRecursiveRegExp(t,n,"^ {0,3}<pre\\b[^>]*>\\s*<code\\b[^>]*>","^ {0,3}</code>\\s*</pre>","gim")}),i.subParser("headers",function(t,e,r){"use strict";function headerId(t){var e,o;return o=s?t.replace(/ /g,"-").replace(/&amp;/g,"").replace(/~T/g,"").replace(/~D/g,"").replace(/[&+$,\/:;=?@"#{}|^~\[\]`\\*)(%.!'<>]/g,"").toLowerCase():t.replace(/[^\w]/g,"").toLowerCase(),r.hashLinkCounts[o]?e=o+"-"+r.hashLinkCounts[o]++:(e=o,r.hashLinkCounts[o]=1),n===!0&&(n="section"),i.helper.isString(n)?n+e:e}t=r.converter._dispatch("headers.before",t,e,r);var n=e.prefixHeaderId,o=isNaN(parseInt(e.headerLevelStart))?1:parseInt(e.headerLevelStart),s=e.ghCompatibleHeaderId,a=e.smoothLivePreview?/^(.+)[ \t]*\n={2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n=+[ \t]*\n+/gm,u=e.smoothLivePreview?/^(.+)[ \t]*\n-{2,}[ \t]*\n+/gm:/^(.+)[ \t]*\n-+[ \t]*\n+/gm;t=t.replace(a,function(t,n){var s=i.subParser("spanGamut")(n,e,r),a=e.noHeaderId?"":' id="'+headerId(n)+'"',u=o,c="<h"+u+a+">"+s+"</h"+u+">";return i.subParser("hashBlock")(c,e,r)}),t=t.replace(u,function(t,n){var s=i.subParser("spanGamut")(n,e,r),a=e.noHeaderId?"":' id="'+headerId(n)+'"',u=o+1,c="<h"+u+a+">"+s+"</h"+u+">";return i.subParser("hashBlock")(c,e,r)});var c=e.requireSpaceBeforeHeadingText?/^(#{1,6})[ \t]+(.+?)[ \t]*#*\n+/gm:/^(#{1,6})[ \t]*(.+?)[ \t]*#*\n+/gm;return t=t.replace(c,function(t,n,s){var a=i.subParser("spanGamut")(s,e,r),u=e.noHeaderId?"":' id="'+headerId(s)+'"',c=o-1+n.length,l="<h"+c+u+">"+a+"</h"+c+">";return i.subParser("hashBlock")(l,e,r)}),t=r.converter._dispatch("headers.after",t,e,r)}),i.subParser("images",function(t,e,r){"use strict";function writeImageTag(t,e,n,o,s,a,u,c){var l=r.gUrls,f=r.gTitles,h=r.gDimensions;if(n=n.toLowerCase(),c||(c=""),""===o||null===o){if(""!==n&&null!==n||(n=e.toLowerCase().replace(/ ?\n/g," ")),o="#"+n,i.helper.isUndefined(l[n]))return t;o=l[n],i.helper.isUndefined(f[n])||(c=f[n]),i.helper.isUndefined(h[n])||(s=h[n].width,a=h[n].height)}e=e.replace(/"/g,"&quot;"),e=i.helper.escapeCharacters(e,"*_",!1),o=i.helper.escapeCharacters(o,"*_",!1);var p='<img src="'+o+'" alt="'+e+'"';return c&&(c=c.replace(/"/g,"&quot;"),c=i.helper.escapeCharacters(c,"*_",!1),p+=' title="'+c+'"'),s&&a&&(s="*"===s?"auto":s,a="*"===a?"auto":a,p+=' width="'+s+'"',p+=' height="'+a+'"'),p+=" />"}t=r.converter._dispatch("images.before",t,e,r);var n=/!\[(.*?)]\s?\([ \t]*()<?(\S+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*(?:(['"])(.*?)\6[ \t]*)?\)/g,o=/!\[([^\]]*?)] ?(?:\n *)?\[(.*?)]()()()()()/g;return t=t.replace(o,writeImageTag),t=t.replace(n,writeImageTag),t=r.converter._dispatch("images.after",t,e,r)}),i.subParser("italicsAndBold",function(t,e,r){"use strict";return t=r.converter._dispatch("italicsAndBold.before",t,e,r),e.literalMidWordUnderscores?(t=t.replace(/(^|\s|>|\b)__(?=\S)([\s\S]+?)__(?=\b|<|\s|$)/gm,"$1<strong>$2</strong>"),t=t.replace(/(^|\s|>|\b)_(?=\S)([\s\S]+?)_(?=\b|<|\s|$)/gm,"$1<em>$2</em>"),t=t.replace(/(\*\*)(?=\S)([^\r]*?\S[*]*)\1/g,"<strong>$2</strong>"),t=t.replace(/(\*)(?=\S)([^\r]*?\S)\1/g,"<em>$2</em>")):(t=t.replace(/(\*\*|__)(?=\S)([^\r]*?\S[*_]*)\1/g,"<strong>$2</strong>"),t=t.replace(/(\*|_)(?=\S)([^\r]*?\S)\1/g,"<em>$2</em>")),t=r.converter._dispatch("italicsAndBold.after",t,e,r)}),i.subParser("lists",function(t,e,r){"use strict";function processListItems(t,n){r.gListLevel++,t=t.replace(/\n{2,}$/,"\n"),t+="~0";var o=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(~0| {0,3}([*+-]|\d+[.])[ \t]+))/gm,s=/\n[ \t]*\n(?!~0)/.test(t);return e.disableForced4SpacesIndentedSublists&&(o=/(\n)?(^ {0,3})([*+-]|\d+[.])[ \t]+((\[(x|X| )?])?[ \t]*[^\r]+?(\n{1,2}))(?=\n*(~0|\2([*+-]|\d+[.])[ \t]+))/gm),t=t.replace(o,function(t,n,o,a,u,c,l){l=l&&""!==l.trim();var f=i.subParser("outdent")(u,e,r),h="";return c&&e.tasklists&&(h=' class="task-list-item" style="list-style-type: none;"',f=f.replace(/^[ \t]*\[(x|X| )?]/m,function(){var t='<input type="checkbox" disabled style="margin: 0px 0.35em 0.25em -1.6em; vertical-align: middle;"';return l&&(t+=" checked"),t+=">"})),f=f.replace(/^([-*+]|\d\.)[ \t]+[\S\n ]*/g,function(t){return"~A"+t}),n||f.search(/\n{2,}/)>-1?(f=i.subParser("githubCodeBlocks")(f,e,r),f=i.subParser("blockGamut")(f,e,r)):(f=i.subParser("lists")(f,e,r),f=f.replace(/\n$/,""),f=i.subParser("hashHTMLBlocks")(f,e,r),f=f.replace(/\n\n+/g,"\n\n"),f=f.replace(/\n\n/g,"~B"),f=s?i.subParser("paragraphs")(f,e,r):i.subParser("spanGamut")(f,e,r),f=f.replace(/~B/g,"\n\n")),f=f.replace("~A",""),f="<li"+h+">"+f+"</li>\n"}),t=t.replace(/~0/g,""),r.gListLevel--,n&&(t=t.replace(/\s+$/,"")),t}function parseConsecutiveLists(t,r,n){var i=e.disableForced4SpacesIndentedSublists?/^ ?\d+\.[ \t]/gm:/^ {0,3}\d+\.[ \t]/gm,o=e.disableForced4SpacesIndentedSublists?/^ ?[*+-][ \t]/gm:/^ {0,3}[*+-][ \t]/gm,s="ul"===r?i:o,a="";return t.search(s)!==-1?!function parseCL(t){var e=t.search(s);e!==-1?(a+="\n<"+r+">\n"+processListItems(t.slice(0,e),!!n)+"</"+r+">\n",r="ul"===r?"ol":"ul",s="ul"===r?i:o,parseCL(t.slice(e))):a+="\n<"+r+">\n"+processListItems(t,!!n)+"</"+r+">\n"}(t):a="\n<"+r+">\n"+processListItems(t,!!n)+"</"+r+">\n",a}return t=r.converter._dispatch("lists.before",t,e,r),t+="~0",t=r.gListLevel?t.replace(/^(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(t,e,r){var n=r.search(/[*+-]/g)>-1?"ul":"ol";return parseConsecutiveLists(e,n,!0)}):t.replace(/(\n\n|^\n?)(( {0,3}([*+-]|\d+[.])[ \t]+)[^\r]+?(~0|\n{2,}(?=\S)(?![ \t]*(?:[*+-]|\d+[.])[ \t]+)))/gm,function(t,e,r,n){var i=n.search(/[*+-]/g)>-1?"ul":"ol";return parseConsecutiveLists(r,i,!1)}),t=t.replace(/~0/,""),t=r.converter._dispatch("lists.after",t,e,r)}),i.subParser("outdent",function(t){"use strict";return t=t.replace(/^(\t|[ ]{1,4})/gm,"~0"),t=t.replace(/~0/g,"")}),i.subParser("paragraphs",function(t,e,r){"use strict";t=r.converter._dispatch("paragraphs.before",t,e,r),t=t.replace(/^\n+/g,""),t=t.replace(/\n+$/g,"");for(var n=t.split(/\n{2,}/g),o=[],s=n.length,a=0;a<s;a++){var u=n[a];u.search(/~(K|G)(\d+)\1/g)>=0?o.push(u):(u=i.subParser("spanGamut")(u,e,r),u=u.replace(/^([ \t]*)/g,"<p>"),u+="</p>",o.push(u))}for(s=o.length,a=0;a<s;a++){for(var c="",l=o[a],f=!1;l.search(/~(K|G)(\d+)\1/)>=0;){var h=RegExp.$1,p=RegExp.$2;c="K"===h?r.gHtmlBlocks[p]:f?i.subParser("encodeCode")(r.ghCodeBlocks[p].text):r.ghCodeBlocks[p].codeblock,c=c.replace(/\$/g,"$$$$"),l=l.replace(/(\n\n)?~(K|G)\d+\2(\n\n)?/,c),/^<pre\b[^>]*>\s*<code\b[^>]*>/.test(l)&&(f=!0)}o[a]=l}return t=o.join("\n"),t=t.replace(/^\n+/g,""),t=t.replace(/\n+$/g,""),r.converter._dispatch("paragraphs.after",t,e,r)}),i.subParser("runExtension",function(t,e,r,n){"use strict";if(t.filter)e=t.filter(e,n.converter,r);else if(t.regex){var i=t.regex;!i instanceof RegExp&&(i=new RegExp(i,"g")),e=e.replace(i,t.replace)}return e}),i.subParser("spanGamut",function(t,e,r){"use strict";return t=r.converter._dispatch("spanGamut.before",t,e,r),t=i.subParser("codeSpans")(t,e,r),t=i.subParser("escapeSpecialCharsWithinTagAttributes")(t,e,r),t=i.subParser("encodeBackslashEscapes")(t,e,r),t=i.subParser("images")(t,e,r),t=i.subParser("anchors")(t,e,r),t=i.subParser("autoLinks")(t,e,r),t=i.subParser("encodeAmpsAndAngles")(t,e,r),t=i.subParser("italicsAndBold")(t,e,r),t=i.subParser("strikethrough")(t,e,r),t=e.simpleLineBreaks?t.replace(/\n/g,"<br />\n"):t.replace(/  +\n/g,"<br />\n"),t=r.converter._dispatch("spanGamut.after",t,e,r)}),i.subParser("strikethrough",function(t,e,r){"use strict";return e.strikethrough&&(t=r.converter._dispatch("strikethrough.before",t,e,r),t=t.replace(/(?:~T){2}([\s\S]+?)(?:~T){2}/g,"<del>$1</del>"),t=r.converter._dispatch("strikethrough.after",t,e,r)),t}),i.subParser("stripBlankLines",function(t){"use strict";return t.replace(/^[ \t]+$/gm,"")}),i.subParser("stripLinkDefinitions",function(t,e,r){"use strict";var n=/^ {0,3}\[(.+)]:[ \t]*\n?[ \t]*<?(\S+?)>?(?: =([*\d]+[A-Za-z%]{0,4})x([*\d]+[A-Za-z%]{0,4}))?[ \t]*\n?[ \t]*(?:(\n*)["|'(](.+?)["|')][ \t]*)?(?:\n+|(?=~0))/gm;return t+="~0",t=t.replace(n,function(t,n,o,s,a,u,c){return n=n.toLowerCase(),r.gUrls[n]=i.subParser("encodeAmpsAndAngles")(o),u?u+c:(c&&(r.gTitles[n]=c.replace(/"|'/g,"&quot;")),e.parseImgDimensions&&s&&a&&(r.gDimensions[n]={width:s,height:a}),"")}),t=t.replace(/~0/,"")}),i.subParser("tables",function(t,e,r){"use strict";function parseStyles(t){return/^:[ \t]*--*$/.test(t)?' style="text-align:left;"':/^--*[ \t]*:[ \t]*$/.test(t)?' style="text-align:right;"':/^:[ \t]*--*[ \t]*:$/.test(t)?' style="text-align:center;"':""}function parseHeaders(t,n){var o="";return t=t.trim(),e.tableHeaderId&&(o=' id="'+t.replace(/ /g,"_").toLowerCase()+'"'),t=i.subParser("spanGamut")(t,e,r),"<th"+o+n+">"+t+"</th>\n"}function parseCells(t,n){var o=i.subParser("spanGamut")(t,e,r);return"<td"+n+">"+o+"</td>\n"}function buildTable(t,e){for(var r="<table>\n<thead>\n<tr>\n",n=t.length,i=0;i<n;++i)r+=t[i];for(r+="</tr>\n</thead>\n<tbody>\n",i=0;i<e.length;++i){r+="<tr>\n";for(var o=0;o<n;++o)r+=e[i][o];r+="</tr>\n"}return r+="</tbody>\n</table>\n"}if(!e.tables)return t;var n=/^ {0,3}\|?.+\|.+\n[ \t]{0,3}\|?[ \t]*:?[ \t]*(?:-|=){2,}[ \t]*:?[ \t]*\|[ \t]*:?[ \t]*(?:-|=){2,}[\s\S]+?(?:\n\n|~0)/gm;return t=r.converter._dispatch("tables.before",t,e,r),t=t.replace(n,function(t){var e,r=t.split("\n");for(e=0;e<r.length;++e)/^ {0,3}\|/.test(r[e])&&(r[e]=r[e].replace(/^ {0,3}\|/,"")),/\|[ \t]*$/.test(r[e])&&(r[e]=r[e].replace(/\|[ \t]*$/,""));var n=r[0].split("|").map(function(t){return t.trim()}),o=r[1].split("|").map(function(t){return t.trim()}),s=[],a=[],u=[],c=[];for(r.shift(),r.shift(),e=0;e<r.length;++e)""!==r[e].trim()&&s.push(r[e].split("|").map(function(t){return t.trim()}));if(n.length<o.length)return t;for(e=0;e<o.length;++e)u.push(parseStyles(o[e]));for(e=0;e<n.length;++e)i.helper.isUndefined(u[e])&&(u[e]=""),a.push(parseHeaders(n[e],u[e]));for(e=0;e<s.length;++e){for(var l=[],f=0;f<a.length;++f)i.helper.isUndefined(s[e][f]),l.push(parseCells(s[e][f],u[f]));c.push(l)}return buildTable(a,c)}),t=r.converter._dispatch("tables.after",t,e,r)}),i.subParser("unescapeSpecialChars",function(t){"use strict";return t=t.replace(/~E(\d+)E/g,function(t,e){var r=parseInt(e);return String.fromCharCode(r)})});"undefined"!=typeof t&&t.exports?t.exports=i:(n=function(){"use strict";return i}.call(e,r,e,t),!(void 0!==n&&(t.exports=n)))}).call(this)},624,,,,function(t,e,r){t.exports='<main>\n    <h1>Hello from Angular App with Webpack</h1>\n    <img src="'+r(38)+'">\n</main>\n<div class="container">\n    <button class="btn btn-primary">Test</button>\n\n    <div *ngFor="let post of posts">\n        <h3>{{post.title}}</h3>\n        <div [innerHTML]="post.text"></div>\n    </div>\n</div>'},function(t,e,r){t.exports=r.p+"assets/angular.9db278d630f5fabd8e7ba16c2e329a3a.png"},function(t,e){t.exports="main {\n    padding: 1em;\n    font-family: Arial, Helvetica, sans-serif;\n    text-align: center;\n    margin-top: 50px;\n    display: block;\n}\n"}]);
//# sourceMappingURL=app.79b6b88094c40af0d1e1.js.map